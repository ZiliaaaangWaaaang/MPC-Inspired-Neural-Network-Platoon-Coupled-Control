function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 14:00:32.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.916747438412835;-1;-1;-0.864616013726533;-1;-1;-1];
x1_step2.gain = [1;1;1.04343428869069;1.04813396838925;1.08282838528698;1.18203243532656;1.00712929936406;1.01675928713546;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.8403647011074140138;-1.4061203894512259716;-1.5575248165080941565;1.1832813393438867955;0.83633789881486908513;-0.9918463952091977065;0.28791481440516369927;-0.68264013786562915964;0.72897762045640313033;-0.23122922640770512959;0.077422191372001625265;-0.2260196280675060565;-0.45095646555866480965;0.52440533287712087773;1.0422849175184676351;-1.3163316977371326555;1.1244067742657148923;1.5909158506167455638;1.6839650020737424452;-2.0166987404154981256];
IW1_1 = [1.2045337927561605706 1.1969803588801966043 0.51613867350182396354 -0.82411461744089220538 -0.33971392142713463524 0.08021539933314712767 0.45959449658642709258 -0.53698164933867131854 0.62243879666829771136;0.88027385748167175095 -0.90886132540311515005 -0.49268565974759603865 0.86699276658860324751 1.1783604759293218045 0.58754203894208822945 0.84375917986365989165 -0.48275546865700619259 -0.20947958937218058573;0.85599003156419883886 0.057499580453962348403 -1.3104882831053770165 0.39046498997963002831 0.2731027210070422484 -0.29660302531683330196 -0.37454253685033572774 0.73992492592252157024 -0.078323175238265693721;-1.0885865394544351759 -0.58669334508097881198 0.161248907843063366 0.57753345659212784735 -0.6793763545087101452 0.73885242384931326676 -0.59606374483750756976 -0.64150324402642255883 -0.64200728259426276257;-0.18055272351458415137 0.42177062755569172392 -1.4178216666614384955 0.26622574441759178088 -0.12767633296900390838 1.1883422785980144454 0.31602231949157755242 -0.12448574865099135134 -0.32291254785209827505;0.27870631633809661576 0.57120688673614239406 0.1634108161180821972 0.24410916647414426794 1.2349699795707882455 -0.80575790176016237609 -1.2055785613137495194 0.59420880485210536559 0.6013017744792702457;-1.3305058467202024453 -0.050646672488797284117 -0.6778349157427865368 -0.2694581780902564061 0.11922796600938928568 -0.13006457009804633929 -0.91164298672382881872 1.090407868803228153 0.48893944171674058596;1.1978474030515937621 0.2405586216096511909 -0.19608067459944977795 0.54219709680404681862 0.80471176103325914308 0.86564354939837118152 -0.53507721050986956079 0.77585692899614300266 0.28583661289348183399;-1.4657341170008371112 0.85963262000919449246 0.240935645152771577 0.4815376467187494347 0.75295164934589364769 -0.82051222673837609367 0.060432880599103441788 -0.45003143409163437472 -0.31447179849858114542;0.29662944765339754882 0.84293793419003926193 0.54642661230586342391 0.81298893685083017946 -0.25587988135675115986 0.80788613446736556867 0.49395970065256883386 1.0160138242043084134 0.17722115415155076379;-1.9350997112195578165 0.3292960625946017017 -0.64195387886635857377 -0.24178483672171960372 -0.98857638477718601244 0.68756045726135261997 0.57220845438715361997 -0.11034793267374991277 -0.15164275719920389252;-0.31506238230385053001 -0.10204323058842160177 0.0064227170869433150568 0.68666194407327640903 -1.3084743076880165358 -0.15207003325473000821 -1.0155819529967509141 0.13219519479896674197 -0.0095110714474034470378;-0.0024625150525995221501 0.062316724185497239519 -0.79831452929133672747 0.079216752515445645888 0.62154244821452275804 0.78670756865601787489 0.64270877583845109626 -1.28050375356209023 -0.83690181464425894564;-0.096525986655822418325 -0.64449673473468949148 -0.41517050701642121968 0.39238217535527047941 1.0327512821982736124 0.66683144319550402557 -0.077801997524081664692 0.25687545482149271026 0.080023111517748865551;0.63804486026353846029 -0.86744008046944454104 -0.17643058269818753803 -0.64743258122476277094 1.1778279232032893287 -0.72362772139125741688 -0.11644830229227003116 0.35511571065919528278 0.25687749218328398415;-0.82374924888784750721 -0.70220825789087815139 -0.15592481320181983406 -0.055693604246433187077 -0.064386486127523262502 0.94269228745244371126 0.38141473785612134417 -0.028565560957229493844 -1.0850653885960954703;-0.28426553255448366864 0.56280468734098676453 1.1608262835456475415 1.1107417256236822301 0.035864090133319065368 -0.57036819126760540666 -0.87770993921485640499 0.27308636172981048951 0.31608913038158276132;1.0629889644218786238 -0.55397410766229793211 0.25952417652183512597 -0.22544522003653977293 1.1655828040841202942 0.80403098058137623116 -0.14748902209073255776 0.54204886615235803315 0.59606076743056213285;0.83138202919828307902 -0.31960160844822993464 -0.48136500282886102164 1.2271071225639871294 -0.77701435558884668353 -0.40259752786950808723 -0.82504508734740045206 0.51291899699914078603 0.3899108169673847768;-0.54905219530555504637 -0.79385559283408757558 0.21057517112120568981 -0.232813763878190777 -0.27822784831314856246 0.062307367013537583167 -1.3003069060324377038 0.37365282811655664563 0.57605269563398575627];

% Layer 2
b2 = [1.6786560285780545154;1.3595323589359915584;-0.77603498475262111533;-0.63794466086455614562;-0.31441473566404881668;-0.082568478683903490101;0.28154140989935821926;0.46952718308552954252;-1.4357279329717735905;-1.6491384567663054384];
LW2_1 = [-0.63268557035952044387 -0.10321673855616206317 0.014754684426329222474 0.59134771569716138018 0.82130977921034775679 -0.1169467376534311237 0.63582916045323767396 0.1474920617821213753 -0.16282213787621732659 0.22481713738434488947 0.66753246755525541545 0.036755089442849726844 0.77063619844786623858 0.21218959649871838025 0.34026071847849209684 0.12323891633532498002 -0.29695586691835862414 -0.083332855842567846172 0.028084822876376824147 -0.075544988181838870767;-0.32646974704197184725 0.22282526433852062331 -0.481752367075794663 -0.21523005630244218533 -0.41692706208008878388 0.13395161129818378143 0.30566937118304948751 -0.13342590949288599123 -0.88670205515738542701 -0.67281418113849311702 -0.0069647634404662699115 0.015020746417337946937 -0.68736632740327663349 -0.04083998649996210123 -0.30300865945125782241 -0.1423071255710362526 0.23918360995433463057 -0.048965931524551864484 0.19988466310376626356 -0.50609068330765150101;0.018359808750290716739 0.10872266189437716777 -0.59159658700606410076 0.22304267485586326547 -0.13512610573021729965 -0.010755892258536023723 -0.076341994767293946955 0.32617952303564407002 0.21772301049242429039 0.087609533195317682019 -0.35494092191945769699 0.46968426208033176028 0.14760154805663233679 0.07621633831804862369 -0.1099076088732313522 0.054255991106333674445 0.61252087032233726305 0.29925743675091465157 -0.41336552551235283826 0.5905452156204111791;0.19111497056903131719 -0.33341008969723767708 0.65656386753758055885 -0.55059361042381016471 0.04775562622122212636 0.28821861940985399331 -0.43738429288839247855 0.39096978752330824314 0.2304031913496015771 -0.36837673508511814546 -0.6618650248230484312 -0.15024350525166046966 0.32414979956638995118 0.22578783247335723616 0.81651676801600558964 0.089002605560927594563 -0.25551268347069933107 0.075678913448167683953 -0.27866216069831262203 -0.23786149317048616014;0.39195610508317951792 -0.038345257894048384584 -0.3623952618711502871 -0.095030589622346506307 -0.54962509954396221445 0.26746015286848096038 -0.73523527371905694761 0.47622582475613750574 0.10140270234041295905 -0.0081314230816273459779 0.31718988891160804222 0.534448955914676338 -0.17234317845820210091 0.18196762646990466417 -0.057996957211189553716 -0.40011126143409619926 -0.38195929136155426509 -0.20008928427415445528 -0.051999133143689320324 0.30783322696444137545;-0.098851177655888217144 -0.40368705354404615937 -0.28668304888534562602 0.32061553635813572205 0.32649053907227509885 0.36492950036904886479 -0.18229775141948029171 -0.090411904088991065787 0.70134989253421331501 0.41907359856223319605 -0.64598758120023747065 -0.54307228820916630951 -0.30467107289328682063 -0.25249345927253469268 0.19114658615361826421 -0.41039960521242496716 0.70475719987030971403 0.43793688677679432075 0.32702693348168165866 -0.50167570429364116702;0.77886949775146152586 -0.089895525225652347934 -0.14734062217475468737 0.099258285955677302836 0.087114766246596642141 0.15940643085689776282 -0.027085790894408653257 0.29848912808416100395 0.022804770424536883328 -0.13389057772239312816 0.81639650721514012144 0.10681864260673970546 0.44429328390912375957 -0.30036871021039845964 0.72316107882428670717 0.26341689498240633549 0.064350201376015325749 0.30252695474507074191 -0.24871750344016613221 0.39608308465573283108;0.64810637425147255009 -0.66080572322947372932 -0.24458847901081617882 0.66683747403372461982 -0.15725162043213247731 0.74083309114854123401 -0.41998368977825306647 0.18746996881377392397 0.047260791123266414349 -0.46832627151165368007 -0.46045506680685782674 -0.26052492505905139319 -0.50742894694271145628 -0.27510887370836961674 -0.034386435113988790546 0.6415607655404386156 -0.09457154920039935464 -0.39917680086727058697 0.18633749225534163019 0.032168362242019354902;-0.55092634542749152615 -0.56300927207592255108 0.11554063924875818126 -0.33612696813015363606 0.048516071722642287178 0.048278270250642074668 -0.076944262631343129932 -0.4958406240380804908 0.11119047390496630823 0.17386977016772320326 0.54328416804164225695 0.12146701169059100078 -0.28359223841852954084 -0.09287177703798324413 -0.22968612980472621898 -0.062668740936492828286 0.34823243896027711308 0.72148857286830492264 -0.016917934174754338528 0.27645721469270717607;-0.46807202675351383681 -0.25159817591328881292 0.80815715153796563452 -0.15204211233081835197 -0.11392535573675843796 0.60597618491335547564 0.34552117705420459792 0.21854328445043816331 0.17409920881742133036 0.18123703147185438178 -0.041435239427767778242 -0.13374812885979384114 0.008498282766573139399 -0.58616980299190302173 0.34368387543254208527 -0.47114588344413865784 -0.14539445220247654289 -0.33609934490207177271 -0.48619596834745076874 -0.56657998735163106474];

% Layer 3
b3 = [1.7709954913635508333;-1.7882977806175845981;1.4620090952473885348;-1.3279140281001255985;-1.0178359292096808009;0.93271878707168631717;0.80610544835807729225;-0.54890279427517196797;-0.38134644187863941944;-0.10273959116147685089;-0.087892223099781924267;-0.1339853232195506727;0.48638710421002762097;-0.63630222722029450289;0.97230319777372364864;-1.1836768937532626822;1.3546969628584015766;-1.4424684337394657607;1.6611107269077418636;-1.5966591288683182892];
LW3_2 = [-1.1942813425313496545 0.93858598981259211413 0.14988966975068396259 0.61186552923454129438 -0.55105974569030402588 -0.5278550926029785817 0.36157348117476167948 0.40313264437568369081 -0.35639755713735532527 0.013981357538280024533;0.45341553255006888934 0.056167635627706075097 -1.0077207294180483554 0.18153014439942471991 -0.1790221256679538353 -0.16146830577652943051 0.15229833975557258152 0.47594619300428592235 0.21930692448908398196 1.1997431442800028378;-0.50490569108728078351 0.29016637449947918492 -0.7615138219455130919 0.34788472799936459579 0.23222491779807963308 0.75935040250312402232 -0.3781281997844070375 0.64941095512462010397 1.2540459109644053193 -0.17479815038806068017;0.55985317272473456018 0.97930262723174599238 0.30122702598071832147 0.9182466769413452079 0.045246889838248836868 -0.109733417435901634 0.090879746483101736532 -0.76913075201839975481 0.81577206078101294207 -0.1724227801022257256;0.87381046271025808458 0.59284061614059446743 -0.76733167634516408206 0.22826876546042204619 -0.013021451628325145244 -0.18308782685905486409 -0.32320790870845383935 -0.045638640399929056302 -1.2901376685942305134 -0.69483638623195742579;0.026641660966057894439 -0.54289806144175756231 0.2364643182167310842 0.34526399503407328995 0.94273056262405352523 0.33849904163540889268 0.21094845757670760422 0.47785856839599460955 0.22480166960995029424 0.98524905158144771011;-0.56237759585426172482 0.50409632690342287553 0.81179448206512938579 0.38095514605439512179 -1.0161598547839094664 -0.12929659513543675931 -0.1010653475910956306 0.85762167391098820257 0.42567266626819022513 -0.39992631760738078794;0.24579780294562530996 -0.28821425288513174978 -0.49904320446691241564 -0.90281012325830334309 -0.84142368136208511853 0.5299370112937104027 -0.44472553285861143868 0.39121410849109422569 -0.56866490764228150301 0.7023944643090447304;0.35999091209483030651 -0.76467462169917188586 -0.54225722791094455033 -0.13641780187100296939 0.67322625196216245858 0.052591690920929710928 -0.46930716495072216654 -0.63251249372082618549 -0.47157033920601987287 -0.0074082941123623166635;1.1593212109447974534 0.30135346544549929115 0.80871302443346348987 0.75911435982279173995 -0.28715978915681217298 0.10559615508297327813 -0.40141214418784904039 -0.87641399693415311667 -0.13717640895250921007 0.45189636422710544039;0.10092519122733792369 0.2106794144933882007 0.41127282590957542352 -0.93403540386503391968 1.229485555009554032 0.43635627852839009577 0.93753241330238057394 -0.083365068353015353564 -0.39093695403123551735 -0.18843168523632583544;-0.3776828668150463697 -0.058470112668721666016 0.25008307769174931146 -1.1999602550283909874 -0.22104873975385533336 -0.58347506421796624387 -0.24589682488025677021 0.10064719728074392191 0.10193266937080643075 0.48507513589728057379;0.10953342968933181545 -0.76699247231790501633 -0.011307798010056113042 -0.13696404063110143023 -0.80163565597340114 -0.090716320785590026654 -0.55093167842457146932 0.85148262094980853298 0.3451916476583281046 -1.0156762532952148259;-0.69562600079773684314 0.37115531546505436955 0.034358958239988891814 0.091638482264489978801 0.25253361444705396677 -0.1544359692717967858 0.94793373857064044952 0.48505507439937795011 0.89517709337996642649 1.0091352418864059093;0.31843212959120331673 -0.73259991653797706945 -0.17240714811903723458 0.44651331581347541988 -0.85411188797149062424 0.15080174756301190087 -0.5730973400035297427 1.0791704387111995533 -0.86649452397667137138 0.15166040955232973353;-0.49442098973222886604 0.0087801436266049231322 0.2438543343010245168 0.94791527776438799791 -0.24445282343855703755 -0.53962859640370919312 -0.64845511577160741545 -0.83644629719432539439 -0.75499964060561441936 0.49710485220528777273;0.67874278693478617974 0.3295870598951634034 0.47109249302681410754 -0.92604764772767900194 0.49871863075252037545 0.58026376260734624513 -0.11422653812844622834 0.75728243329699596043 0.35265247769288193824 -0.86788889779621036791;-0.52120019847631993137 -0.1781228326608489676 -0.75110238809142559901 -1.0376076219581260585 0.65908183584102186803 0.3546749827647666109 -0.42009307552841440581 0.17787244639056359885 0.68278996161577543145 -0.36116920062172042094;0.3957292349009506327 -1.2686753793437517412 -0.25043456914612954867 0.38958889521357237262 0.26695534390609221287 0.48432278001207534901 0.95471354810355735232 -0.40118606750246871284 0.58293236387774272078 0.095196543414226383883;-0.38789399582457367854 -0.57201241346020126333 0.082514729853019413985 -0.70288588503659710227 0.0012289637531653786057 1.1123407313269617624 0.40779466882660753146 0.83870281911777144757 -0.75580175510268232664 -0.039501694846160735619];

% Layer 4
b4 = [0.27977955917439162326;-1.1566326276911516047];
LW4_3 = [-0.4094924959388980823 0.22845249813756601798 0.83762379607452708274 0.10304160313385025971 -0.79533354517685928009 0.52251592418978132226 0.26027147534590111544 0.8112098701361184494 -0.22009078168250603702 -0.31590031650279715159 0.60194127052250256948 0.24595437595243646589 -0.075062495151267227822 0.33395566434921847287 0.021602204474257861999 -0.43165591911950296211 -0.93588630825351037945 -0.036109419362984833402 0.37626217088392982513 -0.83224155105453090364;-0.34444684255744745238 0.35333783266749346774 -0.64885328432203470683 -0.33550117088784919828 0.084361553045725554134 0.92590490009015180561 0.45438567295755444286 0.25176871584635235335 -0.54842685438058558223 0.6460045292610407941 0.33202701956679286921 0.4823036134047486434 0.47809255965466218585 -0.70693144830174192705 -0.36283594138852504063 -0.6029478459774977317 0.67330615538633975525 -0.2358764975048242285 -0.1108722580109203909 0.13471830965190328966];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000053;1];
y1_step1.xoffset = [-0.999999999989399;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
