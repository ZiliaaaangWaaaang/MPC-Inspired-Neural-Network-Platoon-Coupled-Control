function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 14:00:28.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.750956411335636;-0.982896160954866;-1;-0.73475800024408;-0.977486995207537;-1;-1];
x1_step2.gain = [1;1;1.14223288886694;1.05761395169577;1.18701832004569;1.28029257569294;1.06769393544509;1.03285757081092;1.02066608080763];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1227839437264508504;-1.8780679502061596864;1.8031039457343174259;-1.2354340440164142123;1.0518828171784033731;0.52311735306934725731;0.48866197562683050259;-0.540378843464066283;-0.3460699180591713664;0.15346138778534437752;0.28655211573279582016;-0.47766703961517492649;0.45839187958019583791;-1.0297275438903734646;0.87183194687534093514;-1.2030521243907221773;-1.3233701009296598983;-1.6786049625819183806;1.7205504619473188654;-1.934993808615026456];
IW1_1 = [0.016168994633738706379 -0.949647445717364036 0.75648047554618236266 -0.77121083553161373647 -0.20506059790416011901 0.12820037520442445489 -0.28897098459185943664 0.13782903330246235041 0.9098493701000990308;0.032998372632891459499 1.1169227660741720687 -0.20569930432153279987 0.65107220372426266586 -0.45282365166579602311 0.31560631809475936382 0.31736180902750693589 0.6556245538695107955 0.78108446747910509345;-0.83323213850127075819 -0.48949744663668792732 0.67315370084759118541 -0.85590292657372191165 0.89537035490155092443 -0.018537179620565787108 0.092720607767977442082 -0.28361813084775183702 -0.64781183918005291744;0.27876816476746701934 -0.042008194712702631723 -0.99522977922224176162 0.85643878793210959088 0.04725789362071917965 -1.0237908968510855967 1.046222417468909649 0.16875241293060777581 -0.52704051541550223092;-0.59552525532823097354 0.90753376359118653749 -0.32867771176252352783 -0.90814582105278940372 -0.60418791972546470603 -0.36550247524386686448 0.91637222258480288684 0.15527984897198979231 -0.32492667887509529834;-1.4114791048257662176 0.72161983230694770608 -0.45858507058167513604 -0.11121891869249038443 -1.1030597349566986232 -0.38431588548043482678 -0.13562763689498605335 0.49564072987824464578 0.43740351265032484385;0.081900176483288428253 -0.10295752789032283636 -1.1040839454979063383 1.2548900174748269798 -0.26828252546721631511 -0.64199522247913165529 -0.57471041757687180151 -0.32822273320623424064 -0.29496243595210963617;1.4926130803168036199 -0.011226694925344161274 -0.5538496382726333378 -0.17065920317864363698 0.54877011902940520116 0.44825593969188842758 0.74168604175214292162 0.066731548447772279231 0.42233046236322491218;0.75390122436116535631 -0.54154572537659162457 0.83964630196384215655 -0.39875520352861376638 -0.91655380008550246806 -0.74774483825476789622 -0.87914722402201206375 -0.040747409423193034494 -0.15139878679383383941;-0.70574798450383624537 -0.44003828499120073436 0.81448526548751731813 0.55551276607233945892 0.95396683747222821292 1.1819519603829899967 -0.24991782660304034946 0.052525133717571476089 0.31447665293093157723;1.3680760845496975353 0.36418406683349036079 0.47066838457305504306 0.6841913047838477091 -0.62978370595082566741 -0.98477356193891896208 -0.41187884847904443486 0.66340787341909013275 -0.42990963444807039906;-0.73757814144303712744 -0.4571235982860860636 0.18603039759992545665 1.0295141958883231581 0.60109889741492650295 -0.68893577276251649621 -0.90969728008277717102 -0.6063739369930223333 0.63573772294537289618;-0.41773703055707861465 0.18214853309151562977 0.28120074970853098373 0.099724865158313025226 -0.41834287270231002021 0.17757199796860154151 1.2147865739626841908 -0.61556884620267215968 -0.86009380371257726505;-0.084788225347262685672 0.30789119345996146526 0.95955629311964907302 -1.0003749593504362991 0.5351604564206444703 -0.66164569218192281763 0.16261121094603470105 0.10123077678635816756 -0.6634417828892998914;0.39851831145166821679 -0.50067671690374560001 -0.51539230508319766599 -1.0827271622978325016 0.70296656941112178885 -0.25362618378598345004 -0.45444547406330931816 -0.29035532217090148643 -1.0147842371874391532;-0.42492163410442052029 -0.59435074457112146984 -0.42730836422720402945 0.059457101706170502331 -0.017056113491910065982 -0.88258894607790616682 -0.80192776825667788643 0.74284772410859500891 0.79306006158907893511;-0.064562444080757050435 -0.53866781435289678992 0.03765077719176913168 0.42485727011495050265 -0.15966729631711945592 -1.0623383443654972336 1.1809913963106903889 0.31777927048914084152 0.59939755590777776817;-1.0778806907433482465 0.3641178550848556128 -0.27125401736755949678 -0.59306415492735542472 0.10529220575960285267 -1.0526663950524404179 -0.32738319489120881745 0.36650946214055207806 0.71476211074315532112;0.33925973194744268868 -0.3591314273392094969 0.26751124759488181803 -0.86683052003076299652 1.2161921317857029567 0.26688891466383851681 0.27039513652427410451 -0.83872173242999437104 -0.60041339344771071929;-0.21596974173303090661 0.6671261982208314123 -0.78641105003190170386 -0.74511988950072938209 -0.65154401586439414373 0.49176058725875632094 -0.82818537288846916233 0.14702016779204357677 0.91245882295631164371];

% Layer 2
b2 = [-1.6521888597761849038;1.2531473134471962094;-0.92042467471054956185;0.50790129990413479533;0.30666080577375293137;0.027453417944566810976;0.41317952784464151428;0.87454810957926154558;-1.1562754437062197077;1.4993395754490626004];
LW2_1 = [0.32585625227673092885 -0.46790744426728780869 0.52833556489781641208 0.16862087188701394003 -0.33805636729983151723 0.35931319254880406122 -0.12649888864068586924 0.31288757202587175188 -0.35265907954866004825 -0.59510452095443189258 0.63073086430288394233 0.010393211956009541785 -0.16562425729797464191 -0.056196741156316051824 -0.32392493602235372663 -0.46825698150540573383 0.20643922429398847695 -0.12663845516644475775 -0.17057569142058376377 0.33817421150976151312;-0.1961812173973244422 -0.55992653084303689592 -0.0044738320324499061126 -0.65362878673039437327 0.58245708746213176177 0.6815989765446852644 0.40600750949191227734 0.32743652906246439871 -0.057938009657893412008 -0.19170974895845169228 0.057093470128832861377 -0.31430081231881867865 0.3863916678883147493 -0.014613143656956369826 0.0054583183700924933074 -0.55463840304020117777 -0.069276310296640317143 0.033450162331437709173 0.016033351489827436798 -0.19086516099672962143;0.35003652648379268708 -0.10924123633813942469 0.32211356054697942719 0.097994034643496610859 -0.26767883953948329312 -0.74410138514867463222 0.18502111083108591094 0.21278508111395874614 -0.38329666147382257524 0.29455304265799470143 0.76268743642062286625 0.32497798058282478806 -0.36312656444233798458 0.074720693348879985152 -0.35147999065479040848 0.28605745191317460963 -0.39855121175867957994 -0.44676956861739158811 0.23074917637095629375 0.40541806416965359139;-0.36872729829684336433 -0.052956012496049663374 0.10749561776437131788 -0.34521968688373988465 0.023292269972007395573 0.33836593353089733371 0.17177667524283421474 0.47395177671193894353 -0.46950640126031334409 -0.58050739207255563912 -0.19353353808430384664 0.64740939356595483822 -0.023185356328351044986 -0.34874977445037280699 -0.23272022599618533145 0.17240700214597631801 0.25736296365246130735 0.28533424634861326297 -0.37765665911706819413 -0.49508649514857455687;-0.14044139851918541195 -0.094223124717604744838 0.47543546093454330803 0.54497145273131786247 -0.56716029954557656279 0.47211113693414730186 0.10415042929977023911 -0.2764265512659505597 -0.3295800759292587534 -0.22885274242958161817 -0.78723376557773794282 -0.61596108785384595663 -0.38296911783407627805 -0.1680943418289412572 -0.31573873666436641505 -0.16600758913192956157 -0.17404493669345946771 -0.26326232172394514741 0.28262238919463417153 -0.2203898884990152518;0.34696301963949810476 0.39576591069162458947 -0.47624338090092716014 -0.22410027920376490718 -0.51568290399268756907 0.54218738102701757864 -0.050285460028747591688 -0.49504906894017752794 -0.33963238060393641238 0.42895422630488266869 -0.10833070795149575549 0.17151646939776621359 -0.33009808546136332197 -0.075866889648707191984 0.23366750139762271221 0.12497148866697410652 0.14732812374544362877 -0.48465226187308807493 -0.73882452043450830281 0.51840195708703662447;0.29614438129805625843 0.44033240286645086714 0.10505489974256067287 0.072757834674620769366 -0.041074894727108096637 0.25285818316306007958 0.55426981495737959182 -0.78583396092946511402 0.067851146228851577646 0.45885366673183669572 -0.43568437645767371658 0.17815351830689668544 0.44327056998597497151 0.019533668191532179564 -0.44364673377911295615 0.095222768588470702023 -0.56695112675838188476 0.29894346589078213405 -0.42397648952504529696 -0.26661006859682379044;0.07336241391581978244 -0.54657786043277367671 -0.12144707985566900732 -0.32509129674045517122 0.31100714872656248788 -0.57843196410088260073 -0.2853527842800173131 -0.11677687474610465301 0.36938404166540855789 0.12767543126832592293 -0.060428240380204001347 -0.36103752936597854895 -0.34385928804425358596 0.17759785562482655052 0.66699943757037172265 -0.40301487580286371459 -0.40090116100139017163 -0.09733327690354781625 0.62747076112697997008 0.098308560089925986492;-0.19642607188250524319 -0.062981433541466028125 -0.59933819149639522283 0.4400397987148194634 0.53706594441854127453 -0.56795341459949699736 0.093539163618321874427 -0.017898881741176014826 0.29723829440219307063 0.2317602323938663389 0.52978100334675681804 0.14398779708717049375 0.089408605533672955157 0.52199787807344188995 -0.069898413652486127146 -0.57567258397726661645 0.51701881007537331403 0.11428885341026107092 -0.18054843434224510101 -0.19074038718665251024;0.53093312358324318279 -0.22485939658622092208 -0.41914800219960635097 -0.54485658964852246022 0.46089620801537178885 -0.056587406409132207097 -0.34643321508492380678 -0.45278960574186527532 -0.12720506871175518704 0.20277379866538372544 0.3496573153231553599 -0.12769529859257799931 0.31873311389922587278 -0.12748899783789996443 -0.39184403073036327969 0.19692515206125726923 -0.029619100476884166473 0.57422825624109563591 -0.67295282218502039395 -0.51796672479570693426];

% Layer 3
b3 = [-1.8050978066824456825;-1.7024969380057315416;1.5190595783929901064;-1.3447516417067739702;1.0962768946426975081;0.86519004157096435215;0.64883371661799538188;-0.55134885260791977046;0.29533301718450949425;0.097766684475128373677;0.1055727062326827087;-0.29767793270610842793;-0.43087505303159451264;0.85263192638714457861;0.8919598559788345371;-1.1045019672843163772;1.3477193185756528582;-1.5206996836470956236;1.7223158247742655913;1.8565514413522632431];
LW3_2 = [0.78736455402977689744 0.54166036919928717275 -0.063854352239204326125 -1.2266774750469580102 -0.88166554183921896914 -0.35421832457481677858 -0.40885463155448120709 0.64550463410022373978 -0.053878037941054321425 0.34324370715865304415;0.80614294790054452644 0.33289148039141497337 0.55867996633224858982 -0.0064589246527085551752 -0.75179434474035677916 -0.41941345603794871755 -0.84530558024561108788 0.78782620845227158135 -0.1283963891796634782 -0.54479489218737986445;-0.8705426215070632967 -0.53073478826264652852 0.1514355554137126747 -0.75554373468475699571 0.18951186770594877218 -1.1499475550435493965 0.31752261871566384022 0.58202221975042811586 0.35665153344408184743 0.14088489219677574615;0.45429631474691994919 0.51805062166924531475 0.16655218527073342716 0.083240990471838346987 0.85903011088672520668 1.0756263703868889081 0.02043454365040247786 0.72527553568677360918 0.47862462049208948089 -0.7549322486715981384;-0.54446829763951065662 0.62561380040737846198 0.93567565798886753736 0.069654790582537318144 0.26499231891048430354 -0.40106898249006228685 0.50496120054537674271 0.011756538718118964004 -0.69036413390322626249 -0.98815385544210709856;-0.53192211540449552132 0.70056818732958803242 0.53825240566956455979 0.575160545611764773 -0.66414998976429517885 -0.20704574151405669147 0.35498623118213312733 0.12638968353283006052 0.93174927202634927337 -0.73693154267747518205;-0.19262517702087428306 0.0041535195096246181612 0.75110401441933127842 -0.5145111883262182273 -0.52385487948415154769 -0.96274481622191887542 -0.54350633074975795989 -0.20892455924108252474 0.73949748047551111529 0.82777103876986213304;0.87467812758458296507 -0.30331221806670011221 -0.71124394290208503566 -0.28366811095439975476 0.022936556070959308179 0.84703805208457572107 0.27729052901269735099 -0.7258443351137974231 -0.090791760233196516783 0.65406898905057375693;-1.0371972825476325486 -0.57806688804864836406 0.88477745448016709151 -0.082316276424009640622 0.85099572395310374429 0.29766166181212561082 -0.66312617133931961444 -0.039072019999371356003 0.034494548702598486212 -0.29986652275666803025;-0.43286247596029209239 -0.39343671509596078728 -0.85836902269933301746 -0.18172781749587288425 0.83895338300263622155 0.24699806418382289075 0.17378628885900895829 0.75371323930863687313 -0.70975849473090479869 0.77072282653252577322;0.78291371602074322222 -0.057501560042278375418 -0.23520271713387561063 -0.54201077765773841843 -0.84947488483056554642 -0.41579258831937254692 0.68844029894941516368 0.75952169983509620899 -0.7354637713991921677 0.44806905586171458244;-0.96669869242116424068 0.0026222017459906713649 -0.36638423236924233528 -0.10272145357430659263 0.31803508486921305831 -0.82002863737398812294 -0.70381540856854563071 -0.89042130375697448041 0.56708408204366556049 -0.48506746563853764265;-0.78607887203341353377 -0.46845757552285977043 -0.93815202777717376925 0.25214216728672061985 -0.0076926314951511797283 -0.061003085672344824208 -0.14383982870261147191 0.84784221870038056768 -1.0992567235344030685 -0.038794767728510627658;0.068352479349658296082 -0.87621987532528100573 -0.019618349084623884493 -0.47012133326218275009 0.098051304934741914665 -0.90400553858154453213 -0.82602328012339254482 0.53403007239590372102 0.50560900842170197755 -0.41668315987192161565;0.28870045854483816772 -0.67341388509889688052 0.10917489722360612658 -0.65842750293258589522 -0.021440619988210011387 -0.8449925334540867583 -0.21252111614147284335 0.45080911951214386324 0.81375627384248849783 0.64351348332383662143;-0.99284332171276001855 -0.75198533598034056347 -0.24107497517917095275 -0.25870370554192262391 -0.50374378925422858 0.81209870388005389596 0.25558888486399489182 -0.93489840647181010613 0.15561425664901740173 0.07857345050231322181;0.71996669216766018273 0.90317485528381891147 -0.14270390393562940035 0.11995424896165786388 -0.27006264523356832141 0.79836697786634081009 0.74161048037310928205 -0.53260708786585375663 -0.3492762175365666244 0.67215710164294162343;-0.44131427511159398991 -0.46940215195087708899 1.2080830804648357013 -0.54400527842933321665 0.71226426462894731895 -0.62714360351474618405 -0.54452112806538899292 0.027687241789703428974 0.15339200904045457996 0.028958814213038579222;0.5289783787381568958 -0.9293439106743781597 0.17277260821502321564 -0.72510360836941700757 0.1882406605873126193 -0.78959410843885302622 -0.33622614353901864037 -0.51518153558620505272 0.6846733195518834858 -0.38577928327977889511;0.45876189420788493489 -0.20606168125225446386 0.84399373853452241967 -0.37874250980224161145 -0.5121348324590763168 1.0213043129646486307 -0.10586046934762956273 -0.66867069278252266873 -0.0058883081200480514444 -0.89181638340126478948];

% Layer 4
b4 = [-0.59276255918509801468;-0.50810895189654492476];
LW4_3 = [0.29772526770371743332 0.55766777044900184279 -0.59366445595671857305 -0.50417957101704768963 0.73831219729555230824 -0.92201724769369708401 -0.61535830340125075022 -0.74133357917000064496 -0.78123186425469914873 -0.13338259435641688921 -0.39721017114294948636 -0.70901679577622045425 0.38246710899732044853 0.20513098775318169831 0.55470816597409633442 -0.66659792496704084463 0.073715118011943470133 -0.10736250288026147337 -0.079512628366913307154 0.72373848809276830618;0.74405353693073161825 -0.0724155755165715731 -0.15434237258489810762 1.0473578381164476703 0.79716596372627035461 0.3960357607830656268 0.86482814202873536935 -0.49391074351052166591 -0.19535796937187269173 -0.30534248490694543277 0.40113719724896867991 -0.97963144839756755022 0.48641900180150937638 0.77011402896120229045 -0.69488612597494281431 -0.50118704167808936223 0.53150492645245128731 0.63414259443921883186 -0.51241899994939321683 0.057804969012901497027];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.01999917112726;1.00000000023283];
y1_step1.xoffset = [-0.999999999989399;-0.999999999534339];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
