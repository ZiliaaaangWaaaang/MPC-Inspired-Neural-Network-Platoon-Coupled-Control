function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 14:00:26.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.633306630348252;-0.982896160954866;-0.699081742901304;-0.73475800024408;-0.89256839179926;-1;-0.892724980571282];
x1_step2.gain = [1.00248977576361;1;1.38502313257801;1.05761395169577;1.44511207327924;1.45714238611703;1.11839472631256;1.03285757081092;1.07977968522844];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1943359909837982791;-1.7606339219859241663;1.5103295836374861505;-1.4991912133606515312;-0.76987287851497676616;0.74726452434386947399;0.88583880129270986536;0.16068599881896994397;-0.55764738522147483391;0.303830852501637938;-0.24102840740750153259;0.4023682102035136543;-0.47141161723354424451;0.64627220959859754679;-0.80853309549857932392;-1.2712432745161206249;-1.6508718866024014726;-1.4812554096630650147;1.7424879243870337042;-2.1273375724065113346];
IW1_1 = [-0.20357164297461941005 0.28160792835370501708 -0.79873113811111262628 -0.66418728082545441804 0.17700084648945460519 0.79562678187883240088 0.65420490039352563461 0.86715147686984561659 0.0900569538281416615;0.76421359743818961796 0.73089205106462196149 -0.15425111030978583271 -0.15090050823907169564 -1.0591663175534598018 0.23743048688628431986 -0.525488772299404161 -0.97081035280289629252 0.9622486001550846213;-0.18020749336095429061 -1.1278546183751303467 -0.20798286813691085895 0.28180810187042865111 -0.63102483846771328935 0.80151177269956408455 0.91606659998712591797 0.80692119373807624783 -0.31031516296808997479;0.90217711632373009945 0.47182073870266505455 -1.2980570923492502633 -0.83767511330053279206 0.75436620788134489679 0.24895963232975576451 -0.32404071069072609701 -0.21036212464263598365 -0.26032898776690943654;0.87377998106114096455 1.0293919680256522486 -0.82052483605875725647 0.68609738839618250594 -0.16097643878039691323 0.13813011836989783077 -0.89875557115580717582 0.52153612986670627727 -0.25885348129582602672;-1.2939150483202075392 0.027022912973516347024 -0.22063821560623586571 0.83007850937518323775 -1.1081371219868978439 0.0052632726853171704628 0.3056673760227374137 0.58046154326574972426 -0.71863020308847014306;-0.52460458005570287376 -0.95361082490254678312 0.19332800027468041715 0.95596171892302250761 0.034115158360566055773 0.70585141600937539863 0.64578621827384385945 -0.31445553795388614393 0.73966864208897153965;-0.81902358896266858057 0.1666684459261632556 -0.010785696457095921008 0.3283644214762210245 1.3441006133510575715 -0.0060291408109386379621 -0.51810808452080048259 -0.79226137966566934079 -0.54109651752086695975;1.3019709249168700538 -0.59744626933378730538 -0.91580290111326900782 0.15770073873280721077 0.47623650117056176567 -0.47224893585868493728 -0.057248813438697927769 0.82383251240898824896 -0.60297983550558520438;-0.78202033418115668439 -0.38124718311815419813 -0.94790847626425478456 -0.014990312100067376688 -0.12943005055708817208 0.3620213737671592602 -1.1841076559232592835 0.45720865863785309369 -0.5123784636612972454;0.23321816892070579286 0.65286812095409874068 0.20580436902840179569 0.5435325159160705466 -0.69623423021730856952 0.90334715072074411868 0.14496383513384156205 -0.78239963858216499126 -0.94917752481523498531;0.18935392785155408246 0.4556238882964684378 -0.96898295491744168562 -0.5021886243677624595 0.61524453851198335208 -0.70813574629240239044 0.7011440114581696248 -0.22422811814609633352 0.43684341643042584602;-0.70307405114382071076 0.22444066584247729379 0.18342842879671672485 -1.1167822871724466527 -0.82750652415783931826 0.17066196259853794182 -0.085968359526312904118 0.65624094700482915599 -0.70905444347354817936;0.4316306545743580636 -1.1255004228588392223 -1.0159070251044386435 0.28955180112725520392 0.4853257479859536816 0.15482076876235428831 0.29008959500253506114 0.72489542058658318346 0.48306767729835464742;-0.33031196961174635884 1.1237883130336088211 0.12308839807680208023 0.32162491561276729257 -0.42786521739127003627 -0.17298103476903961551 0.23734456324128921922 0.70149525213271879398 -0.45426865680982858597;-0.78551700817907388341 0.0044088999996352504218 0.098705059176415518851 0.82776428546630098637 0.46139370389838879616 0.25890542414404138505 -0.69202020368732308775 -0.90112544405388994573 -0.67023571423483863096;-0.60184023359804605935 0.33678457603600392423 -0.38943302758835157684 0.47003203359530015826 0.96985757925357629627 -0.53459079904926232185 -0.80127601173249152211 0.62973910411841571566 -0.57944819771668876207;-0.0088386320830335460969 -0.30788714463986782688 1.0207590527785455059 -0.71263609259191196266 1.1161582289233489274 -0.085503673593473550341 -0.98597896314592703426 -0.20285214603254381194 0.22978726208459160363;0.14837298508808660635 -0.16311978677361888002 -0.11811030921274523475 1.0100017663423235259 -0.73117467448135575747 -0.051075461611611958079 0.67678027952021158065 -0.87597317112207429002 0.74855856602853121373;-0.0076942312354043342071 -0.51189482116274298562 -0.23304801936750729752 -1.0236808539916657512 0.15738119999571925645 -0.25805802952902151537 0.77394946164288858093 0.96190108597662904444 -0.7721444856937846879];

% Layer 2
b2 = [-1.704072550706634992;1.2664759309055877434;0.82339107076974349386;0.47048014353610612126;0.1734199515082673615;0.14857919706317920805;-0.64942724771913273862;-1.0190930652824439218;1.2600259229784713799;-1.7915839348264184228];
LW2_1 = [0.58279237268416750339 -0.36514100900541274219 -0.28400036720660543077 -0.53732062903542099352 0.17622294700974466819 0.56139264170356539818 0.20119521590641917252 -0.53964647606569982052 0.54322912437759673931 0.019111642702618416439 -0.056892986659224792367 -0.29063710545648191452 0.029240532757018537768 -0.14490940210942074295 0.540473992459854502 0.25337422854567809294 0.12710923386088701648 0.31133840528524725499 -0.28530778825989427938 0.41354028853180196945;-0.46450305516803214179 -0.16913613404062641243 0.43882701385162253827 -0.28375297935597343368 0.13280906411696635772 -0.46948904200462032721 0.36508451446552492303 0.50048855694700622454 0.36072800186354009311 0.034570930016189729828 -0.05675305106798267385 0.42435563223678651745 0.45864717057140985679 -0.16168914699207162511 -0.17822152611355010499 -0.25114493718352731699 -0.44519556114783997991 -0.52089307058983247423 -0.18826987637003733678 -0.51326708112687402519;-0.12856072535884935371 0.064764545079579058373 0.57395993442543202789 0.33808734877271634511 0.28802694670709616531 -0.58763816609883157138 0.30015973943407453506 -0.1959147582737497395 0.93531558076948007052 -0.10341038029477370164 0.36076215286157969908 0.310941242319071387 -0.36643318999554425064 0.11401496836750590891 -0.18427818296547759935 -0.37738438205497287781 0.16910506240813411027 0.52830350973910578105 -0.011459103708146577832 -0.11204180234188355902;-0.47328773687000558201 0.37579560868347111624 -0.14774340701571508916 0.28338001100684040434 -0.064813755087818947231 -0.69787734467968343122 0.019809978785980439375 -0.022530267130004964782 -0.059146606068750731677 0.611473154108860939 -0.54331330678594824679 -0.032948548366687473166 0.010878160584554062706 0.055576579493260308551 0.41954452542055209463 -0.10947118643632428037 -0.33804635160149959505 -0.18914679736459100168 0.63138633039443503581 -0.3022998957084852556;-0.28211027787043635451 -0.38898284020817186502 0.25226460282952550829 0.61597315639724803393 -0.086196502168236308061 -0.34131049466456875319 -0.39925078238408928666 0.018699651210519457195 0.4534607394939152436 -0.27125191072127474712 -0.16509023285828458572 -0.39496969200631121266 -0.9640388210270992575 -0.14775799229429667503 -0.041559362373615821307 0.18799195496543757988 0.026569299311412681447 -0.32677569898154856798 0.18836938842892772539 -0.21006447909937409069;0.38350318508361130876 -0.028386762787567021427 0.22670989775351599316 -0.48606629585542643346 0.3004484154712649957 -0.13072016624600940604 -0.16105212218234815635 0.26621942126276915142 -0.21417681506602070929 0.25762599377179179472 -0.35689745592890215198 -0.92901497255662890407 0.015285686326398120055 -0.41495362530535040424 -0.11076510915328258156 -0.05002934565761901764 -0.37156161869655418561 0.44580196293190754719 0.11510862225653761826 -0.41035506611965877344;0.010266778840304078765 0.75358706871779235215 -0.15596265516652035865 0.3010144765974088199 0.24095552899300809457 -0.37397055988940164362 -0.012851439280890414318 0.83899818179808816065 -0.37695588860244683138 0.073041089922275787005 0.12623614461314902613 0.014587507314177558526 0.087082607079154092378 0.18335162697682363953 0.20491108802872320949 0.33383475606898466159 0.56947552555216607306 0.10898414470926982844 0.45371652579834442776 0.51988923400411979348;-0.064838003245616018799 0.38566750371131031105 -0.59189604861992750617 0.60729615309031537151 -0.05872440267395676039 -0.74621142469381540607 0.38488194035522516057 0.21261503770965781146 -0.3754657694986005545 0.13825794404224081569 -0.37092790067559733291 0.3140793026022252743 0.39784742289657593073 0.27435165713956755074 -0.10670028271978150569 -0.3026726094213370577 0.39570778448405957706 0.51898862000537748784 0.12163286846102031036 0.5857876456970267931;0.18814161034331161604 0.40650151597843170448 -0.090181480265204755353 -0.55807338485121416038 -0.1499371628128177425 -0.40613804536828801428 0.13971890532248745775 -0.49985274107558358425 0.21547707119870918024 -0.2817022906804356186 -0.30947029332528541712 -0.35034846750985737529 -0.44873273754673947966 0.37209453087181948439 0.3774299878338301939 -0.30532736676513688723 -0.55534888072427024408 -0.56742816090115877348 -0.026660603793293397717 -0.46558899595335057064;-0.23304844330124716012 -0.22326742519164033407 -0.21604608166533417757 0.71550287002677293025 0.097408712887946502512 0.83642818830088638826 0.44281808046091586384 -0.37247680756111006817 0.35242221088923458838 0.59543863024299925613 0.49924129080340279296 -0.35428184800249645781 -0.054438325114957969442 0.34675628613293263403 -0.029384827356479535643 0.35607837697658339948 -0.2650848417479185759 -0.3203416392770888077 0.42683643989137709518 0.57720927531692234336];

% Layer 3
b3 = [-1.9337851961915948351;-1.6756023926028618121;1.5328526268571869284;1.2991370521505936075;1.1055966584688519116;0.88837001114457414541;-0.75186862370733287264;-0.44245739334787154151;0.35039384093093617345;0.094292787134244576697;0.10228069731304399725;-0.31421642478860495329;0.42442859301001878425;0.67850561927069563684;0.99972046039551631935;-1.026171436840331852;1.2366240949128399773;-1.6031973436034858693;-1.613255184294163147;1.9568832818207586577];
LW3_2 = [0.79741705977832888497 0.63778071288114945858 0.38083914005004021464 0.15856217118252852183 0.49716463357652040944 0.70288051861612732552 -0.21141057343215372 0.52282748751926910735 -0.80341520857853010451 0.66519971531331634207;0.70556389111674411296 -0.98831295648900230333 1.1292592388217093102 0.40989563806075374197 0.50723319749055895134 -0.30074396814266152189 -0.55825214273376155827 0.094275124862108344859 0.84526727782532096178 0.063396874382126905401;-0.562352219349066762 0.93669101570907820076 0.64751407534516813858 0.55028600082141609917 -0.20906890513674644683 -0.61210644155387960996 0.72421012117438432476 0.078759907809242343801 -0.077877350473738740644 -0.81051358767960646201;-0.51237220290156249014 0.14229283921453880768 -0.28147294195616118229 -0.95905088883066391681 0.90521316676659258071 0.60437363091295415174 -0.59279462391814052857 -0.83589921217184481872 0.25593375111512944864 -0.016519631119737296365;-0.19935334681609989671 -0.13605081629758569717 0.017183477408925548757 0.89833833718887612374 -0.70287711582307332847 0.75587782019688876112 -0.82437213723451963077 0.5012348884085485734 0.50357574687262951496 -0.67225419017127863164;0.012284938519738684837 0.5056492516190095321 -0.022262433583944082199 -1.0855335888428534474 -0.34668163382526540062 0.01648376880081942053 0.78406096065520702876 -0.94815107326600567283 0.742543177825903844 0.49634677950378058853;1.059502086362141382 0.29257220894626229102 0.48817563932452567865 0.79669727747607521628 0.37048701753410290261 0.34868204501857652522 0.39069842317578096225 0.50811876075485373772 -0.28653432068638823305 -0.8548997266340214729;0.79429636221860211442 0.043932593739687442191 0.25894967986486938649 0.98705144619633733427 0.56954089387001005651 1.0981656674050888078 -0.37241115864939244862 -0.44995685893646231168 -0.33545228670836169105 0.31050061648136823012;-0.54708884536742341531 0.68314686971028604212 -0.014425803702253686689 -0.63296138765567444562 0.75434906563191517215 0.14935391658038932317 -0.53863131032967781486 0.62312888703438240601 -0.6053026221021283737 1.1120113276719933992;-0.9487367430908575372 -0.12521602865365280555 0.91692972893006841062 0.91363434857352676666 -0.11180913980514337047 0.28147735428117215406 -0.17627813271315798116 0.77314163979747363431 0.42426128066449719789 0.049299051164461440977;0.7855569152037280567 -1.0166574437326194591 0.41274899056265434982 -0.17046773334088377583 -0.28575931677529442521 0.89348003451440272116 0.4079037342500941854 0.37455180732742893168 -0.5734933429534909699 -0.42692559332606644373;-0.66189347904142137313 -0.89532867594099918573 0.25450417698522864729 0.07221164680457785312 0.61716129010606035621 1.09378192768552851 -0.12599755972739978827 0.098736927598708973397 -0.32832755214060893589 -0.1172398125060466062;0.31493842918544318055 1.0211800584674080028 0.40245794906848875172 -0.28032108089970519949 -0.18143669477946927637 0.54408160541564887236 0.053668705869199584413 0.5879746521390197822 -0.88456040848362271767 0.70355581226467889255;0.73434198123442673278 -0.15023188656809755015 -0.77321156920680522706 -0.62452211510504473946 0.72695154516002458145 0.58811604385317461929 -0.53947391661787524875 -0.80834649014755477481 -0.41794455118469547861 0.028975572480257061336;0.42225400729021300705 -0.69129729861436595151 1.0718633397835826138 0.39966521077392147543 0.693996591319674061 -0.085444975841678982853 0.30623276055444786925 -0.61765161048369354724 0.34047879628048777212 -0.17999233155997942935;-0.37973488013562262111 0.75996988301191548132 -0.79555445665383217602 -0.47555041785090129691 -0.10762851771474442331 -0.59326514740243230239 -0.83830928279743666121 0.66114372724832870531 0.46309525425049125058 0.0086091745960737361965;0.68313067493285717369 -0.040434206382446734318 -0.87349833189015280155 -0.91588323719505271292 0.99414558298706767747 0.062580412749548591789 0.77328359463118467865 0.30103493713566542578 0.67887801213168375014 0.56214756055971104587;-0.53838019494187816516 -0.076626848887452150838 -0.70976762037473473121 0.56575321128566546935 0.57909563930618257466 0.037474246359710028376 0.56045393837457624375 -0.0012106736448936430452 -1.184875250059360674 -0.15810633948232433177;-0.20812542041793050118 0.88464595534908596619 -0.72018708431783540203 -0.24819480228284152012 0.39667393021436503364 1.0616130593747725719 -0.46467967033839219226 -0.55382343684030077569 -0.46310549621366853268 0.77810321716836183814;0.40462377664636944852 0.48688170390118751252 -0.95222781469473094518 0.91307578812992484796 0.629766925258974819 0.41754037178685532439 0.30686279900953550293 0.65772312891907913635 0.20893491690071372413 0.2006297934961921714];

% Layer 4
b4 = [-0.2657524488076778435;0.74699869072866231789];
LW4_3 = [0.72865887860433620205 -1.0227705410203271619 -0.42621365616817419308 0.29195467698793947653 0.19749386780348404669 -0.63708548547189969291 -0.32732898866136161953 0.29349286242839117689 -0.32623836735383887619 -0.42283912173769033771 0.094267771229036040337 -0.57177299860040364798 0.044778430863569057552 -0.2280005700412217895 0.83300830602386910506 0.6119910759620778018 -0.88002768102893413893 0.89751207427119183979 0.76468828100967523032 0.71738864964625470577;-0.083049941796020834706 -0.62096178607507857006 0.48696286774934666175 -0.43957020032371074691 0.37051876259455607254 0.71170932691782007318 0.73946415553658950692 -0.67266394298718235056 -0.96815014416346889536 0.75780017517503639457 -0.19234974937063056832 0.76610507197891042352 0.89662772435852722275 0.14285654720428950237 -0.1513309270641398363 -0.76890887770981863891 0.76016486247368197926 0.91325054636172631195 0.035654364538143773489 -0.35010479021554630208];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.01999917112726;1.00000000023283];
y1_step1.xoffset = [-0.999999999989399;-0.999999999534339];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
