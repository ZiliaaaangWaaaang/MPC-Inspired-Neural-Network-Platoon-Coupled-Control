function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 14:00:30.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.750956411335636;-1;-1;-0.864616013726533;-1;-1;-1];
x1_step2.gain = [1;1;1.14223288886694;1.04813396838925;1.18701832004569;1.18203243532656;1.00712929936406;1.01675928713546;1.02066608080763];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9126358049317839782;-1.801229456535446749;-1.8040516689290109209;1.4247317453863044268;-1.3378115785841990792;0.65775196100644428565;-0.76866054717177789701;0.43252326032293086921;-0.35577593700675613775;-0.1560901502674041097;0.1936273094739638656;-0.17907577334206978281;0.55315376473623012465;0.82855561177434655651;-0.90168584006791474561;1.3386628334999188805;1.3437543058363781157;1.8867298720294312098;1.6501881698960751965;1.9270555698456113269];
IW1_1 = [-1.0954191303966540616 0.88349684757672797275 0.35972096268834580224 0.36410151619997904726 -0.43776167322624170986 -1.0351608466392150376 0.031131750911823938971 -0.11573460008215098738 0.47268707207821014649;0.71089792994944234206 -0.97272527318368395832 0.14719817494405701419 0.33370715505205683638 -0.15657844580582441774 -0.16410676123954523464 0.91719649609615849783 -1.1698818260590186924 -0.50912004858867165868;0.68048544700216195835 -0.96940705935480497857 -0.031466052232060823246 0.0052624127817583778166 0.1567714807605706806 1.1045265654145146605 0.78782526836626542988 -0.12863946515001914439 0.41615233082869851344;-0.88128104240025639804 -0.38963343670294398047 -0.2746500487897738374 0.73052726883003515912 -0.53948663213252978643 -0.26289859805341736498 0.87349358133645582658 -0.95017261573792610729 0.60566157846496726513;0.97633351877891982884 -0.11863007242607762071 0.34710752557609980684 0.56298225775893995237 -0.38308196947327644022 -0.79642250472895892432 -0.47872454119948165685 -0.8398942862390766928 0.52111414521166843361;-0.57517147872684359911 0.25402092606158571675 -0.80393923955996693387 0.60518908097130330592 0.99887076104109751018 0.92143922808955225356 0.46136505294088431262 0.75037189340447485453 0.40292063071088829451;1.0844716194059638159 -0.74237004455022337357 0.2206625782201734054 -0.98376163580064213132 -0.53003794320672581453 0.74060750737308389535 0.22338121136083419205 -0.2515537471334140518 0.1017821086346290399;-1.5451175370763092776 0.21273373690076857745 0.5046803944966518074 0.67660424952462805415 -0.14431140959245997157 0.14709748608902581402 -0.79974683042859451287 -0.72088635063875949882 0.099627082238724934404;1.2581642686026439648 0.59665442624563680418 0.44033311036259087379 0.40952304822215712665 -0.79376617296807194801 -0.44458250858922632176 -0.25258826347192803174 0.41330549779147268685 -0.75778939142707946175;0.87345579464418088289 -1.0034333318665649148 -0.57193435679817195005 0.27087457291460226294 0.67010826581174387506 0.4016678136147120437 0.22472679751399185499 -0.85016096335447688404 -0.6350479283883252446;-1.5268566627259119173 0.53446361584563040203 -0.11759629130660977092 0.48445269799264950583 -0.15616297041986851313 -0.32485014512086318739 0.3893564031853332108 0.98256947004491124176 0.0012081667395637454149;-1.1924802911266769723 0.54954351494967657032 -0.98764286244142662774 -0.7216880245518252357 -1.2490949691543644651 -0.039693309014909979038 0.27101593469213997034 0.078481254080852602684 -0.1401511838047471703;0.51264400625245409859 0.80070314975162426574 -0.90374267235888172678 0.61913186348538762349 0.54814903389844260584 -1.3553448030642771815 -0.81402172306115294642 0.75585268214825074296 0.040290684501974996512;0.52145852732442521393 0.67606851736100415096 -0.53491764311065836957 0.8406572036609870624 -0.13731090226185801995 0.69542618519845322833 1.0726337874835767394 -0.78147507162767249067 0.25918293684292487145;-0.0012732094548908471851 0.45095297103766368574 -0.36527588155107915124 0.029251778862875461168 -1.3270868736722776227 0.04581204689336187269 0.41048456552594514424 1.065036400894416424 -0.29929782044579061884;0.76135360370477056513 -0.57753301538784995728 -0.028482344969583645727 0.87767071797844042891 0.17941493034268848894 0.25066934882503055793 -0.30972376842121202012 0.79576372486357660474 -0.74312655433500374169;1.5220209878758064193 -0.66909062983377898259 0.13226398537087041829 -0.36107534367891941374 0.0026895486063846338505 0.42239917530392118161 -0.66529818763932280223 -0.51745860744321692248 0.59972543404991685012;0.25112355561181198826 0.5195648128722263337 0.78147736907771025994 0.89573888828293057873 -0.22395205407287055444 -0.16642543980877647081 0.73507132318825518791 0.77071223719540815633 -0.12218012873481863545;0.093163974323857895454 -0.38516384896300692731 -1.2732567365730695919 0.35279422865606191451 -0.11145044124371621119 0.83790723480960105363 -0.85122927626075683971 0.99831332869889410908 0.16886153422969799043;0.035263698385216465936 -0.22007617511290014645 1.1842608616114720377 -0.80980094346732145461 -0.48943269637491043644 -0.49358617735085724698 1.0193591485000987884 0.62073502997024943006 -0.03170156640694499206];

% Layer 2
b2 = [-1.5189500205344199646;-1.1876487081902293852;-0.91697848906445589279;-0.54316574376861070927;0.064569902610777912821;0.14756443412298500539;0.5361676965251614968;-0.87733588802917350513;1.1711909651216514394;-1.6647945517940487825];
LW2_1 = [0.63175944405484385502 -0.071520642042484858236 -0.028809286301842457201 -0.075355254543070085416 -0.041309173282318784048 -0.30165055548867580892 -0.084017467564175010719 0.80019212681160323264 0.26991917804811421666 -0.19776014052731963333 0.47930430108390420507 0.24802749063255874473 -0.58925080101034077451 -0.055279499054231101551 0.43724537025809845359 -0.12050592539701171502 0.42791713437400968889 0.24523378790927347071 0.59275252547803536363 0.041787335959601060176;0.077476305791416899549 -0.28576944604885023971 0.50042184654812849054 -0.10410650738499430124 -0.3834434704611269229 -0.044233445277283497954 -0.55162410980110643255 0.055206548869436579408 -0.14131065734640813059 -0.43886024097345699424 0.48807854342534223724 -0.52864768993838917588 -0.659963012495911161 0.54003278170936841462 0.021832233840415549153 -0.0058484298584759210338 -0.52893332034598716795 0.4327927399934160535 0.23634459283426634268 -0.46595097797553269858;0.27998772722771247956 0.4324719984319121413 -0.42782380621196669512 -0.21360147639845336598 -0.090301807492337238248 -0.05137934017079004434 0.33630112229369152343 0.10748108851961600541 0.30461799221672575255 0.090532210824983028186 0.42490123388798684001 -0.54690154855453299021 -0.34850960601798075533 0.59055328987665611784 -0.47537941413230616616 -0.41600425301591992255 -0.22030612832188131711 -0.27662259180335174724 -0.61626351373186483151 0.47043056988747572467;0.45022015570633633352 0.15768576223083413668 0.56941799003530091383 0.098847353112300764821 -0.12076577583751081646 -0.2236686511986347714 -0.40166693117805640778 -0.5961574197631466232 -0.39272583091224327889 -0.21508676673060683759 0.0095324254677759678867 0.12817669479459267712 0.095127794362982132093 -0.32665200609847760971 0.48138494555651750728 -0.40641204045309686776 -0.27440743977019016464 -0.18650130343919335552 -0.15015419849878317016 -0.5535469148728808797;-0.25804837692676102501 -0.55192377465379272028 -0.39805266698658808844 -0.12808450598894108308 0.35464997605569087424 0.11329474245078746675 0.32666300802808412307 -0.73945946112354465907 0.41296574506790423298 -0.33577622756144553939 -0.23713940205332356692 -0.2730556940185489001 -0.45281796758594672347 0.29729536051806421115 -0.32467029802808117234 0.47849957649442181884 0.38516659783805523576 -0.34753287783239272812 0.45001879608409839362 -0.58931476920943215436;-0.03294558342761068348 0.69943436982888329556 0.37797786538595851136 -0.12267995964305457302 0.1916548052699368343 0.0069932707253208981762 0.23189706224690936898 -0.15543148377503362978 0.36093774428560615464 0.23948555513588828947 -0.47862941429574901164 -0.99088167867338772243 0.63292121456016914305 -0.36246326076959478613 0.26149996119915042136 0.036577979765491250297 0.54044313043928260409 -0.23522012133287664715 0.5523638556196267535 0.21590797541889442113;0.43876998439810288577 -0.74824922609250743566 -0.62230823218825759291 0.35135565457082962304 0.13285774976006206605 -0.019283585268387855999 0.07814258283623004564 0.68556479593062580324 0.47526728660484135469 -0.19633418131859486921 -0.012590800976007635037 0.18970165563925633911 -0.74267763142264686671 -0.33424925932162397046 0.15082762766546067845 0.51015237808082869453 -0.54063055999267028984 0.58070778314010718102 -0.5160380479953866617 -0.08902142409042509974;-0.73106900438671118536 0.26841415266291285269 0.61037591407416147415 -0.10021138105674361196 -0.50833695703052683701 0.47463802168335428311 0.11751135642789906077 0.054760681104753475279 0.85648221147746517179 0.38635594662992428505 -0.41723603232362421744 -0.45671783309543495522 0.00091777269547152701482 -0.36845435603684839609 0.22645163010713112439 -0.30174132445090307009 -0.071315458444019902418 -0.25219844327191920375 -0.31078668913448237454 0.21662203957223530315;0.58227031317885180606 -0.37703996262066952205 0.25574211441029154335 -0.30973832938153983418 -0.22828372160710852512 -0.63845579379188033275 -0.029311074997562483468 -0.46888060845938361876 0.141249454443841016 0.054693635879603588745 0.1899517613946091199 0.30392416548914391594 -0.54821991632967448371 0.57012006501932088742 0.5101333964827999834 -0.1105021326102404583 -0.26367847767096730394 0.032915690704958047719 -0.031432259249955005198 -0.43184155382068450946;-0.29254984720820864652 0.32720203515014822937 0.070796598134425320348 -0.30269917706832183413 -0.50742443742938181384 -0.19716387921266162464 -0.48003251183951051173 -0.48365223748282049065 0.29614812204879048529 -0.31469876599453205923 0.51788734794953084073 -0.56308513047797670303 -0.505878321863318825 0.2057918409225862888 -0.18189349353894043726 -0.34726905095013016478 -0.14391674930271811106 0.16202231241345124713 -0.30496211182255289485 0.045867992570089999305];

% Layer 3
b3 = [1.8772099831398660896;-1.6184161623634827354;1.4250029397985455315;-1.2480179967093072424;1.1484050939908232447;0.79082161544385987106;0.64440248837353364397;0.47274166765120106959;-0.3947506672401778216;0.21315895701989895361;0.022507753114823097346;-0.31917350660710724908;0.58826670319525009578;0.65785948249270354005;0.86372931304528999252;-1.1871467940836930577;1.2261967233353043838;1.4515109385078448501;1.7386230737870451701;1.7512022807939153779];
LW3_2 = [-0.07875926811751339518 -0.28785953725491147948 0.9132085231110860235 0.62175479157203217273 0.72709390511682858715 -0.55973184742809933834 0.068698954041053472697 -1.1250629327306802541 -0.16893137934832599956 -0.34731623830802094144;0.50570406843653048501 -1.0382814030396252392 -0.66174594852022028402 -0.12348151388679497187 1.0932112405673355404 -0.81958674774640183358 -0.18791576269295803825 -0.34685779382917542035 0.51504950593124465552 -0.39715634058269733142;-0.32475202867476310464 0.1902739822218054988 -1.1684019057969650124 -0.49236507503934995311 -0.77431310085833915391 0.022052745679020390596 -0.79530665266033129246 0.59263139581678692114 -0.53569592937148902134 -0.85358574138337639514;-0.052609895477761403626 0.39564066423894206359 -0.092995474580968573441 0.5041898816395955496 0.72363584244074408147 0.016732959331993292607 -0.39532453634191111469 -0.97825106937496453252 0.90688882878103727059 0.86726602380855066787;-0.29390671271827650823 -0.37694452674431383477 -0.67472473392191323338 0.12096290494629129142 -0.93372252170432368246 -0.82301849815224659146 -1.0449846634545361113 0.71997586058482920812 0.6633830263696431917 -0.89278422263374224155;-0.82453812926545511086 -0.099571813162938088704 -0.91044039207125371238 0.43246413703107400295 -0.25274999823058552639 -0.83629375358909119331 0.7344294901739162329 0.31829329326048544369 -0.29845506525615145277 0.67718758175586746262;-0.31932253579824859679 -0.86470635651561245094 0.39869987639598297724 -0.79576422443181749067 -0.46132240631123228036 -0.45536843829724338306 -0.71063625851441014625 -0.52146672058500376234 0.34056640781666225326 0.85400987025840346956;-0.40271431905090937509 -0.4919105315104265741 -0.23270977783657031956 -0.77309360104874325081 0.26434962590501392965 0.79530110267583042916 0.4257763390118842195 0.81062561193288529271 0.74594490384971512409 0.46411244104561288903;0.79244637452149757628 -0.58677810983672273881 0.67996461480200687255 -0.15165563470173659688 -0.39217163356608930602 -0.71345133597342502707 0.82821263629511809867 -0.19874929952092007523 0.77523592600119239915 0.079813346442733329456;-0.7906091618595745274 -0.29250960462477937352 1.0065294377617102217 -0.31834019660468343416 0.43775782827372122785 0.35464079469911530262 0.55171673151252476064 0.53172058661629784115 0.79603991146622832265 -0.25275472724178016382;-0.13328327153788760429 0.95460228784177258987 -1.0097412736936237643 -0.58687283604156781358 0.72815396160045875451 -0.5707239131510168928 -0.57791524138013405931 -0.13772732775038526443 0.42836503085012217484 0.090711390171213393541;-1.1289256807847711794 -0.41594081706831731449 0.70318533493365475984 -0.1382362940211075697 -0.64024930435168780907 -0.042219412007474067805 -0.46363133645742676814 0.48465431003814396504 -0.01796866049323088757 -0.36040529065299864442;0.62506914807223223907 -0.73637688487606411947 0.054638733865137172063 0.22624757019672733782 0.57460049022115611272 0.69871992175532093849 0.23836388664601920739 0.80291348729425249253 -0.52664725951844038043 -0.7383091430558218482;1.0363835153636993258 0.15933402290275888724 -1.0102676607789824459 -0.55283519427500549259 0.32329578534263186951 -0.36989535530894701587 -0.81090422327852140771 0.51865457358985567193 -0.27658286501968415427 -0.51939116881042601825;0.57231433059858050072 -0.91153695643256049674 0.24088235373533922745 -0.76922273037013000341 -0.95986940783741048211 0.22291260681276997557 0.65224037590413452836 0.51135911478155593457 0.001173393453824511613 -0.10036035644174400028;-0.53269098223453870133 -0.73547939115763916185 -0.31005198345884737998 0.80227379927265429771 -0.4791837401909494476 1.0059036211281184858 0.79429595418619058922 -0.053331675819090415547 0.04542993828322550165 0.2765620406937033815;0.36364663239523792315 -0.29333165843587072352 0.094035653418308884355 -0.50459453134123033458 0.58228894862682223366 -0.88688436848742147056 -0.65672478506653630959 0.68864265075979669284 -0.024294093414040554557 0.69588740421471750874;0.67117818552890573525 0.51503224173742567782 -0.80355190759112093968 0.1100362977420248356 -0.4905275062059702984 0.77901396845656134538 0.83605840416159005191 1.0416616072441988727 -0.20221538304646896611 0.29827349538716502186;0.4218811996817254939 -0.61368863901522274773 0.59242322803835967271 -0.7730795643049204191 -0.7383313851655592952 0.23306392202469700115 0.58353353968518406614 -0.96597325621702390119 0.3854856124713182397 0.14118685635554834024;1.1134760302907378282 -0.58867435921586142022 0.32651016155113665729 -0.36440919179650599347 -0.072982467851688978544 0.93685264736400530872 -0.79021001374480648316 0.6642943626925812417 -0.55397296181141519877 -0.62124542418874240113];

% Layer 4
b4 = [0.16475292221377094148;-0.64573871510808600327];
LW4_3 = [-0.51440949157981619155 0.60763170211250527863 0.24355178347327435806 0.66527856016954678431 0.074940137341211576771 -0.25315027110572102531 -0.50099775572439508853 -0.43240478411173316475 0.61910176772653069399 -0.39631281181607219688 -0.4040617959520899638 0.63353873931389259599 0.74704039635056873614 0.62727693951237006864 0.46981531100454104743 -0.4184089964201118117 -0.62920427593191641247 0.25104629247676080173 0.80018366079727942797 -0.9870143986130327507;-0.27764969951859896913 -0.34326513615951592673 -0.61373318804928944648 -0.75950861822937576484 -1.0914772707015374387 0.40968222058824088627 -0.36080292567303323681 0.58974488699091309751 0.13864618590553706712 -0.0070849347974115128856 -0.0038497328961208327272 0.41986558712617050304 -0.094162620569021276973 0.33974272787075882052 0.53634516948875821107 -0.063602851699044851697 0.56309134922926529221 0.72340655069827908275 0.42859132983132075534 0.038200475975639525128];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.00001041518662;1];
y1_step1.xoffset = [-0.999999999989399;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
