function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 14:00:27.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.750956411335636;-0.982896160954866;-1;-0.73475800024408;-0.89256839179926;-1;-0.989750992684106];
x1_step2.gain = [1.00248977576361;1;1.14223288886694;1.05761395169577;1.18701832004569;1.45714238611703;1.11839472631256;1.03285757081092;1.02603264922468];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1768832558657766896;-1.9219734173424609658;-1.6302339510768915076;1.4719619814868820651;-1.2013968203582723326;0.7867049551446616551;-0.7730255984590406193;-0.52752758972991931063;0.35920690515732012216;0.13843659754239739934;0.14024325298270287621;-0.15912509610866792942;0.53316509881278129068;0.52637076465634746736;0.86092337155818743355;1.2199464659845411507;1.3881878645685628015;-1.5425126942981721712;1.7262685457957369639;-2.0815299463313192696];
IW1_1 = [0.30886499182007931541 0.62502472421608612496 -0.90155673344063047558 -0.26851922032547170804 0.014913856249194390458 0.13208572026841980396 -0.777796075143441068 0.50014168585251161936 0.97472081390218812125;0.9409687334492804478 -0.29233550233261862417 -0.2000858787145007589 0.62579985422971362574 0.93343361881342234998 -0.12922779943680007264 -0.010752984835627435456 0.62744603889506445071 0.74715619704012248281;0.74950060606336044167 0.60576862803800624047 0.43185166958670229143 -0.6999081646710955118 0.75037878018045456319 -0.57141368400349512591 0.68822716654713966822 0.23394314990650150188 -0.18671497653058294341;-0.37301956554767551344 -0.22427434505800181164 0.5490242685889935581 0.21056047837046132365 0.25269745725526299163 -1.121736622352247581 0.96232314810567809449 0.78926106875842405586 0.51005652321351957479;1.1307431543628572168 0.45527182526191267709 0.39463727608841392414 -0.23280343158029750961 -0.96575722074800351979 -0.71984336941032178725 -0.48432337826838273154 -0.77005698638310804416 0.15584997676357292828;-0.32337452176453979069 1.0612256115128126943 0.37207825976069508478 0.19171226239864339047 0.32833851744388253824 1.425180835936020074 -0.60874919452528886143 0.10860125874485995756 -0.37977809363380810037;1.1714739074018580833 0.37133493730468314364 0.11933659212548913819 -1.1601127871295247029 -0.32232440516382798723 -0.63443018131529282932 0.23504181135540241909 -0.30491470547340704389 -0.11343605788060687201;1.0671940328118152408 0.22397597558564810716 -0.78867503827991536358 -0.016422469375418337345 0.22323243608914281055 -0.37321169516203844818 -0.77745242894856136928 0.46989113054088699206 -0.8447517657885267317;-0.28345551732550550161 0.32258053513980922133 -0.31489918156198998256 -0.8210735103558444159 -0.34323542340344176393 0.71132383128661469396 -0.72889720828233472982 0.79301076311152407516 0.50861726600583767599;-0.57474720388796129988 0.24492899729775294282 -0.61163331283310595765 0.22803010468189402471 -0.84530457548655257849 -0.7105048260338737709 1.000812587114211949 -0.6579066071725024889 -0.78749177186381336124;0.40714314255494976624 0.93345999389321965278 -0.70623033007410707107 0.75437830978199915677 0.32903169196660286833 -0.46705401841062360591 -0.85940230105466564048 -0.53784166614634154602 0.17940056132455778348;-0.85791070230354371517 0.18354069037673964582 0.62646426850006231568 -0.72527339623561226656 0.40877836676080914202 0.14318811487780297442 -0.84489118979432942247 0.085758259140684037214 -0.93278906980603393251;0.11543900286719588344 0.3690852193958408245 1.0443593136325446391 0.10178732093416809068 1.0392911825195929598 -0.11255883686566010848 -0.40717122524083215751 1.0741440947278277918 -0.10122524201697916113;0.99037583868297540679 0.0961091863086784709 -0.83410009419394270935 -0.88658414536647711657 0.061635707707362166752 -0.62531057697064251766 0.60954610058113500859 0.72107846567320421638 -0.22964614421869314342;1.0394936255830100613 -0.52142451429709957278 -0.0086365181419921100564 0.49537252511507784414 -0.89886449310607274832 -0.83063745712762693252 -0.46705014611183542916 0.14191579669669429631 0.38152173482449081021;0.25569398023125472497 1.1840591510733033953 -0.047599769784569194442 -0.22151516702419404847 0.85694352159259257196 -0.17806464642616154359 -0.33531805308157364154 -0.81006242381950621656 1.0567291875835411741;0.78542517282400370338 0.089461847450314824215 -0.70967591197547397197 -0.076008705644861979112 -0.75421605117129786322 -0.65226338744092904331 0.60588982816405079213 0.6339748000161422592 -0.77390472856300029925;-0.98331164610220178623 0.58585255639364119951 -0.42768237034210687675 0.26102940227267928952 -0.042641028184822266089 0.44266098313619867133 0.69202561356740011078 1.1214894018774042017 0.51496669808452555372;1.1235409969117253759 0.53737049790172430885 -0.51689301100058493432 -0.53240143792685401536 -0.016693268906116508904 -0.7582204472872163814 -0.81714453255600916215 0.061140079070917480175 0.68106889127495651159;-0.35926340140017115621 -0.90243022776140158214 -1.0227779716392961795 -1.0499289039570109949 -0.467460649613047452 -0.070698688440306897696 -0.23894269645570859195 0.0086261553092453202574 0.21499367921180684293];

% Layer 2
b2 = [1.650590355110325369;-1.2658590613812570336;0.83668808882064749088;0.48238957866222476056;-0.12116818945769486371;0.22297748886353224718;0.5286237939129392327;0.92985165796318947073;-1.2749032088335474633;-1.6429314611085330533];
LW2_1 = [-0.14955032800913239943 0.2416569914343077996 -0.53792725436046118226 0.47064458396773600768 0.20262862785716448388 0.40110731187963866162 0.3660824273873516943 -0.08675732225802136599 0.26284477264275835084 -0.17720655245215483076 0.52548335018872804891 0.35849479560340702378 -0.30188701051236727091 0.41034751556395521188 -0.013197558434746561526 -0.41390846204414188936 0.084485013866102923186 -0.59875603977117719534 -0.32081132634746706289 -0.23013846085439659817;0.52138833023835018388 0.3250009248883245494 -0.16549231426524776967 -0.29654371446936644841 -0.58435539656196811009 0.11421934690076225583 -0.26020568942440663873 -0.43909649722926169524 -0.11296714991049930377 -0.35045511278410768075 0.0094894545294431920102 -0.091999931212089366972 -0.015540845879966271037 -0.047076795508510946298 0.16411487615953584962 0.51853108741770337353 0.14559457976057946227 0.54551796278816322427 0.33079429794596537651 -0.53387234658488802452;-0.32046990473633724106 -0.38880040176800151341 0.54662884877528128413 -0.060743819909937123158 0.48106841871011851719 -0.20066384342001689078 0.29912765160084126004 -0.3624914931370712412 0.35957219921075084246 0.30795489768761274973 0.1331880978162252871 0.59303335939140766619 0.017641511473615048566 0.18773495065190642928 0.039909100156679394589 -0.48694516427969508632 0.09701356208487801891 0.097695442594378456569 0.31207969441465915894 -0.48069012332624611039;-0.39333183392113701959 -0.055679827619247584947 0.3452015600331298506 -0.37506248879259912465 0.34933699773900001029 -0.68904782788469376431 0.099315721600282125259 0.37315559907742829049 0.085151420783201065001 0.12099826474704519774 0.0083008633350175366206 -0.2823794840550633567 -0.28342708170657227029 0.62439400189978011557 -0.25463285725119577663 0.18052002359709234947 -0.53030274093461682305 -0.61897035600076244499 -0.27457894021361672898 -0.1525498048631991066;0.14839123978631080236 0.15724767059705838101 -0.16175778231294629661 -0.39058476457994772968 -0.18934378811773433515 0.29660590856087359901 0.37358121636233032614 0.084309504764670889498 -0.6423178174744976765 -0.79513555277328751281 0.40444108643766052413 -0.020412926095856195885 -0.43180608483168347878 0.54552236581383450886 0.13413400170451070248 -0.18743020396695453389 0.10108441623080237359 -0.20878403181721269521 0.35968480495890031712 0.03609952795345350296;0.15647017796194279127 0.002926357441099996029 -0.36053189357799991788 0.094037331309492294684 0.75805734452159112546 0.21903064574579053647 -0.18501343418737484225 0.38218477816771834199 -0.17545522034000343714 -0.53293232042152327566 0.22423833916017479884 0.7061883256073572257 0.083339426251715947869 -0.5074612931152031603 0.19380222967462362726 -0.76250960779842491544 -0.17419652496744630898 -0.49047885799472495938 -0.077113715911435454231 0.24954620911069230749;-0.039542695841460646922 -0.14297584196075605045 0.00046330263134191848606 -0.054484584090108797994 -0.36261367925846804683 -0.52331304387280153101 0.13192528632764916052 -0.29481503507517414775 -0.20769156796879417737 -0.25509005420280722598 -0.023258351918835011574 -0.1752979344335838241 0.15754116568589854319 0.25177553813723008158 -0.3927436724470677043 -0.541161753543157098 0.29519609168371691021 -0.50324306049755085368 -0.33821701226886558 -0.023969979945766016483;0.50478543864797886798 0.41821932555694751876 0.12553574376490145292 -0.43591568932514834778 -0.012355676878083084874 0.61661993121170100007 -0.16786122796435254401 0.28829508822670180113 -0.33624351157845200344 0.59462217412002316141 0.057197637303758361305 -0.30933482688126384685 0.24463520559879348149 0.18574785480767497248 -0.14344694092801951735 -0.085405945060994983842 0.37821106354567990415 -0.21743963208480282523 -0.37460462525691223812 -0.40627059889720351649;-0.48549175773782338172 -0.35038498285214397798 0.45630199560022988159 0.027594687378521325083 0.39538662530854795651 -0.34395854053394631089 -0.56473543891257960148 0.084480011338191787762 -0.49005953182746814223 -0.6449165114245073438 -0.055937154876989234054 0.021688147964040990767 0.32543080434708393511 0.431402572251165628 -0.083023253537809246771 -0.29536201606166961886 -0.30725935097045636857 0.19691603151797118509 0.35630632681182239363 -0.25573645507408826472;-0.21812244837377003925 0.35806423863385095085 0.003744227747521229957 -0.03284187599391352741 -0.012546863457666097841 -0.11267710254283780369 -0.38866093116428940268 -0.063230483575210411074 -0.36712157345491919225 -0.47973110476682162551 0.046270921712616958077 -0.47447230126495265612 0.10352459876010952633 -0.49423925995311762671 -0.15122185928430112445 0.15131150109592675368 0.38765098040197160101 -0.24358568392155927063 0.23900625616698836784 0.06922072741182688782];

% Layer 3
b3 = [1.9026185682573644176;-1.7086735305159190812;-1.4935594881197902239;-1.2911917097445637648;-1.0882938882154418181;-0.90386601654763165659;-0.60524697405989225096;-0.45105769062990030971;0.48128077426974447128;-0.12783405367974334799;-0.31259508407139630082;0.40925060015554848292;-0.34979241334140459552;0.75730073490052796092;-1.0592187599176385859;-1.0214434859878631645;1.2898258283783008427;-1.5309001607180303672;-1.7194369942010911956;1.7556609153449360683];
LW3_2 = [-0.20209515605837868879 0.027631560132455438433 -0.86135564200613623509 0.051392150759791241366 0.99052091827217925157 0.75964463279343485969 0.81774272751102183854 0.30517445578652852012 0.29843741795414074902 -0.1932789952368352826;0.31147486308871474847 -0.2219859146995084298 0.50627660845396982303 0.33702682478434714541 -0.19681336885076397558 0.41468552439586614522 -0.7417907613406117262 1.022734525435483377 0.87367656441242136367 -0.41849292336089632949;-0.0003257209039208112944 0.46860755437848256033 0.33612274745061321291 0.82425396506705894684 0.24032614045597955332 0.82488450509774668973 -0.66699976618806489093 -0.64461455170967330019 0.11299178422313639614 0.97708352537336629062;0.019920360430932385065 0.026202564876611426914 0.51178619125697277781 -0.90564914015524655699 -0.19319994570980772441 0.50324031725635642864 -0.086222221157863432328 -1.0359245131052259303 1.056305024971114781 -0.01217599022659312559;0.52756364051580995067 0.51855226539214460679 0.79577224991425166145 0.67538058195054817556 -0.94836827365195197626 -0.57048733323136269213 0.45760636911002966487 0.1199301974543106053 -0.28879468093943289064 0.33231950992321651617;0.048457655270274506421 0.77960429866875780025 -0.16966161569607352 -0.075994580875154746358 -0.69240500977534480409 0.80536673226888644272 0.31125361470296220023 -0.1523520960630912191 0.85763401967343555476 -0.9765539090150582302;0.82269831572472718051 0.08631102800506935957 -0.14722899120435981035 -0.020813046765467212162 -0.82549306717311321524 -0.27915571818817591643 0.5241673822686029327 0.69374532336209249195 0.98750157325624732252 0.44520019440826374968;0.60362743952667785585 0.3420449416258724562 0.92983487276760590223 -1.0743619677545024338 -0.52658451234125447371 -0.22020962517046022144 -0.12272609576935453179 0.50881998261350758206 0.40874187162809588747 -0.63545300023892725694;-0.29204642872071240323 -0.46812250900188429048 -0.2855366236100260191 0.59076724104873190591 -0.80083702648423971127 -1.0337300880266866443 0.17314656649617668482 0.098641305457786029875 0.71552371429714201057 0.7373752401000396306;0.3941678536164414659 0.15595755525745613745 0.013527933506432152089 -0.94912785333109306318 0.52625253991290432687 -1.1480044141427452331 0.14424400361885875155 0.69070960225509425712 -0.47173901314936339535 -0.044336824834776578097;-0.56133437179386791449 -0.87990775486726158228 -0.79914373423857476553 -0.29919474843622373417 -0.81604814416749982264 0.12800848157518321391 -0.095013556636672297229 0.21668952133290844686 0.59397141798462993467 -0.79193823228250170843;0.57453722328930978414 0.77002355591616855612 0.06816058380690688534 -0.97006080223830659648 0.25718310541824884741 -0.74978060537960999898 -0.5035755682033408176 -0.38568863946324288827 -0.5796960878382246829 -0.64417672887620225364;-0.56214383871002659987 0.21619701170535393642 -0.82721661933368062503 0.39968768322823400307 0.23870294747849757355 -1.0710653514498738037 0.59771428790667724407 0.59578937662357245308 0.087392586848340642058 0.59905745758221018438;0.22917127599896117141 -0.0033153553398028792754 0.20992428367438495385 0.67460052191579122915 -0.3718316810600092448 -1.2783875631535406292 -0.74126123609552951876 -0.64575035032788807854 0.21590872804089283887 -0.16669124004873125955;-1.0790796743155057769 0.51648716293524410403 0.12080691272402881153 0.22741728368546726413 -0.6476921980401016965 -0.52016462910944294418 0.5232804480841564132 0.47729705130299593385 0.83295872843245410966 -0.28829230895793434009;-0.50281235012231373371 0.12940393063003469143 -0.30822022029324624981 -0.78960570429862619868 -0.81404424915836359755 0.27130092021022644833 -0.97104077421736179065 0.30302150999214233495 -0.89685576581629955495 0.51670817603902574611;0.68942283692552963625 0.42778153382072919841 0.42842383159840213835 0.34583155921181690795 0.51087025812624331511 0.21138352161884740865 1.1958786354782389161 0.43261448137393204716 -0.59068511452835359421 -0.5756520248475761603;-0.85244685856821400538 -0.54724538577250181337 0.65586355407266783146 -0.77318051379637497966 0.64317494100547034641 0.69135564354661571684 -0.24902848479497144418 -0.10122611767568277796 -0.48556981711978514094 0.48906356194881434041;-0.89932461694801413277 0.75701397594771224764 -0.051737577557559165375 -0.020500152842992044877 0.76280696713789708507 -0.15957518473858342545 -0.91746962938974307988 0.42212219488080648944 -0.46864293054698463736 0.52868069097675651768;0.77193212552783141422 -0.26743639360586446418 -0.35454295784215633658 -0.65202143899514763969 -0.17547834537801965116 0.508904255023508445 -0.89117504818237258668 0.83448437800890373772 0.23433244174029516094 0.85344895926461450397];

% Layer 4
b4 = [-0.071677834439638835051;0.84508545788763866913];
LW4_3 = [-0.74787188277079841292 -0.13913571586486861431 0.85072731725246908407 0.26117423388185856403 0.8533568108357509896 0.0017656362597055672795 -0.43811576176990207898 0.2767661762714370699 -0.54634847736161140652 -0.90199852061418539506 0.45466484736714374293 0.81534180688554236394 -0.13321081175755958292 -0.051993192815127389772 -0.33643700528750092316 -0.75701586903207862544 0.25620653841317070354 0.26439164934296210951 -0.016440164584957034366 0.34242968703439224942;0.12592979972718004733 -0.31223981698870001411 0.31127976873771562305 -0.1961763503631230865 -0.36127280735046157778 -0.13190280554843883398 -0.10915662497714372081 0.13567509419312373531 0.71120440803429652021 -0.92997725934558428396 -0.565614706491793795 0.55609964320101790136 -0.6564264101102005311 -0.55896782693779256679 0.68618256107709030278 0.76735799842318486164 -0.22130100233431401757 0.37865021099871326582 -0.33995144457490034107 0.57829459997830412465];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.01999917112726;1.00000000023283];
y1_step1.xoffset = [-0.999999999989399;-0.999999999534339];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
