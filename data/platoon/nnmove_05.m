function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 19:22:29.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.975146796670546;-0.925841936355771;-1;-1;-0.976641177656369;-0.718007527153801;-1];
x1_step2.gain = [1;1;1.01258296516054;1.0772565252809;1;1;1.011817431817;1.21977949460909;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9098625393287140817;1.7927472074536070501;1.6852610696934653411;1.5265910663218904553;-0.99219160945726725398;-0.672030231897018826;-0.79770609536963177355;-0.44577363089570937182;-0.64627957669401503438;-0.2268204905936377358;-0.062405732643066522125;0.34082696650334420863;0.50683612517337794934;-0.91412202028391498221;-0.84647400935805716671;-1.0124693616853044364;1.3297248066415576773;1.4360045102292484653;1.8587220106973849632;2.0029564563158537283];
IW1_1 = [0.01369114217680440608 -0.9204785022213618495 -0.7652995142824098318 -0.90802746725247418524 -0.94640666556779529106 0.28017633755770332549 -0.063934519963189384573 -0.66159388575735655902 0.36882998582075210425;-0.30339375865026235735 1.0026942813139136934 0.3079410186917494463 -0.81128349156773105211 -0.034555145208989182515 0.075930443713606785017 -0.63029745532830094845 0.43659268254799077358 0.96004288538468751657;-0.75919598146394629001 -0.29172992284639009952 -0.19340682348118126699 -0.78108044709014401441 -0.67054998284722500124 -0.056627618966636886211 0.80825315446290868504 -0.93592961009327046984 -0.43267255861558795438;-0.65560313063517339227 -0.34069864333201893558 -0.89217044386387711619 0.63140532291209905402 -0.61080451199212892899 0.69900320175124119881 0.011951277778631105506 0.61275466077453999425 -0.084880461775036997185;0.70029975769565777632 0.7264068881966344593 0.58029064525793550011 -0.77469553773272104014 -0.85813923984688533775 0.77131347526820126514 -0.089141604514430802797 -0.82242826853063455417 -0.072086590794142646477;0.67148860611092442419 0.80771659396388428842 0.62464229301721163612 0.97667112248045062639 0.42061975665433132265 -0.62161500137475311778 -0.54121541836359909894 0.5879460653177959184 -0.720228784786947962;0.30731261527230002706 0.44650309281818645335 -0.90164272839106229807 0.54617569726970771615 0.99247782300935571964 -0.56234360851807452253 0.23131853491719434057 -0.64784320124534933161 -0.74912347380250443596;-0.029255278646847040352 0.72018392606519165966 -0.62203757864690001345 0.95431889694458760243 0.57994506027734660236 0.39006459535217513634 -0.66370396164831346741 -0.38067709945322592002 0.99711634480906130573;0.1565743118389484323 0.66417539776773082405 -0.35773629983070381888 -0.67807549019624380193 -0.49692670842226571715 -0.39615701806504044491 0.76364709501062211228 0.71826117795152855106 -0.7926913231206358379;1.4463466100435495854 -0.42278681719189864507 0.51234301719205288528 -0.17938281995068028341 0.9789852760299704304 0.035967865590878833615 -0.38253718247346124581 -0.78993230991775909011 0.069684504588730433738;0.85628555592648492034 -0.99113052606427742841 -0.26434126895769444188 -0.67608338686121982608 0.59268537784468744434 -0.11712615610504423236 0.75190084851964322787 0.80391814104990455547 0.48469352320515868282;1.0685645877223401978 -0.68923274717540272682 -0.73396830037759819287 0.64058761342398673477 0.29846595871347275652 -0.42611582191979713308 0.26002205812001560892 0.057955666003564755562 -0.74738952338903508199;0.91988100584211229815 0.67091525320980271996 -0.54848291094111389921 -0.7509977796876706746 -1.1719733223714599024 0.10790022510792425525 -0.3628675499921283909 0.0017741795050688416446 0.057644104025118179935;-0.67259943347583051043 -0.56246151793568133215 -0.35667719161359817681 -0.85557708308038382672 0.353235016104736399 -0.87771232206618321481 -0.86492421984329825868 -0.39223723375957836312 0.39840259177204634389;-0.77884190792542096204 -0.25579730376118553492 -0.16860442254462049139 0.28694611058163260742 -0.82766751180403252963 -1.0571724028999247569 -0.45535190442055611948 -1.1275274302092472833 0.11578075754471470193;-0.79271705498703826098 0.74037651557185080176 0.6590123371946663422 0.53809168551729491536 -0.32587994907271505829 0.1221763806565291377 0.9676854620522735706 -0.66613335331885970003 -0.58519712610337892844;0.75980734104421265851 -0.23085979360582831177 -0.41480630590703898575 -0.54457766034398880084 -0.88471310763388422149 -0.68662628113411761088 -1.1819370503518724647 -0.02970044619086494031 -0.62017445033876161808;1.0932034468336617739 0.87778775269327846686 0.40475238570248484038 -0.38818535142493182377 0.58857093113246494731 -0.66312429427658159398 -0.69752454568880661867 0.17321622287972265886 -0.43074739334107625677;0.20161892645572493388 -0.40342919656432446596 1.1511450435944829973 -0.60414247181236724327 0.61137407175478852839 0.17645542849561618448 0.50368005041691688017 0.95484291874115423404 8.5406441389036108491e-05;0.73792259020600292629 0.67908694455471374507 0.81469196334724547359 0.58423333086358764099 -0.52459073586810611722 0.70394733475960358238 -0.78888995382957982638 0.60092316949962421013 0.23850995119967730029];

% Layer 2
b2 = [1.6339364565910190485;1.3122622236938901175;-0.89822987644047891376;0.38897998520343346485;0.37943181271138870514;-0.27100449799836273668;0.49180590875857999045;0.92218749382412290583;1.1881341449054176884;1.5757049064988488674];
LW2_1 = [-0.47948099430776047747 0.39663029407522643055 0.27477487204633022078 0.16600265440757591695 0.11080305398395552674 -0.5006975655842245132 0.29359830894615207564 0.63085143088493000896 -0.69544130032464179791 0.21661190927347637181 -0.37873335036958094557 -0.11672447002824672124 0.68114993640052723389 -0.45498277301370909642 -0.1271419850645035543 -0.28247564666233765385 0.10813998338939875832 -0.26486393097245014561 -0.35376274838165516767 -0.13446669150176862595;-0.51448608243390259176 0.036432242409709922337 -0.31086562872788803258 -0.097260248866126899903 -0.46430161593185054203 0.6935465690990033627 -0.015781471397557499114 0.29106542016587666488 0.17070204452826678865 -0.10495074055308370453 0.33194398713296324743 0.25662350023131891286 -0.32315724950356777834 -0.3812200487531795523 -0.2793048228971317104 -0.40223612379360351721 -0.074480320806627017816 0.3407734737031186123 0.046951602341824140441 -0.15465055865669050106;0.12409813067807465292 -0.10394642446692244075 -0.038602995476842490163 0.10010175856796132976 -0.49467589521465682445 0.23796260098253649296 0.4371911671410611544 0.33796652263313353703 0.072092737223252018053 -0.034931195657485800132 -0.10139013123079296252 0.77278187958034605387 -0.49590485721129134999 -0.024211951906170044169 0.13119564499165112248 0.1650975873335615296 0.0073544503617980760968 0.19021377484442791861 -0.86993847192689166548 0.33680169575655433123;-0.48956713501211829298 -0.25389578727903100441 -0.19179113933738811681 -0.019734283276916599059 0.1286913758009554376 -0.1420008702007653778 0.3381802699186224892 0.083333661054771926424 -0.11330587663483769612 1.0667930597378512125 0.59859355590673724024 0.49737805294546738599 0.052559268477557034849 -0.34720566713419792615 -0.51965144439192778592 -0.76987025067401426703 0.05111265044513582656 -0.10004220533511368196 -0.29047892746279774245 -0.5438176571033247475;-0.42000553188502159907 -0.25691351229739900486 0.48069928570127012923 0.27454423876669054039 0.37843566233083553163 -0.0048136332366501902169 0.08130008835608321105 -0.15069695047173015112 0.44933739409471379345 -0.16662670891520434124 0.19903139082424975426 -0.61910382515677997439 0.19328588619528830339 -0.47169579160147434571 -0.42966700936038976222 -0.32060353261470664332 0.15414865994397741744 -0.26189675269752754616 0.33944414580301085493 -0.26201241653528273279;-0.30052627379364510452 -0.50392895026898454347 0.37723263484030827852 -0.32955079086874167205 -0.11185520922166523883 0.35024103578441501128 0.63834044910397347294 0.32535355918297292899 0.233001274150029275 0.32007403111291743425 0.058821737844129570738 -0.14046068985310122823 0.17472222935033557278 0.27757992164178107997 -0.68754198368895080851 0.40797019108095822215 0.16264206828389982107 -0.61038238645050191256 0.078238555153798183817 -0.33249058709970519265;0.48220569481246927657 -0.14624139834010158046 -0.50680081484465289154 0.30564987616862410169 -0.2042054178736491532 -0.59929082355399976301 0.51286710615053077156 0.25870170386933932782 0.24725361361718892206 0.28964975621675409512 -0.53236981328909371847 0.16336641019224434901 -0.50187111128813977068 0.48764617696459061635 -0.26704081181509825571 -0.2243956483235217958 0.29996800106746096537 0.081277950030261642 0.40537172873925397809 -0.48176543178333613993;0.44340932407266558934 -0.15732452439658187182 -0.2495643304520264727 -0.13471476726412015545 0.054346608350269789978 -0.47689188434305262998 0.40886294833003150595 -0.22044005548961337349 0.3869117053621871638 0.30993591062132130887 0.47917549554400484801 0.3930741838848016978 0.21264826384539295412 -0.50403007545124911548 -0.067229298612296373161 0.28147586325472689905 -0.7601591805923620937 -0.3034062345821392781 -0.27987727488558089561 0.13878741439988376283;0.63965939701873186785 -0.3740542271685485809 0.13975899427882315651 0.055732646859906462278 0.28082581763844222111 0.40144805974937225468 -0.1927851355677202283 0.44712625255984655981 -0.44757927395571422968 0.082848086142813720523 0.10698635602172766601 0.19962836853838986095 -0.15095788899008977246 0.29902047113244906162 -0.14721732525563546723 -0.5400008079467315536 0.53920618282442434044 0.25871143930274204115 -0.079032851602577683381 0.57078883862859453036;0.18839834692342169453 0.44274773166373859734 0.0041069141168642211287 0.22889102791975632356 -0.096511399124223892776 0.093152219156056439986 -0.17392478298092217681 0.3679764021527939799 0.43850756828723636005 -0.43913921602118261012 0.56943677253762803314 -0.38019068070171713192 0.52999347686125319878 -0.3422244821830445205 -0.52031377597290429105 -0.36585784211155747414 -0.64143868171132722988 -0.66432546132117042958 -0.45632504844624077744 0.057467488797341578777];

% Layer 3
b3 = [-1.8350186563805928053;1.7291787365958573019;1.5270831892447074285;1.3173409805195106514;0.97690193524890578392;0.87252025431949242762;-0.65237179507951037483;0.45839744988479980137;-0.23159525890310003748;-0.1482410720209308419;0.034548645506619735102;-0.15918989789754156572;-0.41262161476227315893;0.69663681780407205046;-0.94172318354432238419;1.1152529270500204372;-1.2253699788731851061;-1.5108062845964320697;1.8073420101849402286;1.8432254763932420794];
LW3_2 = [0.88863503110638419891 0.35048284782645544588 0.69340570734562267941 0.68352967314023671541 -0.2424841995570107267 0.45958801028368095887 0.55910211200305870438 0.30794641278326723155 -0.566207848862769203 0.72332452594688589897;0.023806797877478302894 0.21956484711190521475 0.45210046249974250587 -0.15439335533806516909 0.38441504979353946503 -0.49671372096159466247 -1.2273932592135210484 0.19583184909783177274 -0.31642625000973029215 1.1954173172981401585;-0.20687727990400092692 -0.62352412748694152622 0.77862076526550516586 -0.77433519985351950687 -0.5103697060106965333 0.49592642803521208572 -0.32394764902694006548 0.75859357368215030171 -0.11602383269788033027 -0.80775258978936048671;-0.23236274360938036221 0.35382026143851447175 -0.024547054941971915842 0.75535270895879635944 0.13906086118412905317 0.80364726666939956257 -1.0253347653626203595 -0.9992802367115226625 -0.15766469725854440065 0.11011361747558229274;-0.43142143603521687645 0.44301077109821063171 0.27882221006884000403 0.28644833311841927381 -0.30136273820533221457 0.74369883185158114358 -0.9096530985606634534 -0.21318332203208850695 0.57280950113898720932 -0.70370941074982529262;-0.63148368521936304454 0.5288682985439758788 0.26175013694261473063 0.28480330437754797224 0.0072522862626231351935 0.72316717901835614324 -0.84239339314837213823 -0.4427243490998348241 -0.65943405267381727253 0.86098063336531416301;0.52487086050481412958 -0.16962356166017447667 0.28485492978994159108 0.71876930218020618213 -0.5769751816298728242 0.48475224344381601105 -0.61721686139198750354 0.53483374685150320005 -0.75025334771872453921 -0.94262751210599038387;0.060513950947471542574 1.0552745510064165391 -0.32833004348439343012 -0.46503180574708508077 -0.32606227005796734053 -0.65936122511331318741 -0.3705688347554357831 -0.28062649215258106405 -0.92514938108742383882 -0.2381249884185571708;0.97127907370189270342 -0.60212967126418870389 -0.95229224267742917931 0.31599063257289827789 0.61257229034359594877 0.56227751424601113417 0.56157779631636794981 -0.68259746575863800011 0.43061062128271165861 0.28193541743815292433;0.41301117558799771423 -0.67262220805088035469 -0.61880851319450269621 -0.3691911658748536218 0.28557744692180797585 -1.1545090515570051171 0.12399983196580034728 0.76265342023852056297 0.35671454988993733792 -0.03035436795420306394;0.27776216264758690766 -0.89970345218340963545 0.65545031320634583594 0.22665685143061642393 -0.09083006871899469703 0.87892863711861213272 0.61950093126700334079 0.68067826412427578919 -0.56286688271093088254 -0.8507686556236431219;-0.31951651601877251174 0.46275364662276791128 -0.49773437763679972967 -0.49451291121707413589 0.39340339258609241524 -0.47534939159087979954 0.97648184036380547557 0.32779821263851610658 1.0606553833722265345 -0.51362456814122647852;-1.0713575093626945822 -0.42230208535515900703 -0.75957665055898615503 1.089538503712845996 0.22596299160359120672 0.58877417058988745779 0.40877783260136502097 -0.10510408125017817182 0.061154161453805408466 0.10276455287584188025;0.20725942096539029524 0.7524499482877181622 -0.11075711694186901601 -0.98144245033095889319 -0.25330637083579510271 0.63484188871242408503 -0.46395093608529081042 0.26243440403217066503 -0.59754805532041832539 0.43465731630429671473;-0.84628828243404563558 1.091751188785518023 0.22711295332113554113 -0.43991773029508790538 -0.14720163520191553719 -0.58591730214726778225 -0.64097567095179786012 -0.087584379427369338234 -0.41956252922720377319 -0.70762673488936367328;0.13819732480361371363 0.093177122689242539155 -0.28981896083965319466 0.42858566395158242956 0.67478497559547045981 -0.56419081432235285156 1.1015873367471937794 -0.52859899225415341029 0.075854970914130043225 0.99148935331404508542;-0.51665057882824905189 0.73425931444011571791 -0.70139898310154269456 0.57027336296262620685 0.31933680621670490485 -0.3784571920819920221 -0.65637882128917035551 0.58757366374306640999 -0.52346402880710241057 0.55334034095312301105;-0.18356334890983139196 -0.7380738086107161422 0.011231280769026409996 0.37558702086064621462 -0.075099130819397605374 0.29499153922493331903 0.2187399444459289799 -0.7204488445252394957 -1.3923256983139251641 0.50856945322860536152;0.29087937238071820412 -0.50761685860146954496 0.83028741041795850464 0.56072779154696250625 0.092943034352968259548 0.97187566996259555641 0.34540480037225929077 -0.25790141131018817777 -0.010717715395630440789 0.84445159511160905463;1.044161513765501148 0.26979627660081428875 0.76529690522383608808 -0.2131674328667592655 0.17689920407562875759 0.38294553109919116096 -1.2935069902120606145 -0.45261040686114406562 -0.27684057541731171836 0.42011527484859478854];

% Layer 4
b4 = [-0.63834773994939264519;-0.80635941601928284861];
LW4_3 = [-0.71580944557659098582 0.57672294454170636158 -0.12277814281773978544 -0.015656387419504539521 -1.0531482726048830845 0.34154471120504309445 0.97217658597150069522 -0.56364831667366277479 0.3262740706566472082 -0.36266562330680446324 0.23396559039347097908 -0.29323324872909378724 -0.25739167824665687423 0.4588447067603317886 0.84642965912159617847 0.79906370935343706829 -0.41769967937652674461 -0.36751214819561478508 -0.71412289021390518151 0.62392676653768064376;-0.14980258667577064924 1.0725684138946240953 0.25255508896896672333 0.18240961167084929206 0.80436689418577145272 -0.85801126130434801631 0.50680868306798609879 0.65117102349071376288 1.0125397450327475735 -0.90803124282045688531 0.54611380491381855684 0.68531234102024507493 -0.43273413187981080164 -0.32241663150908062008 0.1250470713092653452 -0.53034504878320021248 0.011366585366108475363 0.60391804131431570113 0.18075431304333605675 0.76299411586238374827];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
