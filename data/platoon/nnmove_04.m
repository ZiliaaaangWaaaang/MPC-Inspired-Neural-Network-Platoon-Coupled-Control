function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 19:22:28.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.849546541832425;-0.925841936355771;-1;-1;-0.976641177656369;-0.718007527153801;-1];
x1_step2.gain = [1;1;1.08134613255988;1.0772565252809;1;1;1.011817431817;1.21977949460909;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1191213862626150366;-1.5808356315749374499;-1.5796429341287450132;-0.72456259105973619405;-0.80792697794566281644;-0.83931925476317070789;0.45419189319978658936;0.39321415490078104327;0.19141681223690032443;0.06267183567487066842;-0.151900192471287665;0.3478047507540993899;0.60560865487164150522;0.75497019442251744881;-1.167603682615348859;-0.97676353619389011396;1.3355382187866073895;1.057167192796609978;2.004568314356368397;-1.9490471777948668031];
IW1_1 = [0.66193279876618293933 -0.14329969210258075574 -0.77670787946821562286 0.83555007697736272121 -0.4133873438761246355 -0.69198412972896350404 0.39255617293399924783 -0.7047065453827535686 0.41001515728565773866;1.3037446527112752648 -0.49683655587229258455 1.2918620509073408531 -0.35272047438700582234 1.1333343701174276585 0.066327297650275215957 -0.10354694867027505745 -0.09788969803633640332 -0.13661550528961446949;-0.34490731358251247585 0.89314730934103059301 -0.45027065939675270378 0.70943961029955771025 0.5267220895114221868 -0.6830259809958246775 -1.0929470703523489483 0.61165387396054715641 0.1748559648034181957;1.5782956274107571293 -0.63298539645384077623 -0.47791631900923614573 0.74351610161618919559 0.14360531316226174403 0.33841288803084179637 -0.15467690788825697035 -0.33024278138567325636 0.035671320029400099827;0.33647969076533473798 0.88251177837733973952 -0.33801620849135782798 1.3386500614026224376 0.50644252970379621814 -0.71102931992696272179 -0.97682068897741725078 -0.48532620987199937002 -0.28844125403404929919;0.27628108981299942526 -0.29723578032409553318 0.22956246908816729801 -0.38168949004380564594 -0.21153229673250062426 1.144257572800638556 0.82843757767395975744 -0.96825815520201929942 0.33357968988533009957;-0.99585192630833219152 0.27314153298554366689 0.29345665653251218341 0.7575370426252553413 -0.47884867627605676166 -0.58756158696741966896 -1.2470576739073861994 0.16606409711750452773 -0.062083259238260100898;-0.29042161572415725601 -0.57952487558540966006 0.85155450705002322387 -0.56192660436837726934 -1.0289998243865685623 -0.20183113708340172376 0.39639857983634307903 0.73614284193290890901 -0.71881049182924283691;-1.0375459599154375212 -0.89951257191522981937 -0.70828759844853850236 0.43553233145982250818 0.31239053120278603703 -0.66428436439559312987 -0.33343867812479610624 -0.45359366299977721404 -0.66388206110701641904;0.26371044671578569574 -0.39911433060747675272 0.90544944975711560975 -0.88198790958054151812 0.91804339758181385811 -1.0537965109228453198 0.5914068138887654813 -0.50650604865593806814 0.1606426970288824807;-0.039661241685417125691 -0.78384300700216524849 0.60664416687954270113 0.88396583394533123634 0.5781086442684051363 0.93067441027815800414 -0.32464264072006526751 -0.30736273507691946882 0.65997025244054174919;0.97289230045803742897 -0.77771050157701049343 -0.28954115412317188438 -0.011073253241685499654 -0.79572232510642038061 0.84275044420355782471 -0.51934205341761319197 0.2624013962624627827 0.85127906707930867114;0.1678321601712287614 1.3855305310578960309 0.021092110458228861825 -0.74127329983143375181 0.5678675338475775991 -0.12494284036800509807 -0.88691825648360811396 0.34073499926644795766 0.26776806300544847561;0.41464258539465503883 0.25241060349896365933 -0.37220096763321330879 0.33006063912683575312 -0.8583724635186207319 -0.98023132434646986777 0.50880090748548312263 -0.80918705651651068322 -0.42270240220673477305;-0.39643570967255709059 0.23706897604399473911 -0.45239245339718781036 0.74847289154124219124 1.206966112783455225 -0.017965201638052218786 0.75717444293567548463 -0.73292212589000960143 0.46807116728651837478;-0.14715631920804994603 -0.36738251290535339777 -0.63002568344982745607 0.88931264662662790066 -0.90593384899094842044 0.81585673404588809898 1.0300654924104792887 -0.030681779029569519746 0.71653639458803730644;0.53444791106475597608 0.92850034259186331465 -0.54450803420219640039 -0.071696570081761848425 0.6047442822751567526 -0.43443003444125510848 -1.0819798305912078362 -0.6577923358240306273 0.1200448570498678369;1.0426518980803616277 -1.3872879745588453382 -3.9582775186213642327e-05 0.87203352537191158866 0.10064325793490820626 0.2059005326277624226 -0.45087637652363576901 -0.50986090744549983356 -0.25976676382508889773;0.78076350587629783639 0.13981614002163997301 0.88824100331132782582 -0.034779762201952515999 -0.89537896113845316659 -0.84195814436498939148 0.34252617580400940289 -0.36860547741516480613 0.065028100774560074204;0.029131779628061592324 -0.73771297194023710553 0.62393119428689058914 -0.36839688809813364578 -0.80848037403942973889 -0.98065975351542544747 0.34311205945605566248 0.72839516174307106233 0.55939367404943574069];

% Layer 2
b2 = [-1.5641969019809969232;1.1318371480914402039;0.90174766528304084456;0.58537943467501651895;-0.34631764229859585136;-0.21888952127998001496;0.71569897080516509114;0.83331560926498060571;1.2717646503713668782;1.469136762419817499];
LW2_1 = [0.22582678978300962935 0.26312927702569799404 -0.066339020151246388957 0.76177827803725972622 -0.30990621259577560975 0.38490384915123071474 0.16609317116398192304 -0.224637860076400242 0.33403129323976871179 0.67975320132105443438 -0.37501426760894362999 -0.37914239159250157085 -0.0089641646762261585624 0.46058494544429035011 -0.16094608912806490642 -0.22406758848486957314 0.26620950833491274778 0.47155217128213711142 -0.26953270359914527354 0.11612907800131683222;-0.37571513329858285957 -0.43323421617381963067 -0.064155367844082725193 0.0011249489560094805274 -0.61814468536365818618 0.031671107653113553249 -0.13066534602657217667 -0.56402594142233997143 -0.10550480534378967046 -0.13520204752512837709 -0.16162910760703685931 0.23168524687022623576 0.4721850776293234353 -0.36827126622008332646 -0.4513892841700527514 0.91677572342722801757 -0.53328772264675983195 -0.46716963325564569987 0.061008730009056266752 -0.00038200909445664475717;0.23383923174676871093 -0.55579613768591584755 -0.19202342697764757107 0.10504784356542860857 0.10598720837102325321 0.54327956946137700989 0.3660842654102862137 -0.22025861355419865117 -0.049780603759204053449 0.11885246175167048233 -0.14175983429051566831 0.21819471067380166729 0.031448032799982539309 -0.19662968140684169982 -0.39691503985995396642 0.31436196558097162512 0.48248276774722997917 -0.58633208449825502395 -0.33493102420574971667 0.47879528863993980892;-0.0076956734202149965768 0.14081580436134114032 -0.63158159484341380718 -0.43971040870515770704 -0.53135684995677268105 -0.062451720543373334671 -0.10957852163791287348 0.30246249219983772916 0.35858532284353389352 -0.64916377033118222162 -0.17862931940085433058 -0.14956377418986108174 0.57839425384746379066 0.42114310251852876688 -0.095371724560235321411 0.26494599186271000635 0.091463230541527995587 -0.43651191453120519181 -0.037362929651185532165 -0.15707688069770683881;0.46514426479326403951 -0.70024532945180284482 -0.045014759479137508857 0.32940064186717110672 -0.36306850519774847008 0.23718603566510462755 -0.12791986432826329967 -0.18254058226314606728 0.49413112430909666983 -0.01714404177557725048 0.096485066747469108717 -0.00071180864691094969388 0.045652784198892251699 0.056006034952897729151 -0.42161918514334145724 0.11922303185276371396 0.38724814969082316241 -0.27183233776942034021 -0.55338463212992716755 -0.047940223057812467178;-0.022015624701509053235 0.1729356580957274736 -0.28207749024622941203 -0.30697920475971857135 -0.085626968541791262379 0.029492188763090617515 0.16398530635378044673 0.48921592705806887791 0.5674439893470503149 -0.4869906938853338918 -0.39176213721617714203 -0.036593408239570059115 0.16098532925815839389 0.40507759470219567577 0.44540096310548638048 -0.25988404627047956286 0.14448063397910676509 0.3859813536720906324 0.43979024992201798394 -0.36818264459262201038;-0.080348163517783524612 -0.20164623983246426908 -0.50506049958574827929 0.22655546629792269742 -0.28016009784456896714 0.10054580409788556328 0.041983740228143703876 -0.20588750441750644504 0.49862968265303209137 0.076651064437299146204 -0.40769201847012515039 0.054092373991376667408 -0.13007788197855782442 0.31514869695897462787 -0.61816396797600781099 -0.66951506776598412873 0.6659449657631246744 0.43191407234544521021 -0.0023224363216420773268 0.18400458143742706718;0.2603343915735777947 -0.58412256913323068463 0.052603950787565821601 0.072864127039522469387 -0.64025845877985654298 -0.002688402148057301988 0.84739445909404820245 -0.10479613000844996418 -0.21457379625480813012 -0.18006984198124004193 0.51224678926836497705 -0.19812693589803639926 -0.15549585466526305577 0.42901368843836162892 -0.053357265128295763845 0.66070034346722994467 -0.12366155480067562988 -0.29004624056106220742 0.22649474801895366771 -0.12839664049279808644;0.19873096432118209087 -0.58291089554234631898 0.66386524390033097021 0.0046632425087421366938 -0.74366553379430289095 0.23580284171186272069 -0.19982825758976716091 0.42747582592701671711 -0.11783865601541800017 -0.3498643076812487096 -0.10962876590523379372 0.054614210750727656962 0.12322512971535985737 -0.67030304318554390086 -0.36150441849760089896 0.11142496248146621651 -0.56741364577067499031 -0.1437391244047667993 -0.14701820103600157785 0.072363841930847896955;0.13994448172952500542 0.81993004288440718419 0.091821874157192159838 1.0708992514674291474 -0.0089150633968846024202 0.094702932980717635658 -0.10729068575784533879 -0.27048521542914938376 -0.029005979316815762303 0.56018789507092625612 -0.022517860034075298792 -0.028208107555468986405 0.20266196477974959822 -0.45682158588340127103 -0.057909525173700071576 -0.17659734072660637771 0.08178597447399704734 0.54012582139624842892 0.069244278696296651665 0.27055137250912125735];

% Layer 3
b3 = [-1.865910116075220726;-1.6692800022658562664;-1.5727431224274379673;1.362450933758207583;1.3137818130367850955;0.96828248906766989368;-0.74364198021240190961;-0.57149201066947585836;-0.3336369413752682811;-0.18242478227881206432;-0.071842326788544116911;0.23042253931712031179;-0.57404918201433774438;-0.71315832217492136635;0.85206506579628138454;1.0882667610601051145;1.3213557509649938027;-1.4907270666829084416;1.8044224055633246717;-1.7919206693903091399];
LW3_2 = [0.65693341978111674528 0.14503735851689245062 -0.64612677026978282413 0.17522933860616590751 0.7779015065481703628 -0.70233028329817737134 0.74141032707848641969 0.44239939843801029395 -0.92863453179134758386 -0.075250312312840225704;0.050924673250837479421 -0.56280957918007468166 -0.41547861914991590648 -0.28796905584729759475 0.45176952014017640602 0.82720096300809753398 0.18944877122567496674 0.80650016277036573609 0.39320441119894944393 1.1311311645385095925;-0.066998769865873677998 -0.85296731588694041371 -0.58530203618903298146 0.30509333384366066344 0.63285714060998043973 0.033919417827142667177 0.10293826421874442689 -0.78606417457294885942 -0.78275439985190875536 -0.71335777649703357994;-1.0780550699650828239 -0.11005108033952346047 -0.85926492796406406249 0.0094485128126339315568 -0.28295555086064272388 0.49016551621875192879 0.28076059025471605812 -0.22152140759368096901 -1.0879077142091626573 0.29586926193040974375;-0.38829889882543816571 -0.79277454846394701526 0.23473982963452999506 -0.046525249718379971253 0.45600849991345071555 -0.063454169623184272786 -0.35555091828443852187 0.14381704589346597234 -0.8353027068069752703 1.025848853844350872;-0.56557087180538656579 0.10761051778817237734 -0.29444712448725074427 -0.78513123254614614055 -0.59879800608983535515 1.0452612819177011794 -0.47676751060196770338 0.38007826617603385211 -0.17997782704429376999 0.79087003886183004919;0.35406097390675989045 0.57229690132455457441 -0.17103488206153472095 0.48253071471210629007 -0.7993661206555888743 -0.24599381692807659183 1.0016934517085940293 -0.032065644578683480392 0.088626876865726289534 0.40394211512688421584;0.35016075726097567467 -0.74303542407762834809 0.092707196500786154258 0.7602121975027926748 -0.78147456086960565003 -0.32478449789235031009 -0.91023509588619710975 -0.51666991705386167144 -0.94702912660479110496 0.24187948133802722461;0.26213859369743985894 -0.23750488537673491996 -0.26225248884001656213 0.46662190812059189948 0.5941893677615333047 0.72312218546907469641 0.24687481376154429835 1.0504131480456153636 -0.19293450219771124399 0.94290373860422460606;0.23396447260601344054 0.35258498404797111725 -0.27239751052875099679 0.1579898265185260553 -0.92907875146927765275 -0.04715270565505101652 -0.72012601905749751285 0.91248340245180226127 0.46382995586012676359 0.67227305892292510414;-0.34402145986287280266 -0.44657795213609902119 0.23257452151050492239 -0.94664402384315282646 -1.0522343927491328852 0.83301223383421774127 -0.43933989673924722652 -0.28526506448923422132 -0.34260409839733979576 -0.20015406187359222057;0.9515110126531001189 -0.81669336358931066133 0.75380873017338445585 -0.17499124429408419168 -0.31509892583228232832 -0.53157409997712701255 0.31410458051191236795 1.021247630849834831 -0.15534431847245960823 -0.20148031842493341337;-0.70055063535664108265 0.69178005621252436352 -0.59621616982821079578 0.81990303893549831837 0.26364053977764623227 -0.9390281216820163257 0.26422375734269004655 0.0041750275123681145073 0.46430839326554856905 0.34584914442316688765;-0.43994295357575741168 -0.30232097582206707287 -0.86285730332194643388 -0.6851109190392662418 -0.58453991087430856588 -0.27367246688873270166 0.86353040281433424141 0.33388621191904965801 0.16241073616436549343 0.61497629598622693958;0.54140110238958771838 -0.86441557228634580134 -0.017269833442032561655 0.72274296493100220751 -0.13887042860385589993 0.65292261595864775625 0.49976494872941662484 0.10780280548976087229 1.0142836176430460871 -0.66505836243263005692;0.37310673353210377368 -0.93347562330367694905 -0.063797552907833010583 0.3967788453872730936 1.0518592898676339953 -0.47619857918536245833 -0.85171137793302076346 -0.54776678005403023342 -0.059367076687323133699 0.1591785410736145101;1.094092071642748687 -0.97882477049713101369 0.057299362972984713149 -0.23822059021792124645 -0.71877786484650674215 0.60629388156570129809 -0.41627808054441822749 0.57113601072732667063 0.46908556713965104956 -0.84790851851349613444;-0.83837811131364370354 -0.12282136093284080902 0.098684360426773004571 -0.70133091407829184494 -0.168720217708397624 -0.85059758573777144441 0.18680943144708966885 -0.3493293456588753565 0.19781084292183653828 1.1288322627426587985;0.59340582262210972431 0.43170633719259460248 0.36012594366405004109 0.69167264305596920515 -0.4102536230125869432 -0.73417875093987261526 -0.32440690773107588862 0.57886250279513606909 -0.5054578896275903066 -0.48184864236229923984;-0.57951786056696685812 1.027035976451305288 -0.55142659945683569767 0.87792445891189885288 -0.16470707746036303276 -0.45243954399129432398 -0.45016472607063456879 0.67897101436218709747 0.73228507220269523081 0.073019585692668920185];

% Layer 4
b4 = [0.38587659192628120941;0.22741397013661765469];
LW4_3 = [-0.71003378559308760742 -0.83771579561008502335 0.92700402778825830019 -1.0346039448984569731 0.59695364025199126878 -0.5314782437577428853 -0.52939443460471025116 0.19631696018804062343 0.46885156052016679906 0.54249404833063963327 -0.029248495439279448976 0.380664871215975531 0.029349141080843303003 -0.71513586444159982225 -0.013721929459219031622 -0.69422004839120288189 0.67999376671670108685 0.10716630140131166993 0.18287658773374107501 0.22198187124166116058;-0.53411977488288453486 -0.16281458635184190009 1.0033902602898439049 0.45808339305652517881 -0.29714364976123064377 0.051470439310544700839 -1.312582537585296194 0.8656339370473482564 0.32851467961617103475 0.58474311707363935131 -0.1559523377865985605 0.66502948039864007157 -0.099094382992622534467 0.32827883507506450123 0.78140100371415444069 -0.73536547734327317727 -0.28023635341334224291 0.18979404369819330434 0.25445406216146465583 -0.36519335174551526002];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.00000002209025];
y1_step1.xoffset = [-1;-0.999999955819496];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
