function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:16:55.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.587040224347201;-0.639361590405926;-0.695257580172501;-0.656730875905293;-0.716167654575603;-0.581556487918271;-0.718965317504987;-0.791448178096159];
x1_step2.gain = [1.69825171189909;1.29500746457081;1.53491027182406;1.60065309370616;1.26826958496911;1.30001945712979;1.70035585197589;1.38642634918985;1.24845427801055];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.876843188186974265;-1.5929736547285118231;1.6333495116265028813;-1.3519784941992258887;1.3183599258263485332;0.9933056240696773731;-0.72024794240543510426;-0.53963803909789753721;0.43621503107022829848;0.095940061216271410593;0.19908678047886305129;0.28797305425417341063;0.40455893160752143256;-0.52070219129748140929;-1.023214479624251716;1.0435775184910778268;1.4052021748297884862;-1.3929039386098591713;1.7399014044610374707;1.9100625811483111782];
IW1_1 = [-0.19037264298393516415 -0.87907107157905761685 -1.1636063394080133904 0.76417114506024430565 -0.81321647370195282445 -0.49524349239903531217 -0.37209140404886309472 0.34160174658388908764 -0.45421663387786070931;0.98795534717387512025 0.72934076111424639421 0.62570073691536720606 0.30414376500164452821 0.42029178598632799257 -0.47248121340045862171 -0.17572055703629280154 0.84607065992648566866 0.94915921707895556381;-0.82450134607952429988 -0.46395078449945958976 -0.008514095005699162666 1.1519575106952129051 0.31717867068171262668 0.95817836943912615411 0.59566789055836255606 0.094239171060063700591 0.47593208394717639864;0.46071381387790755202 0.58092123480405033487 -0.3699476741420484327 0.8068272710378224799 -0.61493442138278664455 -0.63346135277224835392 -0.36218369686286411291 1.1824437574287427477 -0.18862528154533694802;0.090185801422180716935 -0.089459415504307512879 0.621093416825933331 1.2221011697597832235 0.33131761017545874326 -0.27253124082988033905 0.16421354055384579373 1.0030094953899775234 -0.94243072407668104784;-0.19533748752458537923 0.87149317124505087939 -0.5033535703188566357 0.40664031320867716213 0.7571227544262560949 0.47643340769941899815 -0.68836862707662549443 0.6044339601856737465 1.0088507563860891203;0.82013236456555260734 -1.0515096796797962497 -0.53954902251751746256 0.20560082222462941481 0.64284469296983104414 -0.57146704961522731825 0.63368199504546152134 -0.28511636623947217428 -0.90238005546030564119;0.52018009152753508229 0.19920358712170982418 -1.2625581128791127927 0.017731946350836282067 -1.0266405260528079779 0.46436231334944677585 0.69435233205219171193 0.022904661492346239937 -0.63767784085956691342;-0.28460221846349653685 0.14254245129606363252 -0.62318689643155789071 -0.79510344838101731924 -0.25113704450712409644 0.74625139331293943723 0.67978563975135464226 -0.81351643678202079091 0.72728523002131251207;-1.1192699710950027026 0.66251786431998083149 0.65211580537373048383 0.22350768125455983126 -1.0122685209923631966 0.41486465256402865753 0.44095330323486969792 0.41230080264579987981 -0.13474083268868011776;0.75341212052921224807 0.66892906528640283526 0.47474374210970970989 0.57863692299921221096 -1.3898619411348926977 0.33818595367163090115 0.32905220888153746683 0.214733897053688505 -0.43322301545571650916;0.73732500437817016792 -0.086955626013092757187 0.42594010420610406431 -0.97340481572327430815 -0.53422294233958356191 -0.69316002756022487841 0.21503188718302121418 0.36448363573479369837 -0.80407748849964888471;0.43048213281676711572 -0.32238991371735603586 0.22362395426620895744 -0.39561081003681131119 -0.71556206649211839821 -0.14285583846238242289 -0.77964177834590941973 -0.88394548092413283147 -0.98126653697349253136;-0.99565341493013170826 0.11160353979155931969 0.18317300233918093477 0.43190839102816191986 -0.695723674681098192 0.31013858264001165077 -0.34570338600829914055 -0.71635030612797856442 -1.0530748548059181147;-1.2589671610032648896 -0.74361761178470120459 -0.2579350538339152954 0.060791965151422759639 0.42750028232409925666 -0.2900036486739058228 0.29361269220060837171 1.0244765717566173269 0.35280832486936730685;1.1287567359568950742 -0.72348026408381982399 -0.57023256269697164544 -0.15526346947755062522 -0.51500697918573501433 0.58701454306040090625 0.33310644379510095936 0.31902766961468842499 -0.78710827366482172263;0.29139902404617795684 0.39263846295821347443 -0.02934154115087792003 -0.66087106811110840621 0.20416766337238889673 0.8206410466539669768 1.0816839926612467071 -1.0090724378370738989 -0.11146251367454039494;-0.82825020212161470923 -0.58156852292788430159 0.22111294393533356684 0.54624635549173850002 -0.77486040030559977243 0.34259305015305507869 1.3690107060330025668 0.3303783213078899661 -0.09861875118051559308;0.48804367175608898144 -0.88809681684738817076 -0.8316627714716480213 0.2051824804223993659 0.68159608894583201266 0.16311052137525219874 0.76305625688606326662 -0.82493678683176074884 0.48056727320857262065;0.81554932192260820578 -0.3865939990946060667 1.0550685212611004005 0.28722092995846332242 -0.42351452407659295751 0.075318377632877409056 0.89841723637591830443 -0.80453719886716723586 -0.55709598662559722815];

% Layer 2
b2 = [-1.539728804142538543;1.1583814512778831674;0.95353358882325101042;0.49145440479215052321;0.08280264096662590112;0.27936296372463942372;-0.59948172428714419091;-0.89510976852596835229;1.2117696302604095138;1.5790742768198811063];
LW2_1 = [0.090224293803922953061 -0.11536435634374303527 0.80002070521394774705 0.19816858959270258755 0.36214481126256997667 -0.16662341444075176589 0.34866323944552340963 -0.039618469659218009948 -0.014285877807681113608 0.40554271779322842439 0.16345204140230323864 0.14315472025539810463 0.34890905304979535906 0.31005341374459738368 -0.33660042139261958649 -0.18486473867209932131 0.22943459705971874785 0.046133865864980701244 0.45159930109351725802 -0.41771865191778029258;-0.24721759502292031674 0.31649784524016139065 -0.2540990421306987268 -0.20154348340689928754 0.22310292292387323698 -0.27580286564665845717 0.54459155323959196338 0.2476644905578072875 0.43291963064948507656 0.036002363576366581965 0.44164684080735627791 0.140227581758439801 0.58497460316988991735 0.44939968584513967365 -0.68740377379072570285 -0.24833894195406647221 -0.14084790234824395849 -0.25181073988181679191 0.28542493443445543511 -0.067908221170511318121;-0.51208242868508468959 0.54407195421684784176 -0.47786713593374330333 -0.14957292642976532937 0.30404357667679193789 -0.38579695316998680044 -0.54354415207920869779 -0.10418269427777851477 0.37606809711659305862 0.13735316015690840485 0.13120670358956706969 -0.2205636626273214107 0.26901247524086152607 -0.4926129580209650527 0.24039722910422831048 0.26070492089398417113 -0.25735614960040659183 -0.34747399901965753122 0.24274638030967232716 -0.16314921011283009533;-0.24632647699183754519 -0.27585220399239379629 -0.084328242317955381946 0.47455912577022457688 -0.65543644018748525859 0.14745027552694334183 -0.48842385652350822633 -0.79937978993445235609 0.25720433496790356953 -0.13835218596262743862 -0.12204770346699983508 0.20541357018945080593 0.22737374558049239237 -0.31393224127167584925 0.50012833745927076645 -0.19284986793151021045 0.088348627877668409192 0.49158630637707978472 -0.49086242104561589317 0.19809831605072547589;-0.20501468134025152557 0.002067131396525855383 -0.10280843187911126169 0.35529706925692916553 0.31590572696826380028 -0.56044586348921099361 0.17195600824334111856 -0.80007964216213334208 -0.25727640018638509023 -0.085678618747232815345 0.47196619308177112373 -0.82135957896783362564 0.02580842908975015948 -0.045172549579225867999 -0.55416138499237821424 -0.33453565354465331083 0.21053286132373633111 0.054256205563830324501 0.25734938516579708434 -0.55881397731032933507;0.77534654395356916723 -0.20781727457291637728 0.31817647800584492046 0.066623551232043137782 -0.39560242215531288279 -0.025893958291969634139 0.41179174302459226054 0.36771276953378795316 -0.43211298973430828374 -0.58316749222690222876 0.40045512138101829747 0.4179974335072058067 -0.20620382344341109393 0.25693979191170007725 0.14478242721130343829 0.18964834760237866962 -0.080871637002320098664 0.013237229145099220495 0.26485019186782665646 0.38036679938139039692;-0.70454202407661004059 0.20909087974033582769 -0.28224595493670995294 0.60081211353978603018 -0.24087608180565361904 -0.52605860211696131579 0.0096854786141379149711 -0.15161039074548812722 0.13439847690001305303 0.48681295478243480357 -0.10804517142826124132 -0.22169251011780211069 0.17769750049031918238 0.30735275070373968553 0.044091939525295276159 0.1897101399784569542 -0.17262162664313338012 0.69047980778644912903 -0.20792326787135653743 0.55325253781165839584;-0.47715054633829756536 0.079383966964742827543 0.19031691321496588265 0.16871251821244401259 0.23583104814024408169 0.39856048676226685235 -0.15293539782672804783 0.48607297915208308448 -0.24028874974938768672 -0.54401153475854713282 0.20278190364416895375 -0.047783820842524742101 -0.1404522174299803472 -0.12011768942244112346 0.3288189800045666078 -0.43692699672715634707 0.44173013567329549867 -0.54992508633991465938 0.42957142053441454976 -0.44266788627097319875;0.53018993217899235137 -0.56728070850434975103 -0.13962409105132705944 -0.08758668652043005709 -0.14213313197930696474 0.24456222072908462284 -0.64321487868678728361 -0.36092299056614801644 0.039413932271736520918 0.63922146622234043978 0.53738018103772944301 0.47188793615770702194 0.14986900513150561154 0.29546490199898262086 -0.013686710145017837517 -0.46675017304443078281 -0.42086817171137569371 -0.1361362961833806895 -0.014087964060601847888 -0.21742624316102193704;0.50487467181087208878 -0.23625917915177882533 -0.36526691242592296271 0.094847637335153445193 0.45629417887787793173 -0.28977461775737867189 0.4177135338068756476 0.33431648820733439464 -0.56264528588804918474 -0.43732271410126799527 -0.38625166876089928047 0.098906770283574196867 -0.16690579298111904438 0.48738217922721399633 0.15367756881380745249 -0.17519914635687833249 -0.18396335376240802173 -0.63303956253228632622 -0.49542150546672569789 0.26630187980657626934];

% Layer 3
b3 = [1.964017354485054323;-1.6680310649111829147;1.6048311254543132787;1.2651464177920226373;1.0383519508395675501;-0.92796006022992660878;0.74923356506322857928;-0.50098575664798850049;-0.1908052875819321037;-0.20709520829703059741;0.089638453478540852659;0.24379938802628559058;0.44518206739218213475;-0.69696573216036816767;0.96492162757185651056;-1.0237676960902972745;1.3516348258152812711;1.4240328028268141036;-1.7952326715103081867;1.9049141465551828745];
LW3_2 = [-0.38297986504165659749 0.47401703824422403155 0.96922253831148441616 0.1918677837159786792 0.95813727239673784908 -0.97222052575037642974 -0.33064399849545056398 0.47689598904189506312 -0.2156121578711213127 -0.3451332618292266563;0.023563435379511971091 -0.74770552185662297884 -0.067441370920987314674 -0.60693090314025244236 -0.13297191117206275113 0.63054293945856243475 -0.6849630333307297203 0.89053022726202979431 -0.77555287176420761863 -0.64843183407628945947;-0.22772875294611058528 -0.7509242204668767906 0.15393015237572871268 -1.1830443639509662379 0.65341678724641061304 -0.6720463694475895533 -0.37542168068600723085 -0.036498870633365682048 -0.69288279722407930539 -0.24656667001787332949;-1.1789373556016182754 1.0861627248123884026 -0.21333393631977912164 -0.019050695032017575525 -0.3473280798135643388 0.51172267093310841446 0.56421957556243240717 -0.38073166217617199214 0.028827207122557405722 -0.31218780741662738309;-0.11745393511036358869 -0.52063537941217041816 -0.054288111586266729613 -0.70081680557381964558 -1.1872483516353131705 -0.032570270003525796099 0.86404657966520825862 0.75520262651762049 -0.54912323596967527184 0.19897611830294203994;0.41479257034430788709 0.79967724521679683924 -0.7706837689413996717 0.5635113020222990432 -0.44330957982513524707 -0.47480801631011443353 -0.64187695922446974528 0.78932884676387604639 0.20153392873547223973 -0.6087159880242094534;-0.30789274097544644393 -0.28857953733172714283 -0.16280122454156567557 -0.48908862072335052007 0.88216798722870293226 0.12103551601059074627 -0.8212645527363304776 -0.60577431351635568912 -0.84016740522164523597 0.77335546692272283398;1.0195371757114011224 0.20784482066356396723 -0.0002196553347513230392 0.86812099122450681055 -0.25512539962935076865 0.33740526203883663969 0.93141677169491887689 -0.44967108131171945606 0.39378653292433873911 -0.47627768154987837335;0.19078959411979462546 0.54591995714240570958 0.0056935189808295025293 -0.92886622636768090278 -0.27431576124505968606 0.46144171715699772163 -0.26249119390555780695 0.87616531696324218004 0.4559901842849130027 1.1616291324509646632;0.67565025839819836673 0.28473652742014504691 0.12625852801169426542 0.48973291178837785598 -1.1546714660943868669 -0.517445172058385916 -0.18325746403104462012 -0.67245806417591391657 0.20683981041013266289 0.15343536796300411007;0.94154153219704772582 -0.52512870926868704391 -0.66800476706793598947 0.041847232409824554333 -0.75274582221841557228 0.15703485103785241872 0.5623574416993003533 -0.64181637602019836475 -0.7186089098135811648 0.063276471168368680909;0.31396824957236296738 0.12217600995106478456 -0.62848828448666904656 -0.46806997480496920216 0.33293527957925961314 0.87512453724663663568 0.34167060570268109609 0.76553012566978506648 -0.30691396876686000139 1.0181046528672765827;0.58806174927616583492 -1.1104248685322557488 0.26582442147354595763 -0.84075347699538738322 0.62628701376682083257 0.17308545928747115505 -0.23646851461161627617 0.74691213498884145849 -0.87559205337678336356 0.46227113994702223598;-0.22711514313288430622 -0.49793659642714105384 0.78707007402261830453 0.48413467358429362886 -0.49681876128515090052 0.13678410995286496843 0.33260213050091153031 0.6180085987143945081 -0.87006903834820803478 -0.94917378082218528679;0.70044297203887118108 0.66257297773172130206 0.21674382767944358474 0.37571598638296388462 0.81919407582421033265 0.31135478200822608308 -0.72891846185145081627 0.41874547521818056284 0.99113448268100279304 0.057667166064906690004;-0.59877539360256648582 0.71288097128343563824 -0.76353762971050409547 -0.35868998605758561915 0.055462084966194986901 -0.49026027180564679675 -0.94219230181200785967 -0.91071271467206094119 0.24342233008579455822 0.2798579542561695499;0.2726711463140076841 -0.90716001827357706233 0.62722724010803332373 0.040365717232959050231 0.071169127981846491693 -0.21280190054928732613 0.88543245510905033147 0.70731911317593221256 0.89524020423756167641 -0.14143981884886530631;0.67313552776800089639 -0.048976411774460153203 -0.94555933522180846129 -3.5095370585765811589e-05 0.10438796759715567031 -0.62838717140806554795 0.35242244479912127053 -0.56716810127871808422 -0.83515979760293401757 0.44398448437467802341;-0.92445719698112926999 0.62460462488103951628 -0.53672389968117339976 -0.54968212412331807215 0.66951214468999409313 -0.3089243017356613219 -0.32800922266080584366 -0.40067618477847305458 -0.84634744342906220727 0.46633235258492583553;0.51416698551158124264 0.398605650567664338 -0.2868576110063313922 -0.54822518408640874554 -0.50956118605733036198 0.79319308130158983072 0.92209857835206454624 -0.50033983715392948977 -0.49665843981037610666 -0.19122608750294731172];

% Layer 4
b4 = [-0.72696719992574354574;-0.066033960885031647847];
LW4_3 = [-0.63858429176066766608 0.22194009086867683145 0.48950241097517099842 0.96132442174800447621 -0.46637893206880215446 0.76610745685152259465 -0.46689016629116786294 -0.9180008578029698052 0.50924817968746205477 0.3097102764329796587 0.10143967333605377612 0.93953897994251678316 -0.9075447395351151636 -0.19342783003577002088 -0.59085531139718305838 -0.87019738860588358165 0.48200022298964706469 0.20159859481545616688 -0.56988447917303619583 -0.19562670725063707744;-0.72540366430351754801 -0.53755785265333522194 -0.76995765922433201389 0.099296307018071544581 -0.82830447760601999541 0.9612636491934183347 -0.36022571943707887288 -0.89295318842784687785 0.81720223707160810633 0.50548497796836100449 -0.58133237636415702188 -0.074068092321776593523 1.0312481483548270322 0.21561266043837634676 -0.70164017453644622613 0.33624727621576716574 0.17415699462544931286 -0.5781053960268365266 -0.089623515407753318041 0.29128182277454212068];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.2404432944356;1.52163970280071];
y1_step1.xoffset = [-0.935164342218349;-0.633395004421358];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
