function [Y,Xf,Af] = nnmove_22(X,~,~)
%NNMOVE_22 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:26.
% 
% [Y] = nnmove_22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-1;-1;-1;-1;-1;-1;-0.976718263115482];
x1_step2.gain = [1;1;1;1;1;1;1;1;1.0117779742915];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9415299366855598429;-1.8878353763210917737;-1.647335533136833563;-1.3643483420058295508;-1.1238271679558611282;-0.85448661232934830512;0.67750852352633006426;-0.47037494487050218739;-0.49794009755821283525;-0.14067269243152788483;0.1234270645843838915;0.62484830007237868177;-0.3775666932861123648;-0.70101001039642896195;-0.90996193154546911597;1.088730638107728188;1.423194983637388944;1.5128027666290211339;-1.8216654108068839335;2.0985633635927616325];
IW1_1 = [-0.30823864407040246771 0.40818816479352454385 -0.52060626128522280442 0.34222952771419257179 0.72797061956515540793 1.111959041526414671 0.88510716004951539571 0.91043770959413083954 0.064991373062527627025;0.2795365455060358495 -0.15455348749841441025 -0.1689140763503816367 0.79445898613987153691 -0.69178480423409749456 -0.82389046249601760596 0.66311973218418907017 -0.33264707270702925657 0.90820037170599476894;0.4741719653677346491 -0.20693286478077030366 1.1160871261622200556 -0.081820531181517025532 -0.052404552562554065909 1.2163639236456573745 0.51852639486656038059 -0.42744407688937563483 -0.2488170124679181805;-0.033051940222321309071 0.79071256039589554732 -0.58406452020713750528 -0.17957630265349427967 0.91519954542427717215 0.045376007780314676909 0.3005951578574698746 0.76321635582976954382 -1.2130116309040306355;0.85718565894990284004 0.51786324790188420497 0.40894980440168521296 -1.0552645187837943475 0.68739420254457350712 0.69226825643079359374 0.13169988666444187864 0.608810987709898499 -0.23217407650020688292;0.19504919347705096389 -0.96345601894230126216 0.040597715611419872561 0.45770770433594948345 -0.4609765587674650722 0.67376188247221402428 -0.25766545243475103 -0.89334002369261822363 -0.85753734964862016188;-0.70816675508605442246 0.16431696342444868097 0.60261166987234027204 0.99719874811201625331 0.77324962957245280126 -0.95462044973736692732 0.026464382475991841265 -0.059011544041685230766 -0.67707917388436533734;1.3842150986749308661 -1.0529570619569197376 0.21763356264516969807 -0.58969357133538313764 0.090333914451885627406 0.40516778717430085299 0.067654547869746589628 0.28762443354297162479 -0.61297397147727539224;1.5838610719068659805 -0.82478514887874165851 -1.1063550077179933329 -0.25543314197650535124 1.2452814816431463374 -0.17070059485500868601 0.46293202993605886419 0.224434299661690706 -0.018951467788819120752;0.9070084149745026858 -0.37570260049248482837 1.0791547670520020841 0.19656833342723861735 0.57456662635154187591 -0.72273394649529865141 0.16181402322001134375 0.69872676313824044758 0.0075785218921705435613;0.31783135739618717519 -0.43525689495547076335 -0.59298470968056904429 -0.64559541293976252518 -0.53494908559727005759 -0.73814596619634875729 1.0462938754289101695 0.53258357083554597189 -0.49332678931685325363;0.81731683212166394981 -0.65736166300938314588 -0.69970228145332646896 0.30956470023789783852 0.43284618134006236367 -0.88727881277154718731 0.49768645880717604646 -0.70239681193810232784 -0.72906599937643723486;-0.51157952630253211712 0.070637989683141222397 -0.55616822860344361512 1.0709879224368770156 0.63772869694576284072 -0.1696761857857614908 -0.85034643161334233508 0.9126059505898401758 0.4015263820378434656;-0.72101009399658089194 0.46720181109542474607 -0.74537696336591963142 0.1518348598270758687 0.11917289460973892745 -0.39114170594442798645 0.79735736402340895435 0.66567982211111575985 -0.56206065885281897287;-0.1681449047645767747 -0.34560833747224856127 -0.70897022793709318922 0.91731350348555928953 0.94343613888555366565 0.7719667046148425138 0.25672887762709889481 -0.3441054987376197527 -0.76272725678799346838;0.81286122651820269525 -0.23161480020437186234 0.14515983145249902742 -0.89010782731657644984 0.32683084624481073543 -0.80321033336279112902 0.80200799454601456873 0.99378870753873471688 -0.33392443511591379801;0.85411674340059529076 0.64171565257960183626 0.2646213940639404183 -0.85516998130277244172 0.24176466746193073232 1.0252373626638857651 0.7119977381507405223 0.16754309525598634623 0.46326282612296421082;0.80564295174390965215 -0.98007236302716305154 0.015135701792872572821 0.52866721586371945296 0.38884438789187036889 0.94204026382384820071 1.0111341680554926103 -0.14876637521241617423 0.21498432595867389416;-0.40202695067069565971 0.92968049914935280142 -0.7537966675573479769 -0.39382321146299142933 -0.67745531262110592063 -0.27463172175262429153 -0.91550842307324264979 0.54352196737741331756 -0.61776690325815286631;0.46991655719225133847 0.32770608724172700654 0.24343645769747801477 -0.74403256685389984604 -0.65132864759525610499 -0.18204971000630332245 0.82351423828286829387 -0.81533753221491922503 0.84424703902821496282];

% Layer 2
b2 = [-1.5955822232129335259;-1.2717094075154988797;-0.97416704133736697901;-0.5705020538298266608;0.16517956902293856603;0.065283007884335164661;0.44811921605466892293;0.83609940826905015943;-1.2122179056510848927;1.4868201240597671564];
LW2_1 = [0.37860433847909968907 -0.47989614125173113424 -0.47870515960440457315 0.42851615548503646513 0.040945385492202390765 -0.27604517176305110038 0.21539978828669825717 -0.018667210118818874931 -0.53693101860124903268 0.18183575170268373444 0.41746014410348170065 -0.13723960422761710687 0.16312319428311292113 -0.16833640913704878139 0.18877243476634270047 0.23141759147351337322 0.46519453207004884954 -0.57946752566626502645 -0.28947934916226747415 -0.044659391290927302753;0.49196424723262638379 -0.010920768722296447448 -0.43775355122290904308 0.54524006538698521762 -0.20983324418706023051 -0.22785212208822722135 -0.45943660646134037995 0.41651348480653449524 0.46995915110004748971 0.14972806740036617712 0.68876225920568534544 0.34810689589437338043 -0.15363037672700632918 -0.10225756762477275497 0.36031108995748750701 -0.3856528330251370873 -0.26902699151423820068 -0.24981895434455700378 0.16570908535345382773 0.20664469751762934435;0.15316287244136936319 0.035632861511837206347 0.42427760719167956216 -0.57712710112923226724 0.42975188378360079655 -0.56160820946910983142 -0.30593295054600549987 -0.29770423740198298512 0.039716273082063283106 0.28511094467420988741 0.037398807060495906085 -0.13508213372758207105 -0.17822961425278954772 0.51504580079933448555 0.59126376720940310161 0.47677874073743792271 0.1152128460431590673 -0.37072616890602355655 -0.33393854419501495245 -0.30360860508168102667;0.12185494003700678145 -0.12984793553332912852 0.20213183969274248208 0.0057379370490608493788 -0.55838010596765097482 0.33891703573301679153 -0.41913714098703902522 0.092861354135283208366 0.41655979954666255693 0.4432894399907699734 0.2009548551712213027 -0.025269032265872008736 0.23651578132047273995 -0.032005107231357771136 0.31230620962577460009 0.18871130017745638141 -0.49164089959692941489 -0.22142470445931289325 -0.58780590882769256922 -0.47522067040902810087;-0.33018080663692611632 -0.27121024097421203569 -0.079064901255853289874 0.021012982281434847143 0.60187474100252902343 -0.20902439962799332362 0.13303228596210098233 -0.46922949870053620725 0.49876348214845428464 -0.24362890863175190592 0.31433476685479266877 -0.27538783722953780186 -0.82271174038207384172 -0.14657820427077891678 0.065141879770341956646 -0.18720811850866170278 -0.18514312410917938001 0.32444204277131716285 0.38319409753533945073 0.051450277399175223247;0.20717293292614813449 0.14200416560839840274 -0.27235638779113185981 -0.40521033739455153411 0.048421068920288488913 -0.041203554805019713958 0.084049818240664084246 -0.37148111164258101891 -1.2587103956457372789 -0.78509329234531832764 0.38080137264681895859 -0.14346062404920192912 -0.15300951125262959862 0.7748157498909862273 -0.43132660533805383674 0.3880172168543939426 -0.093618838853196217897 0.21134520456523783749 -0.065232051310830124757 -0.53887088145364114844;0.64756810860593139179 -0.6213301675366470489 -0.2744807314522388908 -0.20188252605727269318 0.1165754512466350562 0.39491408294446134208 -0.51882196275995773327 0.23356637590124978976 0.38721205827480592587 0.075343739587444502614 -0.22313925194596917478 -0.55600910843714657084 0.11796200521915801984 0.18772044728977446693 0.18607607209682283655 0.22338940159822553988 -0.15915929352678240272 0.71563235544520253928 0.040301705505004344066 0.013215996230467964845;0.28376696897805675501 0.10759548628263489178 0.35831580734341084149 0.5057577044874519423 -0.052844720600239133979 0.11055346624043277393 0.39529981259832780438 -0.63654782420542976862 -0.96084709235516707615 -0.13014972935785151797 -0.13162342756912026598 0.2911207611344900914 0.16548868767070995522 -0.070788762590956705312 -0.47379938221756484618 -0.18910423170675061399 -0.39988626116754416584 0.41793179337923497263 -0.51723102507849783027 0.38241796408460371204;-0.38420643359328282562 0.41665376379224489112 0.56147307142897329157 -0.36063350723403081455 -0.10651115689984001766 -0.3279336523481100607 -0.34324223504105244587 -0.57080198685343264131 0.44279486784379806785 -0.095081027271973678205 -0.095451429724858524728 -0.51101471703679157699 0.18049502638067022042 0.092838579462562867417 0.43550816250952029129 -0.3034902542794797875 -0.53846913581265409832 -0.092011931301415092466 -0.052710739310773045696 -0.16950402931663241524;0.46385949980525137404 0.53238024866162958482 -0.23953581598420997656 0.63358519673325686128 -0.53221170717440846598 0.65982278873206023917 -0.14520925013582655638 -0.2593032738146768823 0.043955308485988928147 -0.62731297618900960789 0.17396395088426253039 0.13176059667826531263 -0.0098606279323760447075 -0.12137556086828436841 -0.42786797997101416735 0.48521379770760597605 -0.27104434012935479936 -0.40882487891362823129 0.13255621372497097821 0.11090266675104236416];

% Layer 3
b3 = [-1.8909764445716228387;1.6787141933162044172;1.4787613618985497865;1.3055471785187879874;-1.1898729382154165091;0.88226751215939791528;-0.62730856316624372671;0.51839974433893987182;-0.30524975668690396136;-0.09694784281435858686;0.073778019796987406864;0.36687776413401623765;0.56065043888593679711;-0.61900686431671392285;0.88347383496607945208;-1.1777184750820275383;1.3241894117402124298;-1.5279610117751256659;1.6698290398349022734;-1.8336094195063985524];
LW3_2 = [0.59137202407507227786 0.53691316955138079781 0.27287733644566819491 -0.49436450435849615959 0.27511525278889970014 -0.034585822035497273963 0.81825541113931099524 0.58514462658537957918 -0.7885329585975544564 -0.21839883873050591756;-0.66063031902253466221 0.49396723371728923357 -0.90251064839260197736 -0.55225466250282551073 -0.029533662113798771209 0.44699605940894621137 -0.86034838936968538459 0.51973036477088330187 -0.71285190053135605304 -0.19824508078131894417;-0.71943555988067087181 -1.1878093687636848141 -0.038404756311361962218 0.56882691893081593904 0.089766876074971357902 0.12072164617532078756 0.70199674989999183428 0.07693462842827586412 0.41469733039422901344 -0.85153800028568571445;-0.26707399256775699037 -0.39332116497725783111 0.87355756720592914188 0.77667703023365941561 0.039429352489712937713 0.86541027130316627858 0.49544642478247163941 -0.55981090062775828997 0.95975542469509422805 0.15038984505522781654;0.46105353592095327242 0.099833527450017389704 -0.23672731914715550161 0.37483475395884163772 0.37290573300059698392 -0.96719559515409192496 0.85752670417697474115 0.34857382877082682127 1.062392319575480748 -0.15578648195088648509;-0.41898515253199075659 -0.28399875384380185439 0.98065782465748840835 -0.040763507720716983529 -0.98556162548106795995 -0.47300796547071743969 0.62069038613577309782 0.79992725859129010235 -0.39902421108101493452 0.051419283643314467325;0.035081947157418004457 -0.088907917572566344533 0.58612742592267974562 0.83793843873015505519 -0.55687167812852889082 0.21198160573055319089 -0.1943216849625505338 1.1714405660747539972 0.76289293231396859696 0.34929320594370893982;-0.74343362568622828324 0.11425676497538954368 0.31087406287281965644 0.72391529259886822079 -0.63531155135292749492 -0.03144609795091245219 -0.1458360728219762481 1.0285383438337947215 0.73277415294000969315 -0.62703488521816697077;0.79369663740077334158 0.10245762070332868621 -0.098596323757552603584 0.46804517813545115645 0.66567334249353105058 -0.8296717394841517379 0.90405731325589955283 -0.24903060097092644121 -0.39378416631710666529 -0.82584132828414780203;0.37701523753805982198 0.15580088395590629968 -0.55553097662204087293 -0.74729888382778242306 -0.63151991522972517057 0.47115940143028406384 0.65471190584539940005 -0.64849694616221464916 -0.61232908283678744166 0.66637506553670500242;-0.81326376306561387608 -0.81681661509778547003 0.75778730259475546305 0.044092259487162020759 0.093992191170868474859 -0.29005307910522065695 -0.7391477553055803007 1.0377998257291278783 -0.09075581773424079568 -0.29731339959206293244;1.3455907825058202043 -0.40486774872539710302 -0.58228624147715213333 0.56319101107261415606 0.20270833696995904649 0.52639674659632629261 -0.00021642240671038842637 0.67444044774469824599 -0.45264442371697050094 -0.4942385794160273349;0.0093830721739893603595 0.11555512000301013109 -1.002700463188618718 -0.15188702894399550014 -0.23833723026729472516 0.65158064341419785759 -0.16148233476846654555 0.56580879697336539103 1.0049503138304496375 0.77430344233246328756;-0.74932792841441542286 0.54654294137696679545 -0.26424686465224406229 0.52497494720580761829 0.80854108884228359511 0.26226599389558064024 0.32767136898269288992 0.74144696971714685318 0.91976563643619491106 0.47495385482458268855;0.27114908253788450043 0.18493923037797940778 0.07611661818441370353 0.84300605412180618092 0.35320772262289368282 1.4561691865985433303 0.54353697425863589654 -0.022611878364702221733 -0.59987238463818981504 0.17697954635347412644;-0.7034853753654183306 -0.56809176747218259607 -0.47305285415605186072 0.047870650268497544344 -0.54568200657083165694 -0.27634922215490165254 -0.60261311413841434081 -1.0650051090615020311 -0.16104072090749232959 0.32653001474027520956;0.31001966044964884839 -0.094652817425562793541 0.66338242120060131324 -0.87604848984278438362 0.023540375505921539573 0.85360818201778398961 0.19514119230553744755 -0.38000330939016790932 -0.68725531562872621549 0.85136612373357778427;-0.24459158837594421887 0.46849430911305989245 0.24165672933142756662 0.69243432833483753441 -0.57779840511628632882 -0.84842738854992139075 0.65551272698451334975 0.58878063597204610691 0.80727595139882601938 -0.17290913520303091699;0.33214379711842056953 0.39281478473120251538 0.74280289862500703535 0.41964308471566230674 -0.37475254132528423856 -0.5722921674206311593 0.50597805510675508689 -0.81482523390221051063 -0.91727453137336645295 -0.40750383489993763364;-0.06429339131939316998 0.75694086030827034683 -0.85499516459634627985 -0.66451564410277419448 0.49315661264502724803 0.31009934804670874486 0.4329030421678010665 -0.37995785931628900389 -0.7040014295514646081 -0.93054998934723343051];

% Layer 4
b4 = [-0.047600733981179678411;-0.47797504969746745784];
LW4_3 = [0.4448494498188051427 0.069247815681577534752 -0.24111535673371825572 1.064723306395666258 0.37529408189144536356 0.12569156902382619401 -0.28496561454054497586 0.37103286470213658887 -0.28842095597998479439 0.4944249350870172921 -0.86829061929915185569 0.14848775154588908509 -0.049868296058936362192 -0.1903241489947365972 -0.7844425347234353918 -0.18414363706946632049 0.20188763123933045618 -0.13082861392017750002 -0.71105669854814568254 -0.5904171850879124106;0.46232468863362247147 0.038466855810167330243 0.92978066036236828307 -0.65510411975255844474 -0.28053795206171161514 0.3767404902926914656 0.63429321947124894798 0.7935888235593847595 -0.19173107006511538875 0.14642583846769136047 -0.11627635729045018853 0.56567459162476030343 -0.63868614012034063965 -0.17317904176381918036 -0.44012718098077002749 0.32213784424667513129 0.74199559973512319022 -0.028731919789189989262 -0.48637108740792706074 0.28714659756223237519];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
