function [Y,Xf,Af] = nnmove_20(X,~,~)
%NNMOVE_20 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:22.
% 
% [Y] = nnmove_20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.881804843746703;-1;-1;-1;-0.871051952961493;-1;-0.976718263115482];
x1_step2.gain = [1.13109940850722;1;1.06280946541617;1.03005982197322;1;1.04673144715384;1.06891740597283;1;1.0117779742915];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.0864898825774758073;-1.6771022678387150773;-1.3813494448694989547;1.5580281900544763474;0.89629283345331356436;1.1838250729523416283;-0.80653675045446804326;-0.44743681453229161571;-0.78676177398634306037;0.050798840131303098222;0.13237814255519692042;-0.38518717070535912761;-0.092124965976515454935;0.8490944480060063082;1.2419547246072599744;-1.3672504595783971926;-1.2039686500358124377;-1.4335401148886943723;-1.7294277716028558789;-2.2726059439945371921];
IW1_1 = [1.4455222059201282558 0.16077658154383445144 -0.21389086978840721187 -0.55845629683079445194 0.39167585067720739334 -0.68711080782758537921 0.45537531301196343403 -0.65423206509919962226 -0.063517072910544897235;0.70106630514046419655 1.030977717975767094 -0.7612587206632180914 0.46501571333645008721 -0.2760076403218926222 -0.29471572315271510334 -1.030309858004105017 -0.22395977887691134733 -0.62921414241704676229;0.3165480681163805321 0.64041038365676783428 0.91179320911430283836 0.89257958963804184815 -0.89967929471171914635 0.30795318637391355665 -0.57446548731123858733 -0.39076795022767357723 0.54689904448273662929;-0.019119017624793809007 0.62291112371616597088 -0.38286600269769704985 0.34073311554714080795 -0.44309646285840781355 -1.1221775475175526093 0.43257391682483148365 -0.52611376175599888771 0.96724150374554385134;-1.305528112838948207 1.0767999279805511303 -0.43390293846235877817 -0.26748843362376750754 -1.5675732441744529844 0.44851451157642524548 -0.094048126402625012443 -0.15675353711753869934 0.24991069890598069381;-0.39420493832285147251 -0.80069444267595890619 0.12529512656636423995 1.0444183923263181679 0.88282527610946526231 -1.0374209498541990815 -0.40916526627028293461 -0.15823225540276872336 0.15236240821153834712;1.1076355553531784803 -0.061507114968056005033 -0.72185988893144636958 0.38903441528732896071 1.1115461654781344514 1.1793780362437589204 0.46940923780635440687 -0.25383690792469304487 -0.1299026535809080507;0.78267625363525339388 0.93912289298521689496 -0.42785584495210260414 0.31534260763609689437 0.12671158503862101075 0.55625921959696478236 1.214711732702594027 0.03428971126661045643 -0.61722302945585083567;0.43082018377921310615 -0.20943275561602886503 -1.5086016912660447087 -0.058701217093961990945 0.029709993220124065322 0.49772618992518680159 0.73457255823010969564 0.17293212560076806628 -0.85176784314548592558;-0.75497076030976695282 0.67298481758646289119 -0.32381904578047265852 0.53424135288704199809 0.37346280648743129804 0.88565863010296463909 1.0807322669434302753 -0.85917779865004195727 0.01067361398227395855;0.87529109678615479861 0.20312619513604091015 -0.55825803545941554695 1.1370876302735994923 0.14100456020122140166 -0.6086613028659736413 0.67555188209980110425 0.0079458401608831236845 -0.72472484960708516422;1.3754249997336658318 -0.23801267989426505567 0.48127746347796013238 -0.78807368768656449465 0.67009213316890936518 -0.85882457474541507025 0.59231532628330541002 0.19860229757137731754 0.55559609184065483767;-0.048926537691394225704 -0.31896979978350481488 0.3330030683714950146 0.27630300037473642938 0.45914201881824334706 -0.89004064757529155472 0.91225681023322902075 1.3173292744286013711 -0.15756127912041723027;0.86134236282536125184 -0.20087984292803121034 -0.27229133827645313204 -0.15619837761812183086 0.01674868314065346836 1.6205912662725852069 -0.80887078637179588014 0.48809955408442379232 0.097109023243225650601;1.047897771500912345 0.80023437656438833887 0.32875155571587338921 -0.48784354025192139259 0.42742126176076367106 -0.32849829499135585475 0.69117913950231002485 0.56609900693454695553 -0.56338344842079213226;-1.1213370990088431522 -0.060603124066949634607 0.3345285870683659124 -0.28550137606284270442 -0.055359042981063033562 0.33330728989651436933 -0.74401019948873869936 1.2231946673937879044 0.13502644957681739224;-0.6650841409798367021 0.76628514037955408611 -0.78815470167808743263 0.5466702050506706545 0.017669071132842648075 0.51291694092818052031 -1.130614484646729645 -0.88851311418551903731 -0.11872929496351360135;-0.58539811659270668542 -0.38740334877852389273 -0.14573573310563819883 -0.69794624438917807208 -0.38269835247077971241 -0.38167264718922883082 1.051195264099950899 0.53598461407466180262 -1.0109061134055392639;-0.77553872060152273527 0.29055040728603498401 0.28798192621748336384 -0.25158647250013987939 -1.1329705822946756211 0.92527950147501425437 0.081115133235891465069 -1.0849402140122430538 0.028422290839316841082;-0.91235492255084316149 0.58677651564062416334 0.45602038390331595119 -0.53866773966183245648 0.35639820468312610746 0.41075212586558590422 -0.45362105530317781144 0.96243404121383813177 0.153413627642532302];

% Layer 2
b2 = [1.5079773999104506554;1.2774485674559796777;0.76443529230714357681;0.42393684521618035799;0.12758050838808010496;0.25729775696255741124;-0.58122480813091403906;-0.77443947550446345929;-1.3455258610440221645;1.6103215066388085752];
LW2_1 = [-0.24852725432371061687 0.7316592506698333942 -0.37811021307585296336 0.32750319994753873676 0.46908223597312087572 0.072845532450853761608 -0.36823710518552610349 -0.7663418800906667272 0.6643522275989903747 0.20932829647138578855 -0.14646625933066967362 0.30820618512660402644 -0.076363796426713467791 0.41898610870474795043 0.044622871536794679603 0.099147623540957047217 0.44628268409492244384 0.76886608530194611166 -0.29437060549950316846 -0.0062703836419828826859;-0.78072638693106444219 0.1012320646419037351 -0.57778198668847213781 -0.097158248209556402619 -0.010236400591824358283 -0.063728090367390868853 0.24373494778171342356 -0.017208305581304005061 -0.15104755858823795678 0.046593209814225891585 -0.12778018659803369594 -0.4006448106208932991 -0.5371636885891665214 0.44697134184899678377 0.26979385655102905428 -0.51121217524162698709 -0.054727184288916506938 0.48761523129213008021 0.19946504936244957573 -0.636903291184124698;-0.41095756547410089432 0.43414726773186823605 0.27755834061286704939 -0.88335159209265734503 0.015180133457487518522 -0.35444595980269272273 -0.17700336705045968677 -0.54816482160986512717 -0.26013271502643114941 0.21906268298004766271 0.43111437347254855101 -0.065506506788867713276 -0.013939599140477418326 -0.17105850776076930719 -0.43532455820948456893 -0.22382754295453416438 -0.25046889928304272299 -0.20285941188556705361 -0.60136663134220502691 0.11554538828967368669;0.17319384211836030829 0.23965705011803387081 0.55256957385449279041 0.53276926836428739609 0.56391089999916355069 -0.84156706980462536727 0.33142430231376812655 -0.058591294506648086693 -0.64640988311091840401 -0.013177914337355312729 0.28719980960151580973 0.17140058660186019424 -0.48185108129212439465 -0.26139918319872323949 0.13908674303593848709 0.33001862050850105934 0.29916253656943969652 -0.32056861140299136581 0.52372743863976789491 -0.037005158385265655985;-0.53002190666468596003 0.4578911776427722069 0.57728415128263055323 -0.38826437839038491218 -0.32935114094047301947 0.18154711939264661646 0.060580777530669621678 -0.29606275774427043279 -0.29242178637765808835 0.26068454489029063703 0.36777901855973205159 0.42104456438129433948 -0.28142453511757975493 0.10321680170789021558 0.4988968552391946365 -0.25020233299944183436 0.47983889030839921297 -0.22711191843546826852 -0.57949755597275687258 -0.041055946113805086295;0.52148779223722530052 0.06220655345343441972 0.58340142180015230888 -0.13331635794455987121 0.44477470646642069951 0.35490637823251919292 -0.14528830821877281032 0.30718300045835988943 -0.60761068400528017719 -0.35416684816573545946 0.13767334393953631344 -0.46470396626292820308 0.30983600616391626659 0.24240020466950373823 0.096519798011092838852 0.18247561724901151248 0.40103226627667076798 0.062469979413220230735 -0.089852227566750125787 -0.47622314280847610757;-0.48032727888967691188 -0.51963809790321335846 -0.11501206946207173654 -0.1952210464014545177 0.56571316225831158597 -0.28382046072078270793 -0.588093478356213617 -0.079683285836846945438 0.8171906869435905385 -0.075867449739476136572 -0.2352191766680064855 -0.67768353747733434123 0.42982644540370151809 0.27067358946591579816 0.13129941478799983523 0.015353167873858958314 -0.37797745154088829844 -0.65487864713615828727 -0.24686306370002134014 0.14792312632640702841;-0.52926693329864582527 -0.10742946884618526093 0.15742517250356430347 -0.43033790928060944303 -0.31056176645150568305 -0.037895654493496466753 -0.20221683226676012701 0.26920094452840465094 0.36430468609612870479 -0.49653437110682330236 -0.64755563538321392336 -0.46066477655908733002 -0.59520918288920054984 -0.44467351157404733097 0.31154509824498988202 -0.14906828988493631138 0.3654086896791930994 -0.28665353528710713071 -0.28050868896905867267 -0.14108745375819742307;-0.21022655988714755715 0.26717539725717909249 -0.19976477222026201019 -0.025094434248449301594 0.99716982362078476765 0.15042085944835514866 -1.176539299450601872 0.36648414621103053701 -0.33062129331626610718 0.69355489047996099483 0.042548112917287890522 -0.59524081763371050613 0.25881177542050798346 -0.074638750615659957277 0.081492116691979962773 -0.107113711278513421 -0.3905242153809318495 0.15249521375084804098 -0.23000761531977903518 0.49851023925272580639;0.296652930652334057 -0.36736874799237584366 -0.72059843595710526554 -0.32506267804367139362 0.13155147087649232684 -0.058680118639234543632 -0.29229456594014430193 0.26078836643728497968 0.17369834582026733028 -0.084165618427549340752 -0.16915307285298172846 -0.2790105741645896309 -0.29829746128657452786 0.085731873490180118824 0.4999439693570353338 0.60267708712349454814 -0.44146069503153212432 -0.3171308357226853003 0.022358575066413290122 0.31944513554491482665];

% Layer 3
b3 = [1.8816759752462637323;-1.7309738132491825358;-1.356407824474039181;1.4850081126736465187;-1.1360535892963039561;1.0520596270968676222;-0.60620020529352647287;0.43205569985968939051;-0.11172207649720850009;-0.1873444699785886125;-0.1242034792888592476;0.30175760856163141854;0.35860207450545905639;-0.80294503922058402257;0.78828401118909585676;1.0497495568274821665;1.2711999790503745178;1.5242802108303037389;1.7752789891624616292;1.9800935616977308751];
LW3_2 = [-0.89778854859336476579 0.95389713785460783502 0.42048958605333941474 0.46320796956039150816 0.54970935901640949339 -0.0012137942175483584784 0.38271634932229647852 -0.29737158022049597905 -0.10406555501517390783 0.94798186536592354834;0.56199326636474011831 -0.23772896820798469775 0.54924557653975647487 -0.097199231446975481452 0.81208371460590456081 -0.28445860921422605472 0.55456075965730922128 0.18812129619521700263 1.1829467020968433832 -0.28357335087314994304;0.46120588987388350111 -0.068828617616604068075 0.45051763451491999568 0.94119285036758648655 0.39179490712783010542 0.63871346294611497374 -0.61744227167061682682 -1.0726310225141688637 0.6320719959261100751 -0.49007166868555845918;-0.69295349806138817339 0.99722326440426434235 -0.54123564688566527803 -0.63478231452118616396 0.34678706598030689667 -0.46676076576212371938 -0.65150813097682847008 -0.11808232824827590013 0.42430992569467707032 -0.13933639900995861693;0.012046824793917580362 0.79848395731006316378 -0.83794958011569808942 -0.43786135722987784558 0.52169537948880873035 0.82308133054280618879 -0.34349093934333480016 0.23953441174187911633 -0.77271235710489516446 -0.55718230994232886832;-0.51855311211553212214 -0.03048129388498054676 0.58887209545411400846 0.16087499633651552999 -0.067597177859223228635 0.11642834400013135632 0.36143670250234277708 -0.74622778473969253454 -0.6098616015890137021 -0.61850771065487497591;0.9003431365481957549 -0.6013374420770902784 -0.65104779236988252755 -0.02585678610406124886 -0.81141115923722961778 -0.11001401762695725561 0.53967878404707381179 -0.28596344958849673201 -0.20579689790484967382 1.0236940111072549975;-0.58017803829025438311 0.4522708743338106907 0.73697659948666327523 0.45896564271642664723 0.5874538739144460342 0.63819327359962241264 0.52885430085185114457 0.21163624746750991923 0.90751362892121867354 -0.35641626159719413947;0.97976281145024346486 0.53612578636686369915 0.48158719989119719296 0.45220140316078122344 -0.30213620898824322669 0.5344235742727226901 -0.55344339510741458188 0.021237344475560398366 -0.96625281594983813971 0.38609031704652196915;0.13847304561911646936 0.72691743766945327021 0.74479812219823648967 0.60942826832107843682 -0.26004608011259694456 0.022914432548070396561 -0.2597242966307832801 0.76171997676752900563 0.61953625748316021316 -0.53702793017189309754;-0.2555218998672150188 -0.80946934617976484816 -0.81484921526863507424 0.85814062215993502925 -0.88424406833915747406 -0.092103809006137057902 0.096769333228560988625 -0.36447294335919405706 0.30044137211978982904 -0.67508874825667264385;0.11905247156604668868 0.625978303777908196 0.77880969433011837388 -0.57228695282430108726 0.32905238496850913732 0.080475294005211944759 -0.64943182690780887345 -0.67335335435488785638 0.75365913312442367467 0.80474766549718190767;0.55777811543414956841 -0.80572706250911940717 -0.87244765266031609752 -0.6834663561323767178 -0.13393989468945571852 0.15483359474267449629 0.47914106019906743672 0.65169747253209342475 -0.46358634815017585318 0.79161888595620577558;-0.3522626880140968253 -0.82937281503170667829 -0.16728039099673291945 -0.2476010289933749664 -0.71752194018787540664 -0.052174108306087055298 0.87784014862298231918 0.45721698826868056864 -0.57799573035845952518 0.77653164719309386577;1.0150147097237354199 0.69695461725431884226 0.48923043823200756952 0.037661449451830329715 -0.066661530255809758883 -0.67454188116319180324 1.0415413949382503755 0.79089931707306493358 -0.43137110798126820921 -0.24388230906334568138;0.96144566435622125233 0.97610321764038165959 -0.019230816162000872321 -0.30353133681913158082 0.89710884697591497527 0.0063865672035141284046 0.28972732126753514281 0.52070924411313190827 0.32010242380199255274 -0.58324741142035252395;0.81681023949300024523 0.18096382408856595547 0.71718825435219812903 -0.21924656889800059334 0.25904140390310687048 0.017472812110747994868 -0.33438238878394421771 -0.47125701646310858006 1.054539352948907549 -0.89646982156142962506;0.34654843055455003542 0.63345759819587899031 -0.18073149397404958405 -0.05624704993010427867 0.07716983899422923121 0.91178626684815100578 0.5364398948763665631 1.0232668454183471152 -0.42624572284741091277 -0.70615594888172261712;0.52360166409752273431 -0.72298250166177546738 0.82848895816342038589 0.18037491488344445378 0.30268922676587456388 -0.61277953111833594058 0.052882914489774959788 -0.020220657539176224021 -0.96977563613169781576 0.820556004496747593;0.43916509456914631926 -0.32074817108944425614 -0.59549658919561987425 -0.020945091022328415908 -0.68724634539590168103 0.25197427618389361959 0.69389424627555951197 1.2181526597887655239 0.71716744896105499851 0.95755788643535721949];

% Layer 4
b4 = [-0.58246756192564363985;-0.53495756923520942916];
LW4_3 = [0.68221670201766049235 -0.30241663254165151997 0.4532096172870976325 -0.45280026101018067131 -0.44297046014428181904 -0.5678578028807332867 0.35174381946000526922 0.61241322713276757916 -0.60861512042023968583 -0.38886224959246984412 0.46843206084979854831 0.27352400094929957275 0.20627540173191710737 0.027115140100051449146 -0.17399355118445455903 0.089715084748816856242 0.62342718948299769011 -0.3579563017021775706 0.61875681352912192956 -0.11250946282144125288;0.48434301878185509471 -0.099277070936184291794 0.083322813301921871965 -0.18346514674104041909 0.19982000652241663219 0.4541591835426791457 -0.37839388455590872162 0.50212219709671712664 -0.32752940155093113184 0.22274645294422357189 -0.51281268375353317168 0.36149320810999430176 0.37546940462588251908 0.52936594082317744991 0.94649771050744557765 0.47757525902483999314 0.22658039301092575135 -0.35863489400575937482 -0.87982311776669785974 -0.94379438332048537497];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
