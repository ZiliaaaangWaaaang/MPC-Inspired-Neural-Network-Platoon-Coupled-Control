function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:16:58.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.832381007605849;-0.639361590405926;-0.695257580172501;-0.656730875905293;-0.736217511301753;-0.581556487918271;-0.92174258681972;-0.874312231364002];
x1_step2.gain = [1.40069505009147;1.1174848563727;1.53491027182406;1.60065309370616;1.26826958496911;1.28329478701394;1.60565698304423;1.07739277011203;1.18705279589493];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1692343316593221125;2.0547830355423397641;-1.4883959873179146705;1.1734693168213432557;1.1470717356602759818;1.3144681890047693607;0.85391820854525302131;-0.30934637160493511088;-0.40242953081409388316;0.39184794374174158893;-0.096524621975181218447;0.23296087527610320755;-0.41190832893305978635;0.52587127895595653371;0.66336256106243518538;-1.2684988661143370425;1.4570457158604381842;1.513442914722981758;1.7218531386619879697;1.7747998655255421419];
IW1_1 = [0.38270240323105619851 0.13647778534215948554 -0.80357666563394936077 0.19297956690249976064 1.0853737019718538992 -0.91315111989357278244 0.68230469296510676269 -0.0020788408408188019383 -0.71042603557696926142;-0.58311881005255961075 -0.44938538275716843895 -0.61570601323608431521 -0.9142042900342209899 -0.89961322427195022922 -0.46428389118384993939 0.94876688184083934896 -0.17419565879391435415 0.63958564323878608349;1.1525788073112703813 0.0034616750488023761978 -0.14216362620978514886 -1.2762873000865000428 -0.81286641734217357502 -0.024928681806014173217 -0.20491606660950245633 0.54586510882409111645 -0.29457372410437709931;-1.2067531032218474785 0.50855024367229106907 -0.62472488757719590868 0.55484859251718132711 -1.0777909709662050197 -0.63902729489628096182 0.0837254461910397485 -0.61735999002316033213 0.53461396619671941455;-0.12310399709523160705 -0.819525740722792162 -0.066563128618120137592 -0.0033609402882541078439 -0.83343748581744636628 -1.0605972049344174479 -0.62338959739477484145 0.69263976999578802385 0.19406899161092852624;-0.39260729211836176145 -0.53471411678043123672 0.65184468405988815753 -0.78478993111384010017 -0.51539888760576801907 1.0522918241567125186 0.43833076365986706202 0.24834541738772616948 0.47724728310027514366;-0.082154341578635617371 -0.72039026149734008975 0.87784955660966956792 -0.4846911623686941395 0.77932958592614998139 0.45955198202547098418 -0.80080108033241881316 0.71322613610144891538 -1.0619768352009393286;0.84504155364780220161 -0.52058909328129254757 0.25383306243404368807 -0.10024007977558418991 -1.6523902685905227372 -0.91355352013688262414 0.61980932650317688282 -0.68676219287826101301 -0.49816786320752193262;1.4337596862377237628 -0.39138504493657244598 -0.22266237688146822693 1.10205974841044263 -0.53873909586197110677 0.47142510201548865068 0.67177728944194314842 0.31509777323861470899 -0.17962798666680007686;0.35916537817146204636 -0.4271104970195314654 0.18874478913394290847 0.25181241686617439335 0.56213272973702455015 1.2462465665684725469 0.61270136978966416308 -0.70342618145633528659 -1.0993158870821553297;0.69235045993489052751 -0.87506183957958039166 -0.85741557798583134531 -0.36286913506742024538 1.3656918904274299997 -0.52639381793824602251 0.64465755319440243287 0.2191936375734700182 0.27220743150590509529;0.68646692328499603342 0.050319099634191732928 0.14343121173059697471 1.2687641160408720253 -0.36777651731106969502 -0.74151537424592683934 -0.069845053263610137884 -0.83928878376136095696 0.83735218120286680765;-0.72742848613769650612 -0.869324215327144878 -0.28119391997270359873 -0.53027275415469521391 -0.66108863924996719152 0.49161108530889646717 -0.77041371723302509711 0.31101760021495350461 0.84539591617251930167;0.88154147019813788866 0.037078776373459798599 -0.32582244878317689896 -0.17230230840639304546 0.11093530322299727242 -0.045099860082194312416 0.55036776136587861608 0.92273467673953901702 -1.452074082421727752;1.1587911711662974845 -0.47990121537411745134 0.27704410072097396256 -0.044244368813924232764 0.79541949557127855641 -0.16798106512579097371 1.2771225306394815568 -0.89598336056630634161 -0.27946086168200867661;-0.86195247128609209231 0.47574908096150697601 0.25349387033519671375 -1.2627664880897595534 0.44292328656079316129 0.21872079332875885016 0.4023430085602016093 0.50926881594415929211 0.76338375557820570272;0.89968957847914421411 0.064008172447443958952 0.88968131251281723504 0.15142755740452343294 -0.18958528631561924471 -0.43612876293105956593 0.97788535186908065455 -1.0915945678293543786 -0.44514398986490133492;-0.041579953426284371742 -0.85003345304295674367 1.0554444177138011529 0.81522368995028693384 -1.0628191405312130691 -0.36092907822983627542 -0.61279762590162334401 -0.13859530238663816948 -0.52512260597127824457;0.55359269667386357128 0.18988325401753322619 -0.446095144625081097 0.50701135086976167887 -0.5566378436523078399 -1.1642699705123871201 1.1400470841471899153 -0.34239606226465546523 -0.33421113446570127614;0.076787146477457823845 0.50366090989183653903 0.58661778159518584985 0.3742140254582928538 -0.87761883514136662665 -1.0847845665941837634 0.34056053824959081622 -1.0830292193322752503 0.36527513242843401287];

% Layer 2
b2 = [1.4566198856015681873;-1.3343617402936487348;0.80864257100198322359;-0.38198141360520854182;-0.10267879604053793685;-0.067619035455847520399;0.56832241146015027855;0.8140920823885636759;1.2714480399314909143;-1.3678771495224357757];
LW2_1 = [-0.33243530402534604562 -0.81620475998185626487 0.58038226127169423307 -0.42184098242012801894 0.17588054919665463416 0.018412260256178682172 -0.25183558637029512806 -0.21668841724910145596 0.71335232075912691219 -0.064826602477847619643 0.27413201822809063479 -0.40829252103768298721 0.12839989415728134126 0.2207461401514809185 0.48649734339199379729 0.77793358528862111001 0.22278370953046977565 0.043136963757986840351 -0.38942022419995431237 0.19515857144429765713;0.53783595804373673932 0.32398012406549292486 -0.29458556779872679954 -0.50435312073743365779 -0.3963864740430058653 0.11527113733038504839 -0.24350402400043624773 -0.56485551217582696815 0.51045717719491157105 0.91333225879531798608 -0.48473972220943861711 -0.10369149421329387772 -0.28614999141034153096 -0.44590881185768121986 -0.062617898732903881642 -0.22002732859448664859 0.27396720706642868626 0.0084984095967608544453 -0.53768770639555296675 -0.13854127419604922444;-0.30750626235120825935 0.34517745179100922659 -0.066306133992936500121 0.086697502423290148665 0.029843000015839150907 0.13732955561716414516 0.24108757632381588865 -0.60850627624573350172 0.087996918023733758374 0.55704528262788954862 -0.43763171112986448685 0.4344829491235084884 -0.49235979457884510024 0.50014212727744422615 -0.48867431377355974309 -0.12078045358950370569 0.33655780185681682948 -0.085537165856517313745 -0.14666271775458786242 -0.46871835102905340387;0.73345689657006507556 0.28292506134292055853 -0.48722329182883505894 -0.21705886125960455191 -0.2290364510550504662 -0.13558317512476858457 -0.48642469867229548575 0.1914857887024331573 0.4368147059039686475 -0.43224755450471463725 -0.98775481537295273249 -0.40390061427301909847 -0.080705513657601854471 0.68049602054783830951 -0.35288028903680390691 0.19827532836001920957 -0.11764762756956663459 -0.91845465133068282526 0.33582311909881290557 0.35447308497585339193;-0.48154624229523673717 0.7372684920373092643 -0.13148265808672360277 -1.0017308624715084431 -0.011840225724227878418 0.52583824308502291611 0.43088476679916731804 0.055556032123952860113 -0.23693081087932629791 0.36491338106825199628 0.21030900459601875596 0.15534504363693327211 0.26128562268063248997 -0.082188370628089368886 -0.59198482764941129375 -0.002990296772959560867 0.14776105467715780484 -0.30794199088288914945 0.50941479511905252142 -0.54471877709715754712;-0.10509018656874305475 0.069778902314861238065 0.54956728571127899663 -0.026991253357662475798 0.13703259092496916649 -0.43792831437852186571 0.15660916085936721354 0.032189076034710023544 0.47861559575207712758 -0.33553238333425539075 0.37434822348037055662 1.1050564435401533103 -0.26813421368820600232 -0.32906975510292180154 -0.4498897895311432249 0.15395979685717664509 -0.32624892597555632534 0.16320730525650867238 -0.38473803452026172911 0.47510982386523165077;0.21034828978869651861 -0.49984278531856257688 -0.20145201912858182181 -0.1391635821024065911 -0.82020369951356031368 -0.46763554708912924429 -0.16583033534391988795 -0.35704747970233557952 0.22413331450112580767 0.25301562254888904091 -0.30739537085074691847 0.30058065931052846409 0.027529412042996428966 0.18438648456164299927 0.19043999666645919366 0.27251237320890053795 0.64485548716536500446 0.32454820131119049842 0.30054863994123343085 -0.23840199808174378227;0.78478559844319717431 -0.14145780787322173588 -0.093523938872254228083 -0.41654084099032750999 0.42511983810525011407 -0.41165161322757237716 -0.57752865362759653323 0.92436144648279550129 -0.20070219632752603345 -0.072031331090310055099 0.73073588663421829015 0.53931761735981953443 -0.36788862837148156304 -0.21383876031675583262 -0.047038067115976932298 -0.19123278938380675052 0.1961299983956480697 -0.4014217181613033425 0.28989291449236609388 -0.19603977055980159605;0.47342623936593619671 0.33748872534552826208 0.28614431286817826328 -0.35756261549221840523 -0.60987819185100289321 -0.55382788166021013065 0.69612805144481859632 0.31656922163530748504 -0.40609992419794099794 0.0056674957630056810309 -0.53369282723941058322 -0.35506199145234995651 -0.25759451795869559021 0.66209453099997639391 -0.79409203739180367343 0.054513987719274910326 -0.47593885507075767149 -0.52556312388186754436 -0.3411844639313320604 -0.03833320683658991701;-0.27243671192337398645 -0.64655049146083898304 0.4304633401682951277 -0.32424730373368843006 0.064869638056853529129 -0.3411225624251095212 -0.25942235306121924632 0.25005412679059474401 0.97906120745273728101 -0.12311240730470637827 -0.15795948670539852743 0.23740516698826449882 -1.0194023761403177009 -0.13901118104457649283 -0.34767419107942487688 0.29074457525952379644 0.40865390070116297538 0.021896438139149487778 -0.012127355655505381998 -0.23277767870807539174];

% Layer 3
b3 = [1.8790073263132076598;1.8263087239355710878;1.3821331956147853148;-1.236920888147971187;0.88838282601182816389;0.96320128910170377257;0.49498147570516354277;0.32107838408852407142;-0.201397973411844039;0.028982855921059941934;0.09748337628967726487;0.20330498320518966548;0.38112626638549779168;0.44767242267118934063;-0.84739879497877523828;1.4138820031578336334;1.2591524738390853511;-1.2005800789381573246;1.7429379732977798856;-1.8632859968299904097];
LW3_2 = [-0.14074889075419411144 0.77915219636335497633 -0.29909957450474128349 -0.64396716837978329462 -0.88572705557065800619 -0.30183320642112371202 0.81465373773457150364 -0.58547530874640929532 0.93451460701963462441 0.45674582003697761223;-0.21725514755858205129 1.0260296986529426899 0.50378375832563715431 -0.80981531092161407326 0.29010788165761175472 -0.19145384673984042201 0.15501207025280039353 0.036874027766930633776 0.97966671986702935637 -0.5101346371819723835;0.076765497089806122855 0.24312268451987720241 0.40721156459504481706 1.1686877208752486368 -0.15681162607991888658 0.15343425661177412245 0.8451775247266133384 0.49103247989590004252 0.98981807279916933506 -0.1718721862197405692;0.31665550488013277652 0.78480737513124376736 -0.56757106520062428068 -0.046345475019477763712 -0.81639111376948192422 0.24371810457714360165 -1.0772045221516013402 1.2116761544545282536 -0.29800536179392711489 -0.44824408076443733595;-0.38472017394591523365 -0.87791861832818884892 -0.97092730591232034865 0.7919081762272879299 1.0437420029886999018 0.30796909315737686086 -0.099887131374976206866 0.88163398807133641633 0.40065636067070015125 0.37219193970222014256;-0.73618994199811116363 0.2882181026993138051 -0.57269379140049170296 0.57306113251972867761 0.2392463575759289085 -0.48887470891006407081 -1.3829892187266015213 0.29171028992154879322 -0.47364011058210980787 -0.0031193676242003975929;0.18361846630779318779 0.2182879324291721046 -0.287401887253725008 -0.75681467881453778901 -0.86445726958647728377 0.53349241729571117432 0.19749658668312225496 -0.76801177835156209106 0.033181446195146804823 0.88149144887901043077;-0.76980362867956697581 -0.64107228831518314749 0.4389718032631910738 0.23959901823918380859 -0.42659416252521076274 0.095930161551459697256 0.93490542418000188718 -1.1612290903019975019 -0.40751605956424191701 -0.85274046719496654489;0.41820325294545379613 0.60060678793129240738 0.65860267803638339323 -0.91298961477477569293 1.0473700109156409699 -0.78975361596547333232 -0.21834469699346659155 0.90775991694608004767 -1.0504512858813641607 0.06060125883257452134;0.76120358692480261098 -0.063291809854903152699 0.91952785805104952921 -0.2837508966796686849 -0.15824743268399726892 0.2269646527196768071 -0.74979914780967016341 0.29409779881233871768 -0.91880120255134056784 -0.82394608086756571108;-0.90736245961921402348 0.38973548460546147965 1.1660154362188488442 -0.92289243185590708052 -0.14532967360048451577 -0.50160659702660337356 0.27334532697230001785 -0.79605805003514962248 0.52679974254039574344 -0.38704785999650426209;0.21132724129085389553 -0.14022094092551237732 -0.62503822729491831378 -1.1382080456906245036 0.41520123533457303777 -0.2400600291704362288 -1.0986560908366806988 -0.64185579806360881783 -0.38057632434152272038 -0.42631553402995503443;0.98052645838774776799 0.028542367930686915467 -0.71031648841227312818 1.0309042219305559751 -0.11553471311408507194 0.91866191169106237169 0.010715190658782746541 0.21412226594956662584 0.18837246499947685185 0.67758248231628370739;0.78070716149049812493 0.8271022185010628025 -0.37368441702481408617 0.67090570945969096872 0.20960837997511766462 0.37000037075405339815 1.0452622871275418781 0.59491160169040024908 -0.52705747695997429147 1.0881919249054616827;-0.44143678354366855388 0.96649783195934635405 0.55096775822392862754 -0.20533891908788856617 0.14504942139472926099 0.086859015196910110967 0.63435375198008703279 1.0230085118083585005 0.41632524743857907135 -0.88673083622942905357;1.3150081393498864735 -0.89048294542112282901 -0.17903661045698812671 0.47295007103572228591 -0.133379314277991462 0.29019521836208744814 0.95907386041426845313 -0.28906588850452974437 -0.19476056496131724516 0.22184243226962305218;0.66402864450405230112 -0.61669614541452533185 -0.48396730630016621122 0.60370387924172286276 0.76475668257056961252 0.5544585195258534549 0.033163853664838725821 -0.18840369109458063313 -0.87219023599655076673 -0.79582680924340321038;0.044426346485397338881 0.1644851332828357604 0.10841288056446900245 -0.57823729611193541711 -1.1467398127766150751 -0.32557471085430689239 0.20124704553758768211 0.63177579053710597456 1.1188819025697669396 -1.0236722900705619299;0.30018341169410867053 0.85424956103490357062 -0.63554424521278429783 0.0080505896147453626099 -0.79447275274726691929 0.90669774212150222592 -0.44627751690638056692 -0.4177406529604459906 -0.2747437051390581586 -0.88027425896203648215;-0.10971566895053427859 0.01634996094033013686 0.64840129851235928093 1.0902728690509970733 -0.93048733334374322812 0.36605539915232887527 0.46665641355301573645 0.93558866760519432404 0.78175728583278514261 0.27151931653904931574];

% Layer 4
b4 = [-0.36200524981001747094;-0.44772790343673884994];
LW4_3 = [0.36564646687690122162 -0.65176301885114773516 0.7657791405265166329 -0.075327747348307730335 -0.54732276897739073895 1.1300417190884832763 -0.11647673086199678005 0.56054336555527706221 0.61838347139601801405 -0.2689930398354489216 -0.21652546811738604404 0.073640404647603574517 0.36339369544034794135 -0.71960218053572633234 -0.21944807741732030859 0.75952787820824652076 -1.4062953907742414827 -0.14345201831406820259 0.32309004367809718294 -0.025563793293286184855;-0.35807298541224552579 -0.40191925310550757899 0.27959292046117489861 0.86118944023435761714 0.46650326991807766763 0.28880735760734083106 1.250204981084706457 0.6789718303591293358 0.63347194017046204451 -0.47839131358792752469 1.0019521991838022945 -0.86641300992214820287 -0.29335588545527868654 -0.45708640561633606669 -0.36786381190372230421 0.13828446487104456564 0.0096245938352530202575 -0.31908284394633384951 -0.67921963826765607841 -0.74712523271281072734];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1.01639162834449];
y1_step1.xoffset = [-0.999999999999798;-0.967745447940794];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
