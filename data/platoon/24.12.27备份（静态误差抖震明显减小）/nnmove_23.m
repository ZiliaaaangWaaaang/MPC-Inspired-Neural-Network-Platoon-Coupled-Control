function [Y,Xf,Af] = nnmove_23(X,~,~)
%NNMOVE_23 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:28.
% 
% [Y] = nnmove_23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step2.gain = [1;1;1;1;1;1;1;1;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.8217540031722438965;1.3985251390704600549;1.7032803106450926656;1.5667442899743704299;1.2309017421025283401;0.5958413693002753142;0.81472557600797745891;0.72400848330638156725;0.43917276756553896844;0.36366622181431851324;0.5229038191950897696;0.48888421004096482836;0.49142987061386816938;0.66108858687079907757;-0.87919487252749528583;1.3649065320017164105;-1.4514331547129282196;-1.7234350107317641942;-1.6218260465156182359;-1.7675418945730263509];
IW1_1 = [-0.38646999671285597877 0.7418241284093012311 -0.7843439026943851422 1.011257900883018257 0.67484887575035101825 0.61692482870209874868 -0.024718605672972526061 0.88584967670982550647 -0.27319609304636299774;-0.90975708506795427422 0.13198900239210087371 0.27080598189933585695 -0.2131404652220852125 -1.0522567941016081061 -1.1718664542341263868 -0.72719046232619044545 0.4365931269795698122 0.57483025495370432267;0.45558592046695634004 -0.0027496742275110678394 0.41211939301717409601 0.65135658430280851672 0.37355024159159527786 0.80701449618137022224 -0.32987898352924782674 -0.98342345218723981048 -0.86725133922324892932;0.014245633127562565279 0.91463112048558603551 0.67181460882088306352 0.4085856146924604082 -0.80611709213932503104 -0.77127605182571312703 -0.85748712622635570035 -0.1420335644799221031 -0.83554394128761866334;-0.19483187922138830994 0.98981166022145428141 0.25721956153829478309 -0.50426192713371642551 -0.21113812654842564753 -0.84893658787277304079 0.67027124404246174461 0.69027970496783042087 0.57076233013402843941;-0.97414997424853921881 0.72470726512057204172 -0.92964359289445208656 0.36084815229755556887 0.1234397499529892861 -0.90235038710758519453 0.77731458311730716737 -0.30246327590387966922 -0.21071722721244795506;-0.66597234289816154007 -0.65792075819615536414 -0.47178829585483395004 0.13639005897693079472 0.19813424783540867224 1.3771797820458753225 0.07837706352502893381 -1.0065972866674879338 -0.1586047192263399519;-0.90837787467873998271 0.67292723402835896707 -0.50570997128933603548 -0.723258546374244915 -0.68745826358574224635 0.65023189838629413817 -0.84170783389003711594 0.74355589216674056185 -0.13074266846976387302;-1.3614581030953438745 0.79165776068379001273 -0.17725519945446865933 -0.54976524188998177056 -1.450452706453321472 0.56163148852016020474 0.23807910524381259432 -0.29754924555937994901 0.23944674390355311089;-1.0404130774231645784 0.87234540575389984962 -0.10277608321996338503 -0.088646785922084608833 -0.50638873215130975058 0.94664990899439638294 0.63668621870601127544 -0.7435616025761223602 -0.74619836082749291251;-1.2354641234719758724 0.57565195059129736777 0.7764389463610559261 0.95700846115038895601 0.010439256303852971486 -0.16056010766570294468 0.071018056176761823473 -0.18011058116530986872 0.02226541607059974448;0.26913026009332341459 -0.49595385463692565065 0.060432588742728152176 1.0731974995072193213 0.39984906516208879035 -0.9783585763034332583 -1.0973279800583597421 0.34942495549077962069 -0.23229408409794310986;0.71920977401226204861 -0.58869197623152569321 -0.014724567419278043745 -0.027955690399535031848 0.97580465678760941461 0.40585695689717221635 0.2519382165956863262 -0.89102807220804436383 0.40640869899962489553;0.88250917305343612451 0.69957968571087936205 -0.9840938523915694347 0.51109520552820020267 0.19478152452099808944 0.3673160059993453852 -0.54979371057649473187 -0.23066984838315271467 0.5655819284369477673;-1.3938366179181336246 0.64033310801142417912 0.85650554983779070284 0.89571465200029698472 -0.19138903721830011206 -0.21290303915166622351 0.58291937672810156812 -0.17625607477117777311 -0.66441191208345740105;0.43388881514795379912 0.69743454475917621149 0.67017983535139225015 -0.36167942296714722383 -0.14091243634657757422 0.80868458955090039009 0.48188982425463855463 -1.0058461684741570874 -0.034549770681351475721;-0.99543169076573512211 -1.2646496500449007083 0.52586802001508869964 -0.50056080950118964079 0.35002657970526235287 0.57015339132647013809 0.22628171315424483456 -0.32091504865956244075 0.18625463770925793083;-0.04738034626352330414 -0.5719791381607760572 -0.79273082185955545675 -0.68272376082640628958 -0.16212497428392605436 -0.22683000477776329995 0.87007855963223246221 1.0322790676919251229 0.14900073777367678352;-0.45056829389032165833 -0.98222460696999447372 0.76744231074300683915 1.1033148742960898758 -0.19276994317338194684 -0.49926157965507200753 0.10278750352796861556 -0.90993250685217663687 -0.56650927474255685645;-0.24307027210216866631 -0.17822103080964696309 0.93730098516692605948 0.89284767213666094143 -0.31849573972498940178 -0.7893595566648563544 -0.92692407219942440921 -0.80228030364895264182 -0.67082342205520295586];

% Layer 2
b2 = [-1.5778416381367368349;-1.3182118744906543562;-1.0046960906247188738;0.67532541211851948582;-0.18055960067464912888;-0.059404085725217221914;0.53893596620624151239;-0.92492253957044301416;1.1369749223366536484;1.614628896845420325];
LW2_1 = [-0.28121112350974974969 -0.30633010733130056069 0.18689487655045791681 0.049080607096515807553 -0.35490409034957975942 0.042852658305815055639 -0.21549689023361817686 -0.66495917278937177741 0.096413008283419143751 -0.038540149970010165181 -0.45071837658387514658 -0.0069242676292463863422 0.38505631782781662986 -0.34484883567650836955 0.26524276134201257848 0.36744529633838679539 0.24691955033249537999 0.31850447373974849485 0.59032718672730977172 -0.40808916442526937951;0.22328702604295005973 0.026518528661141436281 0.43960858891942994342 -0.46071951879915140626 0.31274451112424694887 -0.53298479539511378622 -0.20930215025808995843 -0.054309060610536377678 0.53277218152726379952 -0.20733544691248698144 -0.27786847737096320721 0.14752033469523367915 0.76217296252713062632 -0.075947000435443445809 0.32317219956544795956 0.36712871031952815093 0.54820992646567667794 0.0078801925339942839599 -0.42625229404635556207 -0.55790945939782454754;-0.04699024265846013515 -0.70908245087876209389 0.049470314284176461483 0.075965399630748109416 0.32816528016130785961 -0.57703977002666639873 -0.21638577617177301438 -0.78610780345362718524 -1.2139143195863049129 -0.17658621336101190669 0.039928295127552249077 0.28285749863078757382 0.46535334286177770791 0.010745136910888001061 -0.95547534507995579567 0.099136372601836345031 -0.17913851163621050122 -0.26380561465980573166 0.079623587698107498034 -0.50035044920914995004;-0.35773302503248982642 0.28796851073678397803 -0.094242167900731518837 0.051743759217830281871 0.2316570625057708388 0.36184716288236107307 -0.017228593892340170884 0.30021587993662129934 -0.47589210941630805118 -0.36455908362706213044 -0.76266447399281678265 -1.0014674638716105637 0.068568714417903214864 0.16754565435124230133 0.42053216949806632163 0.35006987486942403587 0.2603675772282570966 0.003617655084804693652 0.38190615747335582286 -0.073651653757012283674;0.33553793805699855257 -0.56829271508784440226 -0.31315418659612792585 0.78558039031254855988 -0.087726668133454019372 -0.6014763832106068131 -0.29610761958436321306 0.22808576957663098672 -0.63052659920469544819 0.36253412950147956284 0.042028447770848964549 -0.25337676860999569506 -0.26374377116191860537 0.52716259370042783949 -0.12341941659206520643 -0.52936992323739395783 0.096280908527580047473 0.13092835743212130617 0.21548123434115268315 -0.11093331297631771337;0.035759113461697272784 0.21838373451007228598 -0.45054766625619463438 0.73440576457720507797 -0.076188843146301241105 -0.10576216584669387299 0.37059355150683692681 -0.72525357636620657598 0.23392280463636844212 -0.20239001352911423215 -0.11004709600891332544 0.41161185027942215342 -0.59060414917634918019 0.16424098558122485203 -0.14546080870972413757 0.079480145743930072366 0.038944748663030610836 0.39212876894846604436 -0.016474108817455073578 0.10387480891772164771;0.48967487044555380038 -0.18730088166829586549 0.29381301549853822142 -0.1536686865733435936 -0.35425391789382387753 0.57952296346971410301 -0.28021722547201055598 0.47269654021865836757 -0.035800604743302863464 -0.48234757270658645822 0.0207795547196402558 -0.23966739467081249471 0.099615957161859308711 -0.046225787590632241852 -0.46330692131308848225 0.28853546897234005897 -0.36786746564761502176 -0.38303573815797931079 0.38213880402295002936 -0.14927949703580015162;-0.48696318908359942368 -0.24511402288007577699 0.51422526519321232197 0.63997514605852678926 0.12054822566161463304 0.075680814905922627611 -0.12316603186933550163 0.68502088584495712809 0.81545360742574746205 -0.16046249174448057317 0.44041592002501323 0.057956568841133232484 0.068384006107926859075 0.12368280241459012059 -0.056285466833536558495 -0.22152541326355892903 -0.13083564848456805119 -0.12687854359120537273 0.52098404025347389013 0.20354548000290176302;0.14020261652859686285 -0.73777064410943904438 -0.17910079919311397423 -0.35207740478317783861 -0.10658983151564799252 0.39553981928025738757 0.65753246235074302994 0.69275348387136981287 0.51903555735895179346 0.66942068116190656113 -0.26993127328313426538 -0.1403844023478154901 -0.48330488371850921503 0.25148944814631285505 -0.1138341542074385454 -0.086535318115141465767 -0.062797029127197756537 -0.16971870264715122056 -0.88072499583640384557 -0.039090252926508903264;0.38084490282860911092 -0.53756752255208151148 0.31231232700474081954 0.38749202987202552295 -0.14764671922404334903 -0.40545995996704459197 0.15868123477241452557 -0.39270844605239757508 -0.007998186666748006643 -0.11405818883327872859 -0.8541887800285432597 -0.29266349846590483663 0.29219940525442861246 -0.048017769878291087504 0.091371010125228427357 0.13676632538100727543 0.31756853657777600608 0.078644702523582674103 -0.48998885866300539993 0.1703761439183553994];

% Layer 3
b3 = [2.0431055211348261302;1.7272258934900759364;1.5869876708919581354;1.3270120225405270808;-1.0832326568593315663;0.91134756649505099801;0.78137652103483090649;-0.44600548872241718712;-0.20502369073354809181;0.10625188782108244134;-0.010173213805165150225;-0.23689797523433539506;-0.46565096419321000409;0.75206693950197534004;0.8646095866962005827;-1.03733202968117455;-1.2927846764467321172;-1.6658667887580862477;-1.5945235019295627144;-2.0429199325712321667];
LW3_2 = [-0.11522773778328547489 0.34063203526746127503 -0.11463885466226581 -0.48949113291765788958 -0.86194853270686755398 0.66638683269718945734 -0.65719249457449202545 -0.85468626701531535961 -0.28914095506013398618 -0.085588998360688436917;-0.37350913635636079357 -0.34321992471135531755 0.61854184693425395825 0.68304247577068977204 -0.81339517051386889257 0.1514740036495481057 -1.0451001234631533965 -0.051744080975712147819 0.61728850537077184502 -0.28189482971166313074;-0.86932951781830125615 -0.48971240375151664503 0.66868602262690901572 -0.61822702923256100949 0.34218476855830048944 0.20748690830363888948 0.9771908980327191907 -0.34569646229217926292 -0.20939969417152298758 -0.66812563185693840673;-0.34924250693510799914 -0.39598076364848294739 -0.41410520042806320262 0.44361660756491250179 -0.75722675034320297005 -0.76117297119540716643 -0.16362628371687856776 -1.0665242509852956854 -0.45672886150830832586 0.11918961980400649692;0.43510532856104106036 0.43951979395886237034 0.34259044589349529897 0.93204461163100504884 0.037148295823190596865 -0.23099488070392665273 -0.32825935594639160664 -1.0665722163610991124 -0.049123117347538200472 0.98009146120800716417;-0.32737214622489724247 -1.0764620299125879921 0.91122906070488784991 0.35043266967790781541 -0.67753043800135559493 0.25445213855342768694 0.19409823195818010078 0.52588664125127748683 0.65333302041254914805 -0.46629749769955064487;-1.0073886694090310456 0.82708119782763389605 0.53709199222518444472 0.3129294587445609066 -0.16152672464657866214 -0.0022660193271068292294 -0.63612449823857253328 0.35630927007448393029 0.89729921080967833813 -0.027269255846214830036;0.34398019697772697079 0.76870809542423990113 -0.23597102365274774671 0.35147667332895321524 -0.74936464699465810124 -0.38332567437903863894 0.94459560417797783227 -0.94333571814175798398 0.39438491651383544845 0.0068217068570459067633;0.59910875359624138348 -0.49433607119349082248 -0.63073110739251214696 -0.076594625611244748775 -0.36884802433221375306 -0.31524194271443684023 1.3850132656113218754 0.02176474653015319366 -0.5303616382665540252 0.38434662606667491236;-0.76899870118914670503 0.31727872138063156759 -0.74622882397116696573 -0.21056685939968011745 -0.4460523981533756066 0.024969692368321454862 0.59843143605571513799 -0.32069911386755600713 1.1281875830179139975 -0.61800887870634091392;-0.13771257088213897934 -0.03484505884117513469 -0.55148437817820405993 -0.84173928668525033192 0.83245538033738808448 0.6334226218219048965 -0.59718944860482325865 0.65346182094621552139 -0.37719011137709546055 -0.77571554551496713081;-0.058867274168552072289 0.59152539327388775625 0.34550954259873323249 0.19509645583795348633 0.8223958255658220251 -0.84126413457507420723 -0.8369580464654220453 -0.80732567874514948869 -0.348750601067903232 -0.58125515386259651862;-0.31651892761631839068 -0.36503057847303949091 0.54350124112350084449 0.88080014387694283151 -1.046526093680822278 -0.41884032411733163048 -0.26946090785100512699 0.44577290429081461998 0.80345344577947219733 0.023312481899441836464;-0.20425327516072677714 -0.81990308414119028591 -0.11047882957979533736 0.69381572339512287417 -0.30245436287884075455 0.62171741071752029129 -0.70683867085723917079 0.37143545853685894231 1.0664558404290844784 -0.22858351505025176209;0.53445502707816416876 -0.68019970980571264896 -0.12040897034205047533 0.46963157394483046048 0.46089635483804558547 0.58388312153716248609 0.7626663701263455275 -0.44537467335034458538 -0.026346959411060778822 -1.1296862274390673253;-0.15011262929917562614 0.34474708167629980471 -0.34722521611194612223 0.71167790052250912147 0.84880729925474529551 0.99142622229151156077 -0.85276427227792894747 -0.37366841079735069187 -0.024524510771125825753 0.46282513829890820078;-0.10267373310883413928 0.15021348583211718841 -0.17960124489496220868 -0.61755129250462459378 -0.31627617123799584009 -0.076691734252372356639 -1.1300806698282774843 0.097587618219822466759 -1.3249122354800562107 0.063471518932206608121;-0.54645244429581296686 -0.39146502310415992598 -0.7330865634956789112 -0.61406603054341002412 0.29029183265038815964 -0.65208228718977923055 0.57672604836797936034 0.27476425993338510212 -0.77554448534671371895 -1.0097060196398373044;-0.35232140327400368607 -1.2538078281915576717 1.077118967722985321 0.14062060420855382326 0.12298010331480065116 0.16112558601553406135 -0.89802924270853712319 -0.098074989418678260034 0.47637953632730106746 0.29859996551738771098;-0.86940625000484950125 -0.2844996515043940466 -0.25510869200514318944 0.33867340296383346976 0.15407810932279256133 0.56643748949196937037 -0.11766686711374382823 0.78889156354276301908 0.23406010906582574993 -1.1379088581077947406];

% Layer 4
b4 = [-0.20059758855969653246;0.69609646017605197876];
LW4_3 = [0.6656825908516822432 0.43759192630779131239 0.12865312844426823879 -0.8566466995946262486 -0.45553616249335349142 -0.40781631764239723026 -0.38969636354386200106 0.31983826915256297063 -0.23816945329992014746 0.16785601945967990045 -0.098364875413534433313 -0.53840253451900055293 -0.11687703630747653394 0.36501906741158629544 0.37111586881925795467 0.66901999617988472391 0.053835894335885869921 0.42921696053885927125 -0.99297904692976712848 0.36170446649796450522;0.52504077696539475095 0.50338842993387122871 0.3405111068570113031 -0.52883135356166133256 -0.56943604192838404021 -0.28668118089425020933 0.080572018742893949939 -0.28843976986154817865 -0.31105270408249219294 0.051421124136802012772 -0.75864216626832048362 0.56191502379288515989 -0.14389846496171601609 -0.64377029786565920233 -0.10640769716431817959 0.24249506986632371475 -0.13117604863101609003 0.31389756636633964204 0.052245503460203832069 0.45573099030132890874];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
