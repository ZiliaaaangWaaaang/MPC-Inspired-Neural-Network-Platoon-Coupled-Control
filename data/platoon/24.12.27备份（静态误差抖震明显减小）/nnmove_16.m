function [Y,Xf,Af] = nnmove_16(X,~,~)
%NNMOVE_16 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:14.
% 
% [Y] = nnmove_16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.16713682045576;1;1.06280946541617;1.25860803380294;1.01333396529071;1.04673144715384;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.7726432488342134253;-1.5665023342123058914;1.4873174997822902199;-1.7512032638257717387;0.94496634403341861486;-0.24119094770369528535;0.82142239417167606241;0.34648329835915003816;-0.37144257292200266729;0.20703313473115184107;0.36172233704320810865;-0.29032578955944066124;-0.26302054103518890393;-0.56692402494918692213;-1.0558749833467655499;-0.97936366636208571634;1.3943481489493525505;1.6711104553403801631;-1.7487890661735006059;-2.2244455061057095691];
IW1_1 = [-0.73481753944194294625 0.3505044667629082511 -0.50454007920999255354 1.310359966035350876 0.017836846803126353567 -0.13129112078161414567 0.97764867802120414275 0.25961932923017427832 0.63732842563845037986;1.3872398334000977105 -0.44433115030212533281 -0.79645850189823619303 0.48362485677009192653 0.23172160899970678516 1.1431769756323353349 0.019622131099478010152 0.51062431147016651423 -1.047251417427554232;-0.98830514644261191481 0.40771895353138593032 -0.48794454043780177699 0.12232184471258328307 -0.75986269887358104391 -0.78721351503023651031 -0.44337780512405505773 -0.40151616623939634376 -0.6723377948306303864;0.63075441893965689122 0.6913794443250286248 0.79714677894929486524 -0.59090137791235575193 0.3010767919355843425 -0.49020152051436416407 0.38166285978510938737 -0.11412080124375391377 0.23512786234022597931;0.18494691993182349465 -0.56808546518391311864 -0.71750389354013599519 -0.80718165997690405344 0.94913909998653211986 -0.67533222096730438633 -0.29214499848855668418 0.05720266603092348523 0.94224881840944663125;-0.11911224101734659009 0.87354487001507907795 -1.2231139519790648063 0.083142960901342710667 0.10989427432652419669 0.46981963697644596456 0.021563865657219280503 -0.69789664921514771301 0.63531382216297527243;-0.62798602951682602757 0.04363356371597197636 -0.10805255209129668859 -0.44365438043398014445 -1.2418360130383323536 0.51163575547276418654 0.11039280415528925083 0.67770597477757188454 -0.36188831049500785886;-1.094057164548136285 -0.5250795119575653036 -0.44489806872378973024 0.58919483317102117059 0.51982701362049055227 -0.40663563881156294944 0.29316907461050145667 0.31673230919677131112 -0.41509949830892645117;0.40941022853325198527 -0.38625858393406070634 0.2978596801235390279 0.56564837186731797836 -0.68480251261622326897 1.166004605863169008 -0.049876918625169880395 0.78674620660065486266 0.65278081713108271344;-0.32226765934980261541 -0.081809735375583725325 1.2248095367084190777 0.96507612861546587801 0.15972927987103452407 -0.39116529505129249422 -0.46366806015912964689 -0.081623335598563592774 0.6290250018206986482;-0.061405787217300736303 -1.0750619247794799271 -0.24676386851281037482 0.53186599348961427491 -0.54133172203688761925 0.80419783752859452797 -0.88801804048532573255 -0.58111582229298452962 -0.76905007069208364268;-0.14002227258757998785 0.4491432454352650705 -0.45794797744656035032 0.19048740673331715501 -0.80765326294406258878 0.91773849054085865351 -0.83603400708227437743 0.46586785909826866625 -0.9263983384092429052;-0.60288349339355318257 0.62108350307272219837 0.83897799106270243286 -0.68854535531004934512 0.26638572086697037689 -0.14838761768148225895 -0.75661921089538830554 -0.88933040307189292761 0.53647306807830041908;-0.82704214417523636005 0.51498801467411525756 0.38598223648676183162 -1.0906759511570416343 -0.38541954143819445733 -0.097268619102195641446 0.92772954876723212614 -0.58684758756643284894 -0.935587030786980689;-0.48829774131425168759 0.49636388160438349448 -0.68154883007212796464 -0.74226104708162610191 0.97909419039962886089 -0.31162368136979590183 0.087079652913479979603 0.36740497208851052857 0.92209277824671265211;-0.58417838570417268684 0.92290857000374448837 0.30998274128579267339 -0.084361638234958069571 -0.35439512635741515778 -0.920112367469569703 0.99071145446106945176 0.14051727750349299328 0.59373947576167585005;1.0531529634461846978 0.32081613653688167975 -0.39942768595453720382 -0.73144130586082600765 -0.32305415480855714794 0.91318428411416652235 -0.12767339531318835921 1.1711084995994522906 -0.15545472977158486527;0.13692234198425251579 0.81006738278790146879 -0.92699524173348313294 0.82681117585157348771 0.39824033001220754402 -0.86357409951438646178 -0.61437038711656444256 0.057998042202278721202 0.5044763741568801807;-0.9926663108481337261 -0.43375374651387510472 -0.50967054203075157215 -1.1634568993819620619 0.17293946116464026241 -0.47555460461662196758 -0.086725924222327666069 -0.0021643533372833032198 0.84348203814940148071;-0.94778676691345153937 0.73297558863205314328 -0.46504521776763801943 0.20395340933666170069 -0.56450858974255180289 -0.65755708838317861176 0.049114117089979758557 0.30512795222470834311 -0.85307056342750875455];

% Layer 2
b2 = [-1.578071376444738938;-1.2509003820588675548;-0.77898273690448649464;0.6842670657826792624;-0.035563758631526685983;-0.04579102609169505983;0.58340099494414765502;-0.96853620008621599258;1.3316542441568446353;-1.5820337404906206213];
LW2_1 = [0.54032775844559521872 0.32038269537158986511 -0.098157329664650738721 0.26002525178979513099 0.43302012861155547707 -0.14389821523543336323 -0.37525185549891709735 -0.47980448745790627019 0.68282541790312312191 0.60746449239353017546 -0.10194826342875637493 0.46614339612110750055 0.29668285811786210271 -0.34656799967100299087 -0.19993466207491475406 0.21731102040485145155 0.16196898265624257163 0.71896098350621617801 0.13615960087424455738 0.072659992481819479782;0.65383341598609723277 0.47217085006461911867 -0.039632696614657153544 0.32930364304354037275 -0.78687506841214294173 0.60741820112151301281 -0.11530024887360357244 0.024445469858283934428 0.19449103702863912435 -0.34056857583156713298 0.40750079258446125774 -0.28432327592769240932 -0.025804905228887085877 0.20728592094948561364 -0.10051110877228958129 0.74350196206658858422 0.3843089193315303298 0.066362135372912259279 -0.026048961899674573373 -0.18261848044423992232;0.29061202108174855052 0.50944110151849786305 -0.13319452760156588744 -0.037233449762310154296 0.51184874377382649779 -0.6094575223723969204 0.0048751238103385274858 0.28527864591660245797 -0.85508805727462577906 -0.30922850793957662452 0.15323022380782699847 -0.018524841137370441635 -0.10926618737146158444 0.019211728643300913372 0.26948361624024735894 0.35706163220353204224 0.60010066818591412119 0.20948639953614545117 -0.055778636449136449749 0.49508981627850495721;-0.16491218956077652313 0.28982828559046153183 0.70806682421670363858 -0.26642451715520787392 -0.76024597800558713079 -0.28249819138690246412 -0.13282892756180589289 -0.14827754326964287523 -0.020448508721717342795 0.21049446253763565151 -0.42996976994749747103 -0.19405053516690792814 -0.6294581868776801814 0.0074566115115874548325 -0.067061679808688018367 0.60644667935590135244 -0.49521831200921145877 0.09516315448162385171 -0.25024368387329165575 -0.34592429219118681072;0.57036294835692025185 -0.35199961392987538789 0.1661602297021326502 0.19382994586568702555 -0.92781434824954645002 -0.16342404702358181989 0.26468111745644656851 0.51931803964286349373 -0.26763880986474197776 -0.34069945566529014069 -0.37584979576254684552 0.41090443715346652853 0.29067123294272895206 0.37182914268223737908 -0.34388579687038645094 -0.064502288849555652894 -0.019492597174324617637 0.0067740986982728103316 -0.11930649493748760048 -0.50564862571955837556;-0.071628204610124368568 -1.2051897177556529783 0.38712345293299221805 -0.36179536879282847561 -0.68514043233674670752 0.56010135274196559685 0.81374261651885715363 0.37974974810960643312 0.013550219663427544303 -0.0037233627089712506564 0.31374841655422675002 0.50993041185063658904 0.77221058498685390958 -0.21045184119115226129 -0.080591383874606709048 0.21968730530316341043 0.26325468701414977968 -0.50837748338972765794 -0.12827284758998935832 0.059913314243983765983;0.5090590214876634656 0.407546563072565593 -0.62363346887771275995 -0.37739047183687168818 0.017201726354284307269 -0.036797317548175639823 0.36413268690095956792 0.22320200926587380197 -0.025188441502044321696 -0.61049459685745377513 -0.46657601843143831077 0.011227128547657411889 0.2663154723219304798 0.31382627336873658574 -0.55867947731082834295 0.54413089682376813983 -0.5694611757849284972 0.31968173725927773177 0.19747310293610237375 -0.11567463345080369885;-0.32502341625739350484 0.56440557240403399497 0.12563162698936061745 0.083054687226914780673 -0.60692943472946014882 0.081192401337403297124 0.031947492751936285016 -0.1714849228858089103 -0.078833274223382640566 0.45425078811990571293 0.40599884599505453586 0.079461690461020001441 0.40531241901319625676 -0.46984054736546781994 -0.34592959151925312122 -0.014330961132352361409 0.11141241301836955768 -0.13116662605013462706 -0.47420952384563463955 0.46162354852295045538;0.21715764700728693026 0.090972222240489730716 -0.2569559232373663793 -0.41668453797253884874 0.56995723677242182692 0.11383065023285930673 -0.3892281608710450036 0.30340078757716065772 -0.31793547655507942151 0.40173730494611153974 -0.14989395774246064286 0.25003746311597380148 -0.20108291038205999834 0.47511012576447275713 -0.58287440625371378378 -0.44151306795133832273 0.5868148568156709155 0.01247602522768841149 0.083126999303753126846 -0.16142879809579444017;-0.57931484891507600832 0.35687251388779178685 0.035985095289999928514 0.18382419177888276174 0.19406981565070630102 -0.24894213948361804123 0.58057150477601526806 0.24595382503031235077 -0.46999265628689607111 -0.27056908877298135874 0.18522083216729023913 -0.79294583191353440466 0.21202319465130362031 0.43047875364294435618 -0.40101134838402502369 0.11903336552215881827 0.33755047008618943583 -0.51472390484426910895 0.20258689348041059031 -0.43343078311747285092];

% Layer 3
b3 = [-1.9392822455991738373;1.7372285988779225807;1.5603134348629839057;-1.2939937889935624327;-1.2044588392215342942;-0.83434520946116064177;0.75787458054247647254;-0.48192091532354647265;0.36528700466958885507;0.11282814411277472533;-0.054529339646383373497;0.22713130825747035457;0.52428126397642449419;0.60451725028495817416;1.0439031728514995834;1.1964919040809884887;1.2488903121126619933;-1.4918346241322049117;1.7181406130824663503;-1.9863222726351781322];
LW3_2 = [0.95075322479672141895 0.78110684921570128214 0.3875184661768894534 -0.62128197369074311673 0.46014208086193431058 0.47147405614128451434 -0.17838536880372124482 0.83085707596844815548 0.56003915826615369156 0.053778211640283207773;-0.40898122775372841575 0.79833494609940114373 -0.71918857523873835902 0.59786143715358353035 -0.066313083662515925898 -0.81255781645881774988 -0.34014423662130716108 -0.32054128335768111713 0.6745239425246754017 0.61300100718317240833;-0.60812156117435955949 -0.2275117339903062752 0.11932886162064423874 0.034938612052499810889 -0.81267470356772752993 -0.7369017338914727322 0.19547759802483408165 -0.90927947865714708886 0.94291785002780026392 -0.089932551948027156241;0.78682450695689187814 0.46324644916447477172 0.58345215167490960262 -0.65472731848057230675 0.1688022071720313988 -0.61540020668952011285 -0.87509214041184446575 0.43814635809620744444 -0.17030545074722661103 0.76027349900739316091;0.84435897459389752662 0.50352696545242037196 0.37287034325577822491 0.73692173799479487872 0.17857915144158584275 -0.11914221165816585302 -0.66020712670948389356 -0.80140263930370569945 0.73958181173780712658 -0.28676289077630390256;0.30483260111766635747 -0.16938399981017010498 0.6098893973423491488 0.60973232022644696659 -0.36847766080001664868 -0.28694822140267933763 0.54088413157145709409 0.89466241735490759091 -0.32761300690933670143 -1.0090430779656522908;-0.92946107955162726721 0.61183196862262023696 -0.63637725112460152843 -0.64734812266810382031 0.46769868880054099591 -0.077669729547585705798 0.26924718065005265322 0.77974439311919208073 0.80753179067247671252 0.536956821079867197;0.42183053747353332907 -0.52868613192718716398 -0.60211507738745251306 -0.049115185666684560428 -0.37621795406640801129 1.0105947858100254866 0.97989222217408655791 -1.0219510845825716672 0.30849904472727995852 0.57337832910375696738;-0.75796539576561527962 0.12705503249170660429 0.68012319012661404116 -0.86329895988323324119 -0.014890413207745312185 0.1347683833155198796 0.68604585070250756473 0.44478755550276921626 0.88026775938195789273 -0.45739726668553626343;-0.6241498739979515209 0.68508266307511644921 0.6262254336262370602 0.52071138717717624367 0.43107661267537528138 -0.39365550244380020928 0.92889590216810591361 -0.08084584846233117128 0.88179374218520789608 0.025171401080188289534;-0.22400715150611361093 -0.19581362992115688981 -0.29648437580922087919 1.1104950413893506234 -0.29975746237219208501 0.93478738170011288489 -0.46449009356187931363 -0.11866381766335780401 -1.0467822468761478483 0.15375073213170875608;0.085029304687660942075 -0.58700178746868425517 0.80031312700604628763 -0.034507389861004114651 -0.53852463317702092827 -0.76800359718642396967 -0.78335156744635858761 0.55694074792204972812 -0.77468110036220527714 -0.0051756584702037609913;0.21098973396690129389 0.45138994771201529366 0.9920378386923793812 -0.63624686572129884876 0.73292275180032362414 -0.11131068777348965271 0.43909832017803585025 -0.32503640463569138941 -0.49421735485677131816 -0.81661660384451517647;0.60873424095770611864 -0.26772514300224792283 -0.58704837225619765917 0.31610496266110099661 1.2356081897871193931 0.78993302148201804957 0.16314233862086180427 -0.46392071906231102663 -0.81414240130420778563 0.052102258965140701985;0.95582851385811662404 -0.73544973560448412275 0.13450923099026146357 -0.79183174594993932516 0.18028393175143553329 -0.40875017800265234236 0.71855215845713726885 -0.29027244280653574648 -0.84106876395274032809 0.016009585530098416339;0.075313950948554420073 -0.044628243465354835995 0.05245060451076941771 0.55926409985277347747 0.94923352833896812442 -0.30285960380986548524 -0.84242996296753835939 0.050627152259649234323 0.96020777280115954255 -0.71549978573335626386;0.40053703921359523621 0.10673952180951742919 0.064787531697811498455 -0.7130610658940165214 0.75486815399099704837 -0.76535653729810038115 -1.1561638737002977173 0.90100694738238462644 -0.35011084418266419371 0.085657075689758235826;-0.12989038760897914093 0.55162932782533879994 -0.74929176807680331063 0.59082034485572298976 0.61583032319223562912 0.35689412974652301447 0.65501755613697110192 0.38141521797472360822 -0.8002423030072824961 0.55145342684838716263;0.40588650569378081912 1.0388353228235422954 1.071033539300240145 0.49161253986691338946 -0.089268534580862438088 0.57856729386378258351 -0.1870733593613203849 0.55439724503160037195 -0.6231845626702047225 -0.43492125788055341351;-0.24737143572929937152 0.31890942868588861847 -0.54997177132259955634 -0.24444506201925211841 0.47263832423564544616 -0.81838307204621896229 0.60596196489229092741 -0.1515593211148956454 -0.98303965983083896329 -0.88724893716294472856];

% Layer 4
b4 = [0.21554943229681522432;0.8322202715931593664];
LW4_3 = [0.94419530899433867788 -0.75093492730391375733 -0.4036854715826622142 -0.77601807444232728805 0.28155183350889695371 0.83118012694378928806 -0.2285048935036465001 0.69994916331954071254 0.71235028883451023685 -0.029291507955029980059 0.46004430062861129125 -0.043972555829806581063 -0.23593024440776116935 0.37973097058144439364 -0.041200616874294979097 0.87014150981068549839 -0.27493339117106696534 -0.2426811222120417999 0.35049240635444944836 0.73985896658965022432;-0.10944815921241268786 0.34350921613316265368 -0.70058581307873968314 0.102389768341955123 -0.62298424502322680141 0.74257163277655624523 -0.79324653540076472957 0.4598052647067565335 -0.62780901088997864701 0.0075280743041122311077 -0.28083367263458497431 -0.025134008454809404765 0.56764071786640701855 0.93216593525834479106 -0.93735103744775671863 -0.62971771813676979956 0.85259480155751388164 0.37638926681504208949 -0.45933884523588464077 -1.068034616680293647];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1];
y1_step1.xoffset = [-0.999999999999798;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
