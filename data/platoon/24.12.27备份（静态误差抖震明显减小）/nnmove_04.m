function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:16:57.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.832381007605849;-0.639361590405926;-0.695257580172501;-0.656730875905293;-0.736217511301753;-0.581556487918271;-0.752676008050108;-0.874312231364002];
x1_step2.gain = [1.69825171189909;1.1174848563727;1.53491027182406;1.60065309370616;1.26826958496911;1.28329478701394;1.60565698304423;1.18534909675037;1.18705279589493];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.8207204163552108689;1.5104542911296900964;1.3397364244380987053;1.3517175258240488045;-1.2748754091380103404;-1.0948371070611946365;0.58903869267332542581;0.52060212079375511873;0.30828688840268070326;0.022642798798989574593;-0.049843175175459039639;0.16219471021633852237;-0.62881322982317133796;-0.5575722769503559384;-1.0427980346714911253;0.9370415882564343546;1.3205831880789562494;-1.4656518658215453854;-1.932790231244823298;1.9118186134658483599];
IW1_1 = [0.20556382904942074874 0.56488481484807728794 -1.2383187432591049593 -0.26398590798912330291 -1.0733479103867871185 0.57693957756570424245 0.3724473638432115874 -1.0012117562527467207 0.037570371100490336513;-1.633908472661104172 -1.0895913781327530856 0.47853810886669906344 0.078353190390828414413 0.12080404149083848186 -0.13989067370913974009 0.98453341359488932838 0.068372496063200283167 -0.12368348701123985101;-0.55648782100914806481 0.4381178195204940562 -0.033887529140866456956 0.43739380339227057481 0.96601767252193970759 0.57406841476641889965 -1.2514969007541678625 -0.48409940280005342439 -0.11969928274741037377;-0.60813125959450309299 0.77730225895061622055 -0.16566420001148546293 0.52477767350259585388 -0.92229850777064281697 -0.84110948231471471814 1.0180125563882840289 0.39268353191388166712 -0.18968354089528824402;0.04606322157206865775 0.30398482768071755089 -0.4951434058518516812 -0.37265204274658436656 0.037653377803267149004 0.73533589326062154257 -1.0545025563051819706 -1.1544525781009153942 0.41664563114765557073;0.77816972358513425423 0.60621169237484140435 0.69143805464433927277 -0.20011666966423596881 0.89518338628018867542 0.47061303456974179493 1.1690386346161956155 0.49702932763427137841 0.010293995999354457055;-0.59952330615590643248 0.42820766250544217701 0.68393279721440969343 0.88761751959159540526 -0.68032334614885558999 -0.11129610759278862897 -0.94415401072859928 -0.86253812796003237473 0.33888704498757049599;-0.93304187943630800817 -0.48273749518916658774 0.18020108271559592827 -0.77224649949330370635 0.43041844560049108415 0.23653135917585457748 -0.042577259943198934866 0.99986854175432304803 -0.77463370211316595615;-0.27761206167015328727 -0.4377633463575706374 -0.2440356918778272266 -0.90703729393349397103 -0.24603672842627291595 0.99850458565461619465 -0.055993046431365121884 -1.0512124125769319871 0.96396779802213483634;-0.76931415538353020711 0.79828939086240702228 -0.85482824776051147264 -0.64881230656715616067 1.0125885791505533362 -0.42863121290203509695 0.60992312085570998814 0.28080153165622545597 -0.27343066928268838778;-0.44878775631408873714 -0.58455221423576508855 1.1301419840895601254 -0.63910436722644659024 1.2338073929098984927 -0.89088664567147834994 -0.041153055261820489785 0.21771942629057627894 0.2415770377363586352;0.15995531820918038046 0.17677944137166320959 1.2424313294220279413 0.36800505778188757899 0.14429111766783320192 -0.80489729303144108563 -0.67332389642942480634 0.48938803195194674478 0.72452317441296798517;-0.79039316252570057664 -0.94869491395418026336 -0.38369465715431189112 -0.25813590765326371868 -0.42189216213298652569 0.66421459465433851932 1.0450376209513507764 -0.52351231764064876106 -0.67879591854811849316;0.10126778998203662951 0.10874417886236473207 1.1028778157953611494 0.2575960952798961312 -0.89408533935549983074 -1.0876665337024744584 -0.58993938668802337055 0.7243479815881689321 0.10270054668535358311;-0.31104881829123154358 -1.3911628304262744216 -0.55207518746047967717 -0.59274045357279481205 -0.57701219206219800384 0.70436728974169260376 0.040903482645393625383 0.01865866659199904784 0.24423818083237486265;0.8127942218361783322 -0.98178112970873976373 -0.56184165495405424817 -0.56040386166871603013 -0.81226274329464154267 -0.049654854871645420777 -0.851738729561707264 0.66880100489597393842 0.91621702230660628796;-0.059759974127832050927 0.61769040371762395925 0.90856426707491377837 -0.12801958822019982032 -1.398747189832732607 -0.75157116857724159953 0.65256680347483420057 0.27202610787597047981 0.038022869301608308579;0.055855056328994838466 0.14338850329472044298 -0.46520624222261791614 -1.3113297744911622811 -0.46019388068318678453 -0.82941253384583557562 -1.0577423966048711268 -0.35900519212171033701 0.030803106424577297168;-0.57533133029190064445 -0.75715452931816462634 -0.53705099341717843497 -0.71253864415188672421 0.095342505398103932768 0.77796258390464279042 0.59791673274666023996 -0.64656819367628248774 0.55027916590208281189;0.72181071513402927931 -0.8057185776791621068 -0.39443148130213434577 -0.046031653852222777223 0.2343522090453168949 -1.0628125308549303263 -0.76563394855711286446 0.39643723156336846403 -0.86053023529410099801];

% Layer 2
b2 = [1.4971593612084170832;-1.2074716965669323177;0.81662640179948720043;0.54094283470995896401;0.071978357027350406416;-0.12911650693436779735;-0.55028498851043061713;-0.84547666332563653491;-1.3337766068892709104;1.4496256716070861081];
LW2_1 = [-0.18043780453155491839 -0.32828010676032631787 -0.31936239443198577437 -0.41106586117549726023 0.3065780376853031175 -0.34491115419203949299 0.50345332766208428232 -0.23465280406793673218 -0.71089958895024429886 -0.55133409830870439006 -0.23682506750196746781 0.31022398407766388351 -0.22847215646050517135 0.20077167100044440717 0.27220799801187611777 -0.47223207216222973237 0.432014482629033858 -0.10007703744180092287 -0.21868602286885888142 0.068844235545020490696;0.34611772842805116346 0.51726084746682809978 -0.36929448349843974064 0.60225266641919927846 -0.3137226856190162283 -0.2735785598090957893 -0.10103543885854647522 0.55745112820569575618 -0.56563410118642876157 -0.071716066906713407669 0.24249449219399263344 -0.50732830245347315667 0.34936599411465701914 -0.61348949880322667383 0.37927545092401782068 0.09382219362407974439 0.046417109246039006676 -0.11162174102640085027 0.35439742833811155309 -0.12511725627026731855;-0.19062705225326306846 -0.10621918479703520988 -0.52511072473220277157 0.17659841424396532927 0.16788726554357297216 0.23462769292545132549 -0.60187473342709429946 -0.42383607442996501513 -0.10334976383268176803 0.47352442137535505351 -0.99445106900124313754 -0.43977857135537984368 -0.65849705364802901819 0.25038233704650658673 -0.036124654651622151169 -0.12711096866151738727 0.20220710143211226284 0.72600717291379279761 -0.38475995923067057847 -0.28988417423342527357;-0.32632245928308695193 0.60933875123078673486 0.45824801297858247517 -0.35324756899116677156 0.36701640094349768928 -0.16940898136580423428 0.63683267901033346892 -0.022469005220434174613 0.13460836804887027496 0.47771429984761226706 -0.0079363605495673325563 -0.018328661096404536696 0.17868527160319166991 0.66417355019694779283 0.19718780421769618871 -0.25099598951543616865 0.25044364363991494793 -0.20198244317627542244 0.38275393508875743542 0.45812775769682001492;-0.38367794650663838985 -0.46251826990357791658 -0.60299013889616182027 0.12597941704401555141 0.095056091317579513578 0.70947429814587847918 0.61883915201223660407 -0.044371536409842413096 0.093411574199932984053 -0.6078033864275134146 0.59247908106407098927 -0.31026128165989863561 0.10971595235907936894 0.15884544106651329876 0.37992303550145922753 0.070527748710849755276 -0.47189841944412769248 0.28505499667291750443 -0.096194116395053486102 0.37826875899684575533;-0.04666834724496561615 -0.24109690368312997055 -0.33766280083669819589 0.11490209521711806928 0.07247666651871623178 -0.45444244321818777488 -0.32596677795474693351 -0.44493588282655860411 -0.51687410814456946628 -0.06342939589322829641 0.17076618033191884316 -0.7056866716821865726 -0.34869784670423292772 0.19177458813955908234 0.3037653824008612613 0.10908075982085446709 -0.15434410244918642108 -0.27423196970964536234 0.33840185753514290257 0.0030600449840550176389;-0.020111097743139232097 -0.39951680877424461391 -0.31936186847404235412 -0.59185161775000294515 0.23530713939378572475 0.35223916295981289037 0.50250171658583220324 0.014592452105217361413 -0.29625726286573000889 0.082234328863485847694 -0.34929770293537132364 -0.1861759424979182731 0.41252390268712907373 -0.18416951245636672962 0.39547100392523154566 0.40248342420005323028 -0.0070468246678178046716 0.41304323418297222981 0.5934770559937992962 -0.48825098937469862959;-0.19635634401527826687 -0.48307232240105657528 -0.35761215097186160872 -0.18164979180612950138 -0.10691786207798414932 -0.73476969306238126833 0.43263839024595635019 -0.2771651793938359476 -0.43300710712185658258 0.27160258281342636311 -0.30729141713415797366 0.39874624454494123071 -0.23962580467813313079 -0.11965471000082925079 0.0489862824639770017 -0.0072493605333621528863 -0.55634846528539860788 0.41590220533560645633 -0.2908806897322606666 -0.60382074196504587071;-0.39185256563032927479 0.18992044272929492488 0.8292003152121460996 -0.18313416034578744451 0.146295566092229129 -0.02789665568194097528 -0.072890264196635828897 0.34623929333459391167 -0.13597979422897690793 -0.32275808258574162357 -0.25564431501172141248 0.25295397190223772865 -0.58448560409359184842 -0.1415913361216442623 -0.40514247317196427911 0.67922361174736245459 -0.028956137870909705312 -0.21741581174728694115 0.4969803675544192112 0.18881837116700181389;0.38180696420224213838 0.07955239692957043196 0.21580888576414644642 0.46252031887673422661 -0.62136097486918018262 -0.66310339782414129406 0.30736955320106251754 0.39942192280374066993 0.28197258420440868276 0.60449494531109171369 -0.54358687115404902279 -0.79659110166999680391 -0.32026089119317646681 0.37226054336197900163 0.5317658399394704638 0.73090994018777055707 0.25738167951508855724 0.31281757203483911978 0.23697943900612786217 0.15031271522445188715];

% Layer 3
b3 = [1.9498950763818962972;-1.6610339009843837488;-1.5498466498171377115;1.3136709342054175842;1.1764878739345612235;-0.81140548384250898994;-0.76495745461127340192;0.4800284366490250032;-0.30659364815530359971;0.048192741647868311827;-0.13146832991571308358;0.2524958153456527965;-0.44766876292333762644;-0.79916328996735197521;-0.87097774521709303563;1.1579513839011350562;-1.4020113097523825285;-1.5793039653597784611;1.7821889482921107195;1.8832534592282443864];
LW3_2 = [-0.0014794200567509211905 0.63130079855918319609 -0.22960085058381643486 0.68954219953790629738 0.45748656551347866017 -0.83712346161235839936 0.55463905119163126045 -0.43693513301759517864 0.6305317506386012294 -0.76851394538660122713;-0.15534343719641460768 0.22266981303822389049 0.52526702877051079099 -0.02148884414964244427 -0.042366716164604217854 -0.51241911753172353361 -0.73519951801999727792 -0.99503257253811916438 -0.80784354782583644994 -0.60930336014403430056;0.27470004341676362847 0.81817165578656780855 -0.85694580920720475614 0.9848799695969983059 0.10170342099296576788 0.34726167230436749689 -0.32037486013821447894 -0.76352387837760460343 -1.2545216554543403564 -0.16106870306020493189;-0.36666544380854171337 0.77699526422268361259 1.051400534432577194 0.92221675201791741827 0.27497886611551203284 0.28750275310266854012 -0.32686108931402502176 -0.65327903002486920059 -0.33188902086221505616 -0.86841038692338756722;-0.63291440942887344789 0.66081799312741140717 0.19794194490937880304 -0.63518838961048973424 0.24869861116098154752 -0.23491645221657217468 -1.013739781504886972 0.54592303535044883755 -0.042491508244372609704 0.6876943230463208323;0.48943663121977110109 -0.95327268074167670342 0.22647190634624664307 -0.83962461752874728571 -0.70922390654017697376 -0.047308869867950069377 -0.16982825727264563853 -0.23502939341219619696 0.40156265223686166133 1.2034138018329436637;0.7534072283101128642 0.086054150418570396486 -0.76287485504946195292 0.55054514758933270624 1.132128948834684623 -0.049007892893683888125 0.20786585023308692954 0.93040110143192689129 0.56611288008691662554 0.46487969111691240798;-0.83695086820516917392 -0.54959276498775655462 0.047026483219103638878 0.71025855595794507025 -0.50725546377724028968 0.58316380327355343827 -0.82548133209743645988 -0.38585178319664253932 -0.69302516706490091547 0.43879701806540244435;0.9527918583842086564 -0.67281752916378267937 0.66672826401812557151 0.75384115639640625339 -0.36012438704800903144 0.23331661607820156079 -0.38922688595003701595 0.7151471152448051205 -0.60619866320359239165 0.27817369547341558311;-0.30026994713865517994 -0.65023860084598894549 -0.12177560098062231719 -0.45170886032812906929 -0.22070226572836731949 -0.73830207783536161426 0.95828410283865794739 0.92673087866403436319 -0.74179862585846045864 -0.28284694350586930822;-0.91849145019746047947 0.79142406884351590435 -0.51524278760709696368 -0.12683167657231397829 -0.67885994659104120785 -0.8204829395523774993 0.61352179439702347885 0.47260688774878312213 -0.52646273474399463144 0.050710587415458537042;0.82532151323829183731 0.88164536147624483764 0.34364552990918895148 -0.57419838488210972471 -0.9479836552193472432 -0.78962462029826285814 -0.0074573513731217566658 0.017219269122410882367 0.50587823492029959649 -0.35634886016521244434;-0.76439179765013864909 0.45726559835341556992 0.054835688153355578722 1.1154727630913989778 0.47348562186384557382 -0.2928720261426921434 -0.68702921214383294579 0.78331618134838443268 0.64329015339423400999 -0.193945692617776555;-0.77999077766677371581 -0.21246898150219831192 1.0093586881879277328 0.6487380181298968429 0.54592706181115024933 0.15643183588432779674 0.43256536732128453293 -0.53084380683972542947 -0.343671388222131724 0.82147433323470386846;-0.36209711380082898469 -0.80012106377037506277 0.53197497638870916425 -0.62104757875284832824 -0.039175485234460974415 0.31924754809051053561 -0.7302478734599410215 0.7044737528729102527 -0.29248408685453608502 -1.0738214716246150537;0.25332328914196655667 0.029887823133561353811 -0.73398016264741228198 -0.26063098167538173433 0.71783824093227799334 -0.78192958418201385928 0.69740125372181072105 0.56274050739724978953 0.6615272459237888647 0.68940556110122996891;-0.57266784025397698965 0.52879909845100980803 -1.0948117953854905604 -0.46522709459807004562 -0.407433711500009621 0.2951477234672150729 -0.083945389224971161957 -0.49073349127127185998 0.95677802813432122342 -0.030649903723227966273;-0.69740166075758835973 -0.47606209552096673265 0.56410558315794723239 0.26403016940230406018 0.0798760833880286375 -0.6511221394141283314 -0.75298660372012349296 -0.48222700913210497786 0.62893490724298561911 -0.048873487696902473409;0.30273727063801292303 -0.1121743941441307596 -0.79601697543406479962 0.83371737149681546253 -0.7243048623486638693 0.58126972192310910614 -0.38265821676339417667 0.59794270845770858269 -0.4058986099075035936 0.62987254999125374955;0.80626544220846063649 -0.35079708952769234065 0.26365636168721151567 -0.36696881445191320559 -0.79600531977499344727 0.70728425944546069459 -0.76967618103712909239 -0.61926516696713451715 -0.6265554306836004228 -0.29497284948504459701];

% Layer 4
b4 = [0.10993630341880301915;0.98959671533797544107];
LW4_3 = [-0.26047773374716148842 -0.22169574736592234654 0.87197818806729432417 0.62388742159112620111 -0.97305996008285589038 0.93877462231193287145 -0.47157704232646652232 0.25092357377017260323 -0.63762674879115677218 -0.026069292893918998705 -0.7792206556226812797 0.76921440291618237151 1.0730896951893318381 0.85356776688758695393 -0.35707637675611675343 0.39512273438498585199 0.87499770326096659723 0.28240965655863320416 -0.51409814602893078028 0.56089086795996689894;0.38941933125238498148 -0.8820498385591741819 0.57524180134933011743 0.67074187439266697019 -0.59686403477583582777 0.33271005404376952086 0.61570676672597657308 -0.26181253131573023474 0.46037060738880086763 0.38474999044535102 0.3289910285040559268 0.049759947048942931858 0.077672640662822034496 0.080186276352034582815 0.67345521692540211145 -0.61277240344533545624 0.21076819384778971989 0.69617620274330116459 0.22339041292183017817 -0.20146260919583858229];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.03350395435011;1.22444356361217];
y1_step1.xoffset = [-0.935164342218349;-0.633395004421358];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
