function [Y,Xf,Af] = nnmove_17(X,~,~)
%NNMOVE_17 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:15.
% 
% [Y] = nnmove_17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.16713682045576;1;1.06280946541617;1.25860803380294;1.01333396529071;1.04673144715384;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [2.1626016174174367279;1.5412252535682913201;-1.3445317726897112465;-1.3032125387678947792;-1.1594602199902399597;-1.0550915260230298021;-0.22667645258589003143;-0.522759094695222859;-0.39979955013941148589;0.14757729931623961295;0.086798384377889170604;0.14724374994978400855;0.46536483128674016596;-0.85259993149368773491;1.0815080779317969295;0.75452983464311396133;1.3850706592167356668;1.5508773309089924908;-1.8153958052481515839;-1.8621842044547620709];
IW1_1 = [-0.14509275281882522135 -0.20033748378753829522 -0.50249023731190689546 0.29690582179637198257 -0.73427956092025314927 0.045798361715937756233 0.93217390114604659068 0.98531815733244099142 0.73915759390632285175;-0.40275625594976161015 0.36354109643762433368 -1.4077375485058307714 0.10786817950912087893 1.0470474457205716234 -0.3807246596623182211 0.32974250496485923989 0.52525562728774277677 0.41876611004347602529;0.86283206643182819295 0.072075958193457440037 -0.48968757641121440916 0.27961324355564343147 1.1582124972534262319 -0.63245067907874941149 -0.80362042450177684216 -0.32022315599932765773 -0.52064773034657407802;1.7806532022413201766 -0.4656089060199968821 0.89803213760249422926 0.70848618741170177326 0.59409734426379245953 0.81084794246351077351 0.83024345725442982857 0.47736811367471793099 -0.10686298589682345639;-0.04772108496635495134 -0.062489515043252064075 -0.12184420506627449687 -0.3314521514156934523 0.24498701374865480829 -0.82252344762729423522 -0.61262473773195602611 1.020950464922826928 1.1036443846603272156;0.53598950588038796194 0.77382146927947670356 0.64436129239872474983 0.0054122614635414133949 -0.7132498017336843521 -0.71364463073424111439 0.61208612337894208189 -0.23223058982431543651 -0.21891315891146170824;0.22197108417079686182 0.86306585091006915444 0.76418489941370093543 0.83930012219943184171 -1.1743448360956096899 0.40971847069573102962 0.44107439373086559931 0.41345504339224187218 -0.12399420583378878424;0.46666250814111687184 -0.20543981279954010022 -0.79320870895436779158 -0.31241669626339840793 -0.80576403906287552559 0.88821752246608676185 -0.4736965254190493857 0.93795094118439670261 0.1401438384808387505;1.5145281454017867073 -0.50088557711690262497 -0.82130277683296692981 -0.24236818183957090089 0.31896693544660187358 0.050537117224310396102 -0.77164189402638749815 0.64927706990529820974 0.25535610090773730452;-1.4033247652209110967 0.92753328898687548154 -0.54768983493812906094 -0.13611110799441844543 0.025342361775615947217 0.38393820033110642731 -0.61708249801961811976 -0.0090859523317513065516 -0.80671888461866658737;-0.66402362731653574723 0.71694739835059517752 0.679204904293732592 -0.87738696570499996596 0.69758712055269522789 -0.49845526241908999499 0.29156889967591104185 -0.14600293699996225172 -0.82655420166071225108;0.61800728076982214265 0.0028779144685610359711 -1.2482872285101431764 -1.3176858353335070273 0.2705606162055820274 0.037475546525642389195 0.0037777921497971697629 0.33198023297918621832 0.39978485813203717969;0.66310870947493183447 -0.57955539264269617661 0.63181162266399371052 -0.52015815188221570242 -0.74727095366775253549 -0.11528423852260198668 0.18698919164385460756 0.052683207508268464769 -0.81568713893045674546;-0.73399398178263930426 0.24173381030591920005 -0.17046901268535527563 0.887583883393951667 -0.86746375845923850978 1.1825247127529356916 -0.43154256015928099677 -0.6043390238479837695 0.2520620054381562114;0.72257780343546873514 -0.62652523279878447049 -0.21465120205032353629 0.39615250418019909429 0.63974988366349405666 -0.80406771435554991179 0.63921261620394143055 -0.44575844894148086706 -0.68809490792603078546;0.89140285781842876212 0.52989758128018327188 0.18427523082169161572 1.2711275752700237351 0.23758980875680343892 -0.35687280288253281357 -0.68837109969105902962 0.22343928334970017402 0.65690406116083821519;0.56581973102589377955 -0.76415983607282578216 -1.1405040090967963895 0.40557503950021683847 -0.42972179380904051982 0.3356374808673749377 0.75076478836259818994 0.20521462814407012698 -0.18276414792891340633;0.81714659660228272653 -0.24046023454580134349 -0.050413302503768853136 -0.91517132993829453103 -0.69100062113793980778 0.13575692159398070058 0.44922251495239640118 1.1469200731758679712 0.80439660939561619113;-1.1754964582977323051 0.63735223286387143737 -0.93502867250770382856 0.40024178909645730107 0.82535868544166346439 -0.61728198164001346626 0.53093718030530079321 0.24801108278889827385 0.12810298260006694471;-0.5094685344199170185 -0.40761737218085741796 0.87040156905604471049 0.27921367520289658293 -1.1871019289577044997 0.14082622957034832134 -0.40633037096915280983 0.37878940125508908654 -0.92047086009901835091];

% Layer 2
b2 = [1.5161890170940299782;-1.0734579013714240503;0.77373488279883606555;-0.52364496453030473511;0.04416633939146850929;0.18901541632969920403;0.50715902611666063837;0.89096968658632946791;1.1781987280288137576;-1.5873180858091759937];
LW2_1 = [-0.24447047524124759788 -0.16969128232476582419 0.064370829320815309282 0.35223659931030415482 0.55207654322712840234 0.32006333565315403522 -0.32201099407938504893 0.0053262002705544396475 0.70780577575334002738 0.78217940953432951723 0.4376516179271131568 0.04701415676823512968 0.25459845158677479882 0.092830235931926935455 0.45123955427153750186 0.25942695303442381283 0.12200779913068665605 0.21176149493506971067 -0.13886535328415652857 -0.24654534978996953121;0.40054190701924136109 0.0011453895736322390608 0.51927582662256699386 1.2414199090038384732 -0.61246749327428418042 0.099387806071751891301 -1.0446860247000746558 -0.12662268486353528418 0.44691112900527774077 -0.30999138357926442344 0.42179672267300194477 -0.20858194618526687547 -0.046764957386641117787 0.030569632102064703272 0.4805234275804353139 -0.15396831738025362757 -0.29054231143181208363 0.082643887852766551028 0.1520812196306895181 -0.55242241690001370191;-0.4570915177230684967 0.21173400190662211573 0.68285461377499412361 0.34151340815893560521 0.47275127816648337964 0.2340461821466258141 -0.31523713451165052968 0.64513213031739558012 0.011229521906467814993 0.02270235564704006781 0.1826419689480584807 -0.55719513081137583832 -0.30517077875700543421 -0.34492142928660485257 0.13601201726261102909 -0.32131851043250325706 -0.22672044535616708849 0.086629046384178134965 0.18315446848792560353 0.091865669524980889116;0.3351130279368493281 0.1528467382778657957 -0.49100617729187950866 -0.41656097583770151926 -0.21205609948318060454 0.20276210813238754183 0.72548940931320804459 -0.11739883486375633781 -0.27450879533442634761 0.22856999975968253502 -0.28505113221243527644 -0.6126169780679694421 -0.11494538731643176577 -0.17753557077064022196 -0.55562163011043608218 -0.68246227718190677347 0.063025605753488436744 0.5395395534725176967 -0.37520661087423151647 -0.30988527075270233535;-0.26267539046827848015 0.3639130603875887493 0.31866317130711474537 0.026893266361406736875 0.26448146818848844442 0.29153277053925391593 0.11840684221690860045 0.06597885003170773921 0.43557395544614496696 0.33914636804344006071 0.25280441922090812756 -0.36852222383965971275 0.56422515530908867731 0.6494413878269750251 -0.041052853554593829455 0.18816086456404593208 0.14323411725059789767 0.30926739206058306841 -0.7688108320692620401 0.29378585902472270641;-0.055233371975910730556 -0.53421355017218707939 0.23305053587934349002 -0.013626836223991004374 0.45247070906288738845 -0.33869574488375159271 0.086134796353248457845 -0.16383246343785071164 0.0081641858586447221824 -0.3270830974230726218 -0.20552222381817075725 -0.54950808581738763703 -0.35595646476803316505 0.096776650330478344864 -0.056607177641005118618 0.944516828911529438 -0.27481478913300694256 0.60968107454758502239 0.28824441403414791107 0.59941929557334550083;0.41102402337381666042 -0.2578362106438353285 -0.17787167970145673079 -0.49296678113767455898 -0.27711040217836530042 0.09637506074581425608 -0.081733770598250113371 -0.41166280952121975245 -0.47400698217423797853 0.054429051010860707294 -0.42832890352471880702 0.043110023586074408541 0.025956675680097001518 0.27136713868359185753 -0.091186270608104275093 0.46735294200271659815 -0.49550299739983100222 0.47442902140776505027 -0.38645272139609554429 -0.50585547382454554288;0.31395859399224090858 0.050534854760347733271 -0.1509298223386393023 0.55865919857430823559 -0.2311039023987018215 0.44543119078091608642 -0.040885438338174630302 0.054716549468408148815 0.1805785756504226236 -0.41474499709692441707 -0.20914547325958177115 -0.34581193413718031016 0.15903276915295455618 0.57929190024494237043 0.021646622560208675368 -0.16314536972640711343 -0.65244727706931970879 -0.44247732619653951103 -0.025680574224322190446 0.097811716719870323011;0.061822512077152225185 -0.63304941371314982224 -0.23567391981450386274 0.55970993225912357705 0.10284447115436864961 0.4714382546048602185 -0.2378347794735140297 0.0031326956517139835715 0.34205058090864637332 -0.11459236570692953039 -0.26972359030364767563 0.51691926147044198192 -0.1722261360945032127 0.39275787048269089619 0.096706768563599526667 -0.6258322072555151383 -0.51142150273487774204 0.072562634291384014995 -0.66260056518792187497 0.47016382630093078721;-0.083213360826292256944 0.56481689892142117326 0.043445093681930085916 -0.11340590936918072684 0.439419394770518279 -0.17952321169738125195 0.35839944429803965997 0.13172670862282839788 -0.55317394206857839478 -0.13154144384353091968 -0.09396496011208389787 0.17041200927872937609 0.23254380215464617865 -0.6498680480724051689 0.12684178065843867977 0.22203057830874745049 0.37322839292981496717 -0.1521109175753100895 -0.22146545163842906723 0.58611424443869697409];

% Layer 3
b3 = [-1.9258669656758096167;-1.5565627867389530969;-1.5366021132380272007;-1.3231407366117007296;-1.0805170305680940057;1.0139387154255954382;0.8820470584377572143;0.51970306240883912263;0.13918898445600585978;0.25493793727451807829;0.238788109792362091;-0.33539221217364817429;-0.54899243254043506024;0.87370955099210578787;-0.7780563312976706003;0.85935096255879128702;-1.2513789989762189592;-1.504684619881825558;1.6832913775646272114;1.9356808638558691271];
LW3_2 = [0.74193918758533117241 -0.59836558671896944439 0.1961374648934381959 -0.07975621040753133606 0.22056452093495804156 0.70037335222533558809 0.43826456669983532288 0.51104976676783198108 -0.80882173681841207369 -0.70830434054663626853;0.83229271555238870661 1.0286104191666314289 0.040779768336156124731 0.17445975685117212639 0.09796831570286851365 -0.69347574794551014588 -0.69990993707324000717 0.2567013929329836075 -0.006749592472316132824 -0.8407785237684346491;0.64592959074767797301 0.36407427116674734302 0.75485226526040349881 0.18512918467904534991 -0.19072471001324176054 -0.83616389405507796084 -0.028207574613635551242 0.75903710119132350442 -0.70584225142630019345 -0.81578872221752685157;0.51694244447757364824 -0.64565820045881450184 0.78625152524483499228 -0.81813492048978431193 0.75516970623621904046 0.074130557545777256423 -0.4820392891044160133 0.12056184141640594043 -0.86833595849979727799 -0.48645273953910933562;0.30554469039811582576 0.15221234908943898079 -0.29760856467097296374 0.12234478540242040012 0.99976724651243054076 0.053342072466633944083 -0.24549489337070742878 -0.74316370176714297013 -0.73662408503247733815 -1.0601658077410414105;-0.96867955914099324044 -0.54089840153476131945 -0.97082341787124093457 0.2527732213779509407 -0.025152150809892775962 -0.049217408700656481435 0.53154724705158784559 0.2360500196873937806 0.70857067043245269833 -0.69710277196172343306;-0.82304227937938245763 -0.17574339304773198278 -0.43733343446009537159 -0.79772417134538842198 -0.22208196243186736907 0.16621989453248484092 1.1309623147788789854 -0.16209545628319027566 0.9391834896371967778 -0.65487899583382991331;-0.32006568189406642277 -0.90187930304151153749 0.11576423505285371451 -0.25290268520854802814 0.59706303738648525137 0.58175898381231794243 0.08391331177276606379 0.69479357316410139678 -0.59268580871656828535 0.29033294875214610276;-0.52605959989874373495 0.75880856682481256925 -0.59086551512544815967 -0.47308568459605254697 0.72896457406691705927 0.56672441959225450248 -0.68823886500596709315 0.31001881493086713704 -0.52722343447290631602 0.065601434299305538822;-0.50138138554578548511 -0.030366744555999188732 -0.18347486316886157942 0.57606494530712748503 0.38057372778458659068 -0.22440551560666482933 -0.59693931822710366575 1.0159773175644362109 1.1620659928918148918 0.0064265213534302687015;0.72054182971270375191 0.11207188294510413151 0.1520895259410416922 -0.22636274876942136247 -0.64200961458095517909 1.0215475075178288566 -0.60049625026371011849 0.066011734384617312688 0.72595493392038912273 0.71964230886503510742;-0.84799807845137353812 -0.63510643156711732438 0.65515739264482530935 -0.76405335253929751449 -0.74681077812822727058 0.50605226548365223049 0.48001155893062896762 -0.32786408471709926893 -0.14719659287033751149 0.69717199119463779677;-0.81978130616916222717 0.71327308335518013749 0.7435939345210460516 0.48026715012537157801 -0.69628907801940920219 -0.41474067295424171808 -0.41803238521056051979 -0.69877531244820889622 0.24534264249162981986 0.11780480129124952515;0.7663647006129422623 0.66504575365671281251 -0.24800452669994593746 -0.12176185793681264247 0.93230182280395679228 -0.69592923943768425499 1.0812787790718112468 0.41265684762132603947 0.57520406199712248441 0.2560834086372520968;-0.72383338721297918461 -0.45673132354227818919 -0.14005465198592317866 0.90977500340142281043 0.2415415318292447322 0.47494228645915126386 -0.51294184931431308083 0.66905440334636967492 -0.77188122258506475237 0.6206987775135088814;0.16059090075702042721 -0.056748781555632912821 0.80881889745876534015 0.71550942759410418592 0.0080591306583682187359 0.93938133191218686768 -0.015982334909581938365 -0.62892426047033223035 0.53262663181324632067 0.9597849356857328651;-0.52656876424092813327 0.18496505502104895746 0.38138282939491241486 0.85827570529176266945 0.18781861293611121222 -0.77966158643366556547 0.85528471827351015833 -0.88010226810693470423 0.3238474153398523403 -0.3211176131570516179;-0.39912337087167532035 0.89893848381897079047 0.43660620982880893326 -0.7638273714406331738 0.80458614586986842987 0.61965293808942201181 -0.19613590070523762021 -0.40243712444366297465 0.031430607391779240289 0.76374583636663606612;0.27822421521000456623 -0.75848729056941777138 -0.30956120967963329793 -0.64301607585847209148 -0.57520024705751338079 0.50050708475051197688 -0.55492823311888939131 0.65236365484641056778 -0.85811420113217906636 -0.6770833651494853056;0.42911804768263028809 0.56848710476240549294 0.66622235290289089082 0.90808137525336296569 -0.85262329941809722467 -0.42085216223482613263 0.65890951939123643122 0.40497156040823528711 0.010936622383236827699 -0.27482181450487547236];

% Layer 4
b4 = [0.52437426953412757946;-0.51851911152902618873];
LW4_3 = [0.032787285093878043574 -0.5605234770303938463 -0.075482344771408763084 0.18244041166914121144 -0.051943217392705506863 -0.30380886567169995693 -0.68398643569214268023 0.20020212392412756186 -0.46953412974433106353 0.17937136009682108639 -0.34842099680930099792 0.23640211428436935792 0.63270289019128767016 -0.65991201102390706357 -0.039369261334321822843 0.078751201304210746712 0.31784638232133621827 0.12436142949500585131 0.266121184726936022 0.82897251111749881147;0.27270916960528629458 -0.48965774892586305667 0.1973799094188442016 -0.31415494945023997309 0.021321005512177391289 -0.33069133169915648773 0.29376932879813011379 0.31458535424736944197 0.75026507377157969358 0.045879887259804290334 -0.15462541666273907359 0.025119066204305519341 1.3416240009816047252 0.27834890619081781304 -0.73858010095107795578 0.26967287177249871233 0.25071531011889097718 -0.36516378693614520712 0.25152207075374960477 0.53030473359204177708];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1];
y1_step1.xoffset = [-0.999999999999798;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
