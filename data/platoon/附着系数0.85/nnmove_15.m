function [Y,Xf,Af] = nnmove_15(X,~,~)
%NNMOVE_15 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:12.
% 
% [Y] = nnmove_15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.16713682045576;1;1.06280946541617;1.25860803380294;1.01333396529071;1.04673144715384;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.8523492076218031066;-1.9493798911485085146;-1.6350201810026050442;1.0351394201275343487;-1.2790925463063291811;1.013792133730069267;0.77100461306769341174;-0.78005085811218810576;-0.25141123422299749279;-0.62217673330414435817;0.42066083168399098779;-0.16790967016444849347;0.60422725851574343725;0.23062777247323146268;0.72350080699723040567;1.3725841330107031446;-1.0125964386259378447;-1.6561376514033090412;-1.4032353751891215587;-1.919069117378402467];
IW1_1 = [0.99482811088111344766 -0.74779344945699011138 0.55532649503988784634 -0.22738991450212489576 0.70155609491496018215 -0.28600956895544082936 1.0021071950747832968 -0.58279475284901960386 -0.10345284950712162197;0.052408355345706807149 0.42810852859904935386 0.13674086468985360843 -0.54217007312183385093 -0.69646275886753317153 1.0907599911381731239 0.66413744831031695792 0.42827237215316932284 -1.0461224778420254999;0.78530805097027012174 -0.62668545771414851941 -0.42280362544474070496 0.90061246275992346 0.065553152130501141093 -0.78853691285463101135 -0.89737265963008117087 -0.1023252512220927668 0.0035849909694185590203;-0.76269354786423815273 0.27495524508156010679 -0.022047646053469354549 -0.036447906627477141828 -1.9909480054364907531 -0.39001221283074938295 0.21739575200951249956 0.11236499606803239393 0.05358541238316582439;1.1400850478041191227 -0.86704867455884793159 0.867505184233615112 0.086957717956016700178 -0.10017203052750829617 0.60143085759060355144 0.032076937222172738351 0.48109513664421943435 0.44785044392602046948;-1.3230197443443656447 0.32162655509440063462 -0.85786993811373979391 0.33406354909951613275 0.13717985793532525007 -0.52735773815100828177 0.0043253365387239629467 0.61966271619561663631 0.53136211014574930012;-1.0313012757189186086 -0.30710614682270026554 0.030528304046611082212 -0.97365620606254965619 1.0871138270633959877 -0.4385756626313551676 -0.31075391490829401553 0.50564172516674044111 -0.47528828924426852476;0.66201567111506753882 0.56997484700715927985 -0.60798277933797384431 -0.21061605265995175795 -0.28207556467492095331 0.46760692932471598082 -0.74836090892057405277 1.1099169306721805572 0.35426085882604546606;0.89918785600284822923 0.081468757477595063476 -1.0208779634125788593 1.0904708247975618551 -0.1146611665840728822 -0.032326560146238317306 0.12096492542018824623 0.87033969800578214748 0.70403293208012307502;1.9244838351673319021 -0.56037498217117565069 0.32807732659858901414 -0.018502997103242938698 0.2438668093176769025 -0.31392001342228315064 -0.71790212201727687802 0.76823918802998314437 0.010015571212631498368;0.17935926206221977641 0.82385569794891155837 0.4639162350231387788 0.7342520435567597703 -1.218132430259247112 0.24999265522081387525 -1.2254843314598620196 -0.53592151231170725989 -0.54833622315410168735;-0.75254634586241953009 0.47974438442952005435 1.0420304365569927896 0.18494941779887275057 0.47099872464257153126 -0.31255519149689092728 -0.60196588377649962176 -0.13010199610111408686 -0.96845098034356380534;1.1467574141483438677 -0.51820320156906873876 -0.74675142161861574053 -0.41504734576922169831 0.042202271063041384147 0.90152106169903800659 0.42072090797444827714 -0.083422731779497411031 0.96367703109693592101;0.54128790124561498853 -0.54886714821583004742 -0.41694616191977351694 0.78364050744524416103 1.2314978712451563059 -0.74843005825260855435 -0.37636336439193884829 -0.3823393783153850034 -0.34832059360003597703;0.52021035701383167016 -1.1587148845226948879 0.84609492619016080095 -0.068288382954808463099 0.52090865426328591958 0.033850076089143268931 -0.75106502681717335346 -0.63953326775940089188 -0.40075684131305872038;0.41443789100592731689 -0.37542480340128786542 -0.1118976241597640503 -1.1344805690169403878 -0.80968104103264437743 -0.66153172310024033198 0.051588552358982742163 -0.63356693924989326838 -0.29736734430683547936;0.10431868356782783569 0.62305870247194361511 -0.093283795793321494516 0.67343834640574651296 -0.3191470742930592186 -0.20177976691627286243 -0.77253605819688164758 0.87731690747417911957 0.65591353156347020903;-0.20136366406890118808 -0.55413425037197305834 -0.77361499850008508261 0.75865282159391966843 -0.4789693284867905243 0.62756931620508671354 -0.4509072146250326929 0.32097944831972669011 0.9144035687172382687;-0.31030330848872927918 1.0641339299066898683 1.3213439979056162965 -0.16375874368038403905 -0.64046969002926279479 0.53940880510015531968 -0.12431196121233017982 0.058969391417754910001 0.89885020761355438612;-0.74325878447030990781 -0.28973267234305866147 0.22759012394224936715 0.56290098727544324309 -0.041960657577897832182 -0.3669758769817501598 -1.0718495612110172654 1.1220373980387310375 -0.83256481736421816819];

% Layer 2
b2 = [1.3999638278064883146;-1.4960690693223497316;1.1771917599703816126;0.5070305341369421015;-0.20330843960228411893;0.15334223030988780589;-0.47582333506426754965;-0.67429442430160346778;-1.1941826075337282909;1.5176692693401434564];
LW2_1 = [-0.5701516717417236535 0.5592252680939693299 0.018310136818647571033 0.85447562239014629437 -0.53633517640046790564 0.26720328150606426076 -0.11656061941979849184 0.080451543067931063913 -0.14252450654608972425 -0.6803265370129903955 0.011305718298133923122 -0.28044604203198952863 -0.72673462643625785784 -0.87286085105922339711 -0.25993453565366453351 -0.29222999354254852733 -0.22217203217892958489 0.55601493861939210728 0.71153425035097284113 -0.058363155265842320274;0.70705732408406440914 -0.047054393205829617153 0.45204251850974108695 0.16428488152524528543 0.3040719388654319344 0.26776028982149074897 0.10579473850640037924 0.5146626495559394332 0.043916316944539714184 -0.27719633766039675216 0.11754420238727761316 0.51407644175367739336 -0.32388177219757091629 -0.36925172341142237231 -0.1002704065722006127 -0.25532718812290511323 0.431451157999212076 0.62732596325775313861 -0.29967753609300018525 0.52166067374604752072;-0.38562201427264464204 -0.092652162476792171431 0.82529481848948338385 0.26914606084549508314 -0.053720104778474123131 0.34744664793304597117 -0.26816177258189882737 0.69313873303681672322 0.1899825140845138316 -0.67746036037822088272 -0.22716758260792654922 -0.010147529236441308123 -0.73981244404755441835 -0.22840724323269614993 0.89341066810902269868 -0.51326590243610881181 0.42360089753817498082 0.085277489622644003786 -0.13338289005933209874 0.31267333257686724668;-0.46904999063945473914 0.44252050502081080596 -0.21452369848493255122 -0.53866462968083839158 -0.54999931924265310634 -0.017850573749997940276 0.28776911765834189971 -0.11225069327613274028 -0.43701337128385947528 0.38677313726227552371 0.12563743075786232284 -0.29621785918758858358 0.14208378481161718088 -0.41466582867104173626 0.50715519258196595231 0.60271411437863620097 -0.16108939268804023381 0.019734795123812102352 0.39166766087722532097 0.38687318334332065906;0.058346215314006459607 0.41263903187560602159 -0.1436406477031018647 0.0014326413840535043992 -0.47335072551680018593 0.55227068735782880449 -0.47601674470726434985 -0.39352329537933555814 -0.23977209063155968671 -0.47721753253244403314 0.068024579363192685943 -0.49144732578133554224 -0.24351280030707178614 -0.55605354934837858405 0.050977210726210649139 0.21797858841014741693 0.5712882276735272713 -0.4077995013743364594 0.027111551123675831088 -0.39636386333878276256;0.37844424346053429087 0.059995197802918523444 -0.015905194970563311246 0.62534336913765331545 0.25924106645779665392 0.10291388985742527806 0.53049663467307228704 -0.20424702755694287837 0.50351834617819202222 -0.42937398949811050874 -0.55851381064520511099 0.33229041371875744915 0.30441408260989794021 0.5074778013464905646 0.59511835376347455018 -0.54296129106342994053 0.41622188769201656777 0.035342728136983775356 0.50858080941194416802 -0.45604453020290830478;-0.18815614206106237583 0.10209295038515335541 0.22071940993878919057 -0.38530778128369097546 -0.42679810257031836063 0.21549905595340471121 -0.23769924347218207572 -0.51489441751400100156 -0.65557077233388350024 0.59126319709706576244 -0.097551277182265694332 -0.13737967334914533146 0.50441005535734551035 -0.65652361406890125117 0.40638712470411475497 -0.40998977491958610297 0.29639502303685955065 0.34941178794378185968 0.49288422082280958225 -0.32122359498378949549;0.21504622895386166226 0.29707036863416941275 0.5619827786683191384 -0.83767857856603844535 -0.1550391167771619505 -0.45556949428051340956 -0.062652088935776201195 0.017251723312501146546 0.12246243996250325003 0.62125130025434727177 -0.95585102420873502282 -0.65566045250752913454 -0.40918191670166442764 0.33787400477090795414 0.37387091678271833217 3.663093608817155622e-05 -0.66238326971314009928 -0.066015965010600224927 -0.48378081140563838902 -0.040497471606929444365;-0.3520647577589062216 0.24976826495542767126 0.31347989268051107414 0.30486152430762036847 0.56428451707715576724 -0.010686721910628513288 -0.0021330126908731122937 -0.62000073943284528255 -0.48178726735515536861 0.68551306775969411689 0.11396280080176530991 -0.60919614492389373428 0.34812350966933891527 0.44506232402361317613 -0.22234188786590844411 -0.14823476809901037221 -0.325547691027399555 -0.15846491468029605398 0.42184684349188122932 0.36620939869099411457;0.13162874571917926314 0.052335289075272947712 -0.22201336561198303787 -0.22997912870285214249 0.061798117760750351235 0.35598352037225555744 0.69168595888385941972 0.073731252352895140789 0.3183239314213746618 -0.4377225350097002643 -0.6248445358747719558 -0.52068983698390858272 -0.33465442743706541595 -0.57229714702805312143 0.45056398563197602725 0.26578392775226816758 -0.20181967854002569318 0.057960827751538143704 -0.41671579134328784466 -0.2669078039110617806];

% Layer 3
b3 = [1.9108265218062094881;1.5873748096289672649;1.3366794763738054641;-1.3105038526549313005;-1.1843077765557015191;-0.89290812743484082592;0.84887546749783715505;0.66936801950458624244;-0.31407540354583407538;0.20994246961155399456;0.066042344473577208053;-0.18342994315446459197;-0.37559994754551778717;-0.79247208612053354759;-0.84028747267575865099;1.330209864510521367;-1.1276781875125589938;1.5321150337359745741;-1.5475745354074592619;-1.7306045344887832638];
LW3_2 = [-1.1599981238894445656 0.75239954101476413939 -0.57413198161874712255 0.32412051382929879528 0.85253514918991302185 -0.16739184602387985334 0.48890082388667749358 0.2813564374752899333 -0.17636579598204349395 0.12290654106549575575;-1.0100342452188411091 -0.75655960766104413118 0.041010514656305882553 -0.27080896295722306499 -0.23351061828332603243 0.3619685904049682601 0.79413368138260576057 1.0049841474987630807 0.66222321065662981265 -0.14059906613982389723;-0.98470409182764351286 -0.086929460364248756221 -0.91068874302483382444 -0.35469475000177852486 -0.72106888703490068515 -0.72307266544049508816 -0.015402161002390333741 -0.64392665056553888281 0.34007248842186843518 -0.35057299379480377777;0.40384871217563877988 0.89577931848904235324 -0.39864193607953046783 -0.55397895748524528248 -0.48387074658315987197 0.67056387000739337001 0.72606091485963319965 -0.48786411069265556151 -0.72876821379863498951 0.56721456850474061273;0.63857967083429278965 -0.098816154769721886719 0.39135707082347281904 0.32026780908383145619 -0.3231457418619683164 0.018006562959963293147 -0.47995697596845665611 -0.87639851814035496513 0.91753728596445605081 -0.042693292243255243079;0.17519171407021510989 1.1954418485552793516 0.15613226810186045523 0.43370886107293826761 0.63894473542183127801 -0.18869027571814761535 -0.91223805642517397096 0.76700128929906474795 0.032724690125638868088 -0.22560514590042257677;-0.18861497058992837683 0.70579352049054711049 -1.241747039768665406 0.8174684538857764915 -0.66741525317188921118 0.084730915948695792461 -0.68077803398574565641 0.34336087865815723141 -0.56593715311193193429 0.015169998048763611714;0.057454073379461068072 -0.93629651743896125105 -0.064898367940257717379 -0.25056238667031621725 -0.066825648893719016841 1.09139444558882448 0.63832461427312581215 -1.1932982241411991264 -0.23106229630337080105 -0.23093343625250564721;0.41689148765331202062 0.61994453159835827272 -0.52775740276401827966 -0.5627658882833065368 -0.035901994650376307938 1.1039497838579923616 -0.75637253427599504541 0.75187191948610898606 -0.32048289123924600386 -0.33893458069459858617;-0.32083140175273683337 0.44396739825482267605 -1.129956576869082463 -0.029912711229759893217 -0.050168772844932082999 0.89200704260956209524 -0.79894842412101452211 -0.75865645838096740228 0.41167960805899800336 -0.17161419792493573522;0.55393303754210654333 -0.55920347021297178713 -1.0520355121060880332 -0.15989358462246278103 0.48312385964613979716 0.43260634069877057506 0.29029581769127910107 -0.74281396002668387268 0.57051187231280686696 -0.1204216466592353818;-0.27334425806614082166 -0.50139646541130644675 -0.3872545933872323376 0.61388989194923826442 -0.58996072881679573197 -0.45631349460650322269 -0.79461867956590959139 -0.51024939875244035292 -0.49492248447241038445 1.0830121783193260576;-0.066473174904667337026 -0.30598141955007018833 0.63240159857624944628 0.93834403508929342674 0.55518571966512253457 0.36135931517528602219 0.79159247793982978614 -0.39617976131466436929 -0.59139936580143215306 -0.52814133963366494129;-0.25294623064365701071 -0.046201081914930615391 1.0569036126343602788 0.14057958387133981382 0.049952932263582786043 -1.0184195852217268197 -0.57243510979988709853 -0.26158264384642887501 -0.37472121150289627867 -1.105573036691368749;-0.64028281585557877964 -0.46319948110483166737 -0.68494052049855713715 -0.27040972872324603449 -0.74329600254017513805 0.081648117815746920622 0.79112244906263173849 -0.055021006141869735484 -0.62064239005817778416 -0.43136841898614886048;0.89001890458789822969 -0.24581325649456114979 0.87152603265605155247 0.48986704037425643499 -0.5347863822221944341 -0.2074081077356590419 0.054495443640695265253 -0.089965811815516716354 0.81452138783619065787 -0.3077762849391635358;-0.16814117805126863048 -1.0587733937203058776 0.22267244839727115546 -1.1059885775729514368 0.2828097834340961847 -0.50720402410075859923 0.077735568559499715335 -0.18308737311748907173 0.64661410506859051672 -0.024933375498858934005;0.43691297997944272824 -0.83380319196161989392 0.82437868246962009433 0.035461408661548114718 -0.69243526987740322554 -0.47127825933123340674 -0.90669648093832255764 -0.12725830172923124906 0.60501174365849919035 -0.13747029195722446082;-0.78359442440158877385 -0.89416050333058627597 0.21649336719446718447 0.70349050895073461653 -0.68631029286614708695 -0.8866943698187386147 0.28319727851724008083 -0.76429000688539983077 -0.13072061122323574978 0.4038571453134213729;-0.60655893374285341224 0.023918902295923475526 0.62636761351722758384 -0.58783059102203849555 -0.96676018040603795001 -0.76784359732228679718 -0.0782884364192365928 -0.90738279404811117423 0.47620663235399468549 0.51911983337533518235];

% Layer 4
b4 = [0.59837428874597253792;0.29165367865365793287];
LW4_3 = [-0.21331043335078350709 -0.030680388676094391687 0.14822144130454725786 0.02630166195855040967 0.79943983001555862788 0.028169688117922003778 -0.27526185482967074902 0.10883115612780923376 0.73887157013090920543 0.91501522901057141812 0.38915377151450014637 -0.66462842497323770807 0.048532776885496078934 0.8576817743107705283 -0.74378235722527474838 0.25990578381585111023 -0.29567347677352345814 0.047657144113969027166 0.35447590418173485771 -0.2038140860247046604;-0.21177872874660105817 0.20657734672463318182 0.10055733363565873273 -0.16262089077677002735 0.25027513526249051123 -0.59567081788867637382 -0.032360651069482798681 0.90149430894162474459 -0.15602980274177408182 0.6986829995877081867 0.55739875221054691057 -0.38382090727091988658 0.55771792957042343186 0.77744745111164237361 0.55745419356966185997 0.33078027649513841446 0.43208063830011872453 -0.44789035737306470697 -0.015096994870270144876 0.62419139431649617311];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1];
y1_step1.xoffset = [-0.999999999999798;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
