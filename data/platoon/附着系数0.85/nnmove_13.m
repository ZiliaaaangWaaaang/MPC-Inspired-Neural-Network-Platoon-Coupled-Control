function [Y,Xf,Af] = nnmove_13(X,~,~)
%NNMOVE_13 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:08.
% 
% [Y] = nnmove_13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.33937173704159;1;1.06280946541617;1.28680884651708;1.01333396529071;1.09753168206265;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1306955507372822289;-1.5455665559239903928;-1.5321777813564634307;-1.2349586564626953145;1.0931609227594512035;0.46566729526172612186;0.68791580390604856188;-0.51518901987695731037;-0.13541894419945452177;0.039113569316863702752;-0.019860436046727564935;0.35588842802824643963;0.6007636743194183504;-0.59918181489944555285;0.91652124478851904055;1.0309509943185584113;-1.3683005440351356796;1.7657107996662748661;1.7850667229469532327;-1.8606214573925896616];
IW1_1 = [0.67181299156383933457 0.28795129285821324805 -0.26711479591988945836 0.93585488504958658229 -0.85618247600835428734 0.57323768118132933935 -0.084008121614943656597 -0.232192801566733803 0.51648766314919092313;1.1712760200063438987 -0.065697940163120222001 0.59129353312928678577 0.77735728738158416107 0.72024710489793086765 0.51430027682243317777 -0.23043675365726840054 0.7458428037214889228 -0.71021155906211608233;1.0386550212352290146 0.08205332116144373189 1.281708668211815727 -0.61405945382583770886 0.046230840525305544331 0.49698591278777348723 -0.073583497634783778807 -0.72205316351432735633 -0.43743462932401394605;0.70555569447563049046 -0.72201074573922585653 0.025385387015819084466 -1.0489672326531631619 -0.73689085845413571096 -0.25007775235204510178 0.90272020123277108006 0.40673323335734146156 0.114685930181435497;-0.46345721008329610058 -0.38947201768637901287 0.97705677714100724884 -0.91413998275904362334 0.35902155591871792728 0.12666714701078440886 -0.44230771068355723141 -0.57864184072683566562 0.26126827548963482695;-1.247255352167832454 0.69067494832102993563 1.052140507977530115 0.21806334191702511638 -1.2389317281500646928 0.60774542290371391662 -0.58527163296122830527 -0.064572839238554086139 -0.081643121399019649709;-0.071465753276890753298 -0.97397258115528873024 0.25382820055921279101 0.43117612996421689209 0.73977816473414204079 0.15421238438746032173 0.93441637357337559155 -0.65938057300929109328 -0.78666130230299968762;0.48521979466189812946 0.34126214958962169943 0.099119856725709484802 -0.94834887461092354233 0.90355146061548718972 0.48642164041506197325 -0.58120933992840551063 -0.70264564510288385346 0.56612961633055558508;0.77882493191891444262 0.43952583709896253517 -0.67008616690903821667 0.67588416876372392483 0.42196463081533569506 0.47141798105779825212 -0.38302732700245950559 0.61696117519615112368 1.0390155518362886866;-0.29893745168929691802 -0.23341093848527480481 0.45171969860340682734 -0.36218579209611206915 -0.22458044944108626617 -0.53120975253399327354 -0.05133992890329738823 1.0000666535501101517 -1.2569590637178398307;0.47163503508199366987 -0.67937211861681123803 -0.87234616834113898332 0.64679863200457443639 -0.43616328511873619922 0.67123573993235496893 -0.87070881578526349021 0.68032959893197519907 0.57316054156088447336;0.26566590349837332363 0.95778109340540495964 -1.0011219268271718263 0.47339649012170903486 -0.34764715937328216633 -0.31663286416617464347 1.0045857894164711421 -0.73829293825708919297 -0.37736460657095494131;0.79825168590766626409 -0.041059355514803642928 -0.71167218200424275931 -0.96054893951069186819 1.006478787952021392 0.13234592708640385839 0.34710663060106528022 0.81235733612059324305 -0.25160070749025842396;-0.61758652708576100565 1.0225887337660313214 -0.83244137513631744074 -0.24922510647351947544 -0.25264840907509916734 0.046895945708524698625 1.0698750543105257638 -0.72602594619748184179 0.20171530295686618262;0.48898895134651071404 0.19828818945640866445 -0.053969686553374800198 -0.51547265212575787974 -0.55634465353722473147 -0.58566422352002256435 1.1004959241841576478 0.76377249627085253003 -0.72251934557899111233;0.78122128963770509635 -0.13717372073393049869 -0.0024154679730648510524 -0.32223294811826724837 -0.081095332192816879657 -0.50392039369314300945 0.8380690657601777005 -0.90006726674645742836 -1.2422047734256014273;-0.17360714740213423202 1.0811283054903113587 -0.035706955707964595226 -0.15937063564781414615 0.87920615626822307132 -0.0037006587718391575903 -0.85436476769215752292 0.21110872190070914534 0.89929994578414196305;0.60434336291673729225 0.56896615530213490164 -0.020132542077715611523 -0.024170357492652717185 0.033261799476711442769 -1.0360786900508534014 -1.1394068391278819874 -0.07737897464633708422 -0.64927959616365382711;0.67551239539437157866 -1.0770113257448541422 -0.093531038305300656654 -0.56661852331674977812 -0.50081299509269161518 -1.0380878543666203218 -0.54462486042704449929 0.12401678485336291302 0.13570488486504367343;-0.74770826848383409313 -0.7291485038553056075 0.5116435806925736518 -0.38256725627323689976 0.90309614421383010985 0.62665294546921324059 1.0182376142444986566 -0.47069233618513312001 0.29919525139757285892];

% Layer 2
b2 = [-1.5788572998736505326;-1.1699926795118169576;-0.82704360435051449407;-0.56206550477520167419;-0.23413945010942682767;0.21580077315496007384;-0.56941536267705672447;0.89165314700049624896;-1.1322751514699005426;-1.6273225391643557636];
LW2_1 = [0.21726135617298172886 0.30286397781039231525 0.24945863472887583323 0.37530029704211009811 0.39895429927866821185 -0.55167108049951640858 -0.30936079575987884827 -0.034786001396589549817 -0.45000669841580309694 -0.54898154794353437591 0.035697204648944554084 -0.55067174087398251814 -0.19716790871643127825 0.23364468143631919594 -0.14193622850354425946 0.50695805199275933983 -0.51242225646589367738 -0.42709082671081516347 0.07963653488650643264 0.22246904119159541247;0.052239219433338861254 0.3017020742687465118 0.38970108323907576287 0.007992864423866975071 -0.17474386620414694704 -0.72456778920339370842 -0.56975891994629546122 0.44653032772116518778 0.12849455738075840627 0.15275921558261731925 0.12695852061904633334 -0.46009144446640959369 0.33861934112851588274 -0.2832268878556482572 0.29821973627965514542 0.23767493747519824465 -0.09692840538929779759 0.67950417944884167198 -0.13535205331219554714 0.32026708171942547265;0.37528235527955966511 0.22394022748743455664 -0.051155378424449483854 -0.4671834853330095183 0.52452029792746190928 0.38092283697592649316 -0.36348809636850798466 -0.30431692324851922216 0.31793221212192412928 -0.15894645829536890869 0.15453558624614147088 -0.42566134804574484729 -0.53106955516058906852 0.49620775672712136295 -0.51713486701280308999 0.46622000735564200768 -0.11491162691831516285 -0.21359344889605744178 0.052888507463196315905 -0.34934331487566355756;0.29719655381485593493 0.67327150485156372905 0.65468583448052508622 0.36442982875070006887 -0.17336509362584126559 0.43137708901615678947 -0.31635960006873969919 0.022349854176784717669 -0.17518602237269093047 -0.030529658645702690417 -0.36277077300174287444 0.44031395342473828025 0.091762475625381173527 -0.36196572170901664123 -0.40784596115179444498 0.062290691876177063657 0.28241649049089379009 -0.37773145658872780972 0.29479946242103233223 -0.23422362999797338712;0.22877353831360489056 0.57210197604891577239 0.020936885160396059846 -0.1982004185184842171 -0.079714942829791982093 0.10376687765054304347 -0.43757120158580337099 0.49208289225688423008 0.28909753755705502876 0.65003480160238813479 -0.1290898926448218742 -0.41721434020073322468 -0.38252986471893968279 0.13981402246307966797 0.34456123640643865347 0.32687630730934780221 0.46107033687409498812 -0.45377112521997581274 -0.17639958006805492308 0.27141245184748569175;0.11576333567605326391 0.14261657422876983237 0.57079292233494793862 0.090877356308568552068 0.289341958874855254 -1.059342735757044407 0.42695747920080423521 0.32918388840246665117 0.17896992386658605589 0.079874263292735558917 0.2699243454663185493 0.20685627725212935024 -0.20785810241251725938 -0.37513317420293451621 0.0884988538322024898 -0.3832977636851687131 0.26624404257174899557 0.46981967671152080612 0.14853517134751553774 0.36418710653925906451;-0.091733167203522869571 -0.12840256874518829466 0.26262335682691456684 0.44330048243115161011 -0.50987699032910260843 0.25717877813575085177 -0.589008337302525109 0.19275787759396620369 -0.019738380298910770949 0.5018090330658915299 -0.53405240464375647313 0.4578664421273409002 -0.012309385793623121158 0.32736499361437843003 0.17162702955813011196 -0.79059272799634994211 0.24219315922286546727 0.024086927380915081759 -0.33770752546800986149 -0.022326905517614920732;0.084641187935087777716 0.47493595342948624616 -0.31653611818286381263 -0.37243925605361988262 -0.49224158452998922897 -0.086239027390344710766 0.14246055104603322361 0.16694729883530001757 -0.13653830434741431876 -0.044759345233635630668 -0.38008551383334793217 -0.37027489487524223311 -0.1113593639568614263 -0.37391487281502366891 0.48132497942329666163 -0.43762374807662052234 -0.67101381114625824331 0.3522692823554158803 0.17813516602211354467 -0.41659855024251479794;-0.4692046755731439367 -0.37638833666698767733 -0.20323592291169811919 -0.50296479185037934467 0.00093384053083363661313 0.61302374146329152715 -0.090721497587806315677 0.0631645828291162309 0.13262832666084101163 0.29785157723835498089 0.27779049394391580607 -0.10114569067345875741 -0.64378612990333050625 0.17610491233960895441 -0.060454717350970896272 -0.4044203158727271985 0.29943168906851130862 0.67122681794244942743 0.56266303994326138938 -0.61552219933133900387;-0.36767305774209385616 -0.31513831227648991806 -0.13049178120161142314 0.32604161009336712906 0.38202597702540075364 0.23350380739973011779 0.41934892235094500812 -0.0076161006034905602557 0.50843359424967571325 0.0084622080487031375862 0.2862794719337195537 0.63335495232853045167 -0.41068957116350968128 0.30000765183954114512 0.035260685101032473998 -0.37023144205297037201 0.093321237258937372872 0.36844094681518668732 0.24311424476445075982 0.13087001731415651151];

% Layer 3
b3 = [1.8752377585987878295;-1.6224551949179952803;-1.5753545383099782917;1.3027592741024254241;-1.0925982012503803187;0.8960518641760454317;-0.71997039568567311463;-0.52893262757005021779;0.34170892986628176313;0.12527797583756886124;-0.030649886006543530792;0.38956201367103882038;0.51747055908940942093;0.67486278528159115986;0.8857682671450889389;-1.1234596632994446885;-1.3085927067810230184;1.4960623998947151225;-1.7327641970216334233;1.9427316573044359771];
LW3_2 = [-0.65342393306265822428 0.028595839255711026639 0.52006935605818083168 -0.58086491553376473629 -0.68714466802148510549 -0.82430741775359595014 0.41319584994834540614 -0.11049800330268798321 -0.7846780475732293425 -0.77121273604505957699;0.36407856003167687886 0.08343121704141971684 0.57883037409721305178 0.22605466152290415449 -1.2290010263598252216 0.64573191681708930201 -0.14190114331294784167 0.71039165737562526282 -0.21182984908767280019 0.64466780151131519716;0.81977215175979911699 0.3982384366116795138 -0.58659691473262076666 -0.19538469080525269761 0.76660690672724296491 -0.77575660761787645914 -0.35509582635518782689 0.6023306259387781747 -0.14274495594196739967 -0.83707665480555959459;-0.60847327748555968263 -0.71689904143114957513 0.68553076713956773158 0.30801682365197857738 0.57367197118489543506 -0.37785915697994154616 0.74517669705565492411 0.24908059458506340289 -0.63774260791819725736 0.7715608915570949522;0.48328177924920356912 -0.062227263516872202698 0.34570906607349988215 -0.66193300511961594701 -0.76199482192935352742 0.79445329767312511393 -0.85709641788989798794 -0.59853533086702126464 -0.55017119067711361957 -0.45935082149035855181;-0.1171091871405947199 -0.48907868882120208998 -0.20330667461669713059 -0.926662845201718266 1.0173326117337844199 0.66570008045431272592 0.028286109377874821963 -0.3528286839146052567 0.91738018069220805817 -0.28745950680870407945;0.4857548421589504839 0.29439867158851695805 0.14109827319543619129 0.87515979664549492512 -0.095010389153280125352 -0.92016560385254075882 -0.81487939058841651896 -0.65650715451460595062 0.23358245823129161756 0.69216876283193295993;0.52697474044244052571 -0.97904115514983713897 0.61707338082671492341 -0.67023973037775386175 -0.088428865240562620764 0.14600857954113152792 0.66017143204128336809 0.65040115050388425111 -0.041664847961570293522 -0.71980328462515619226;-0.48739891831591369842 -0.37422866094489809496 -1.0068203318688255798 0.25466450228727516292 -0.5850785603409334179 -0.48347538182761889969 0.19420784494561577072 0.020461922032188165771 0.19291663925465987739 -1.1439427215005137928;-0.70915995689320654449 -0.80996299952557937463 -0.23861149204526008183 0.22806675352268548918 -0.090862323370638514719 0.86629386225031634883 -0.49224845419173685057 0.57879467076064938791 -0.032573232410692737337 0.92917731373811873752;-0.47094930026187792338 0.8919746679509964471 0.73481274694804432634 -0.91074624266409154316 0.065228783341167606569 0.56776143436150428023 -0.2630985089517742237 -0.0028072606969371527441 -0.42904915274730226482 0.8603057769394325538;0.21565409174887320565 0.20051748814681127908 1.1540557682284988683 0.37576226963525316549 -0.039763758708607641057 0.81291955385341252427 -0.72037238740587372643 -0.038785588694401490484 0.2869740125182991819 -0.93964789595067810257;0.33857922991015587666 -0.21059856127652523683 0.11113845489700301117 0.75657166838829958966 0.61408385817766542036 -0.38771508216237332567 -1.11413007875900405 -0.74005133917574172919 0.34735809322147032097 0.083975700487023227647;0.94064753271441159388 0.39398079797631946342 -0.51243923437592719949 -0.69311415854858893226 -0.15999507436813290018 0.3508103353606409347 0.61762912964826233164 0.43885724334175368888 0.54842148451063976733 -0.79413735042684274745;0.53426733075111032534 -0.60256365104672060529 0.3110281378206424252 -0.78009482783600470057 -0.68859520028217446885 -0.67124197706083821302 0.82179199651754675227 0.54938760633534700073 0.49144318970146072534 -0.1159909417922350694;-0.88867039586251961314 0.75205713271580676427 -0.83584007735181309329 0.49467346924903998762 -0.45603331059793095204 -0.65050668406820022494 0.57893886760931534408 -0.053598998914010369254 -0.093887729160547023222 0.56578729435563068773;-0.4766190526776988845 0.64703901502411009794 -0.32738167718910443638 -0.32172498951732880768 -1.2650605053771584174 0.6712544140477241239 -0.13222761170269115016 -0.22819258781401891012 0.012163390115648743672 -0.88569518210970199501;0.39975765753037306727 -0.3227934758442773111 0.7738382785927043761 -0.27564260226471198889 0.30187777971183143988 0.38564969686586064723 0.088774661714115868372 -0.29145575286667158021 0.8313302125284495192 -1.2670049730348031947;0.025061722634036665003 0.89619124517122672469 -0.49522264761700890423 0.58329791090269544895 -0.67365004311605358733 -0.76318494033137640464 -0.39466422910240861466 -0.40622520012404544909 0.50958218193869175838 -0.63693936325837419155;0.085221663097628866379 0.74779735628655841229 -0.48961975318234468579 -0.77268281884214606858 -0.51973437257202215189 -0.76256859653428887835 0.11553747026562655176 -0.9032048326158403917 0.21774103405087510965 0.086013648050302995984];

% Layer 4
b4 = [-0.45963110529403522486;0.38965020643806980161];
LW4_3 = [0.54395993902165784561 0.56184780376814003056 0.91760252091163685417 -0.21414660354624848182 -0.82688841576810312439 0.25876814488990196317 -0.55853046802550798677 0.54617076656838181581 -0.28647311482184101283 0.27063093133845483873 0.53875574863123387725 -0.66917434348936100097 0.12861632921760768333 0.46614651119964894965 -0.26078231307502719449 0.47676781695036390962 0.015109583127796323218 0.15151451565583512471 0.16442587630765609363 0.50552781255081802314;-0.74003577106852702627 0.39431624930076869529 0.24265631121964884032 0.79931468069803091048 -0.37823316347806740234 0.60278255039872985499 0.79300032528662056652 -0.34260620231127580926 -0.022232368741875670887 0.89076251558901975436 -0.67517604915121032239 0.74552432662127643415 0.4778831845763990005 -0.33973572393651646495 0.6146913559810149863 0.82709957407788603501 0.90726409918993622394 0.21558757498112246509 -0.53456951408930364344 -0.62512179549053525918];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1.00183681199409];
y1_step1.xoffset = [-0.999999999999798;-0.996333111396797];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
