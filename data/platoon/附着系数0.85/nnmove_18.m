function [Y,Xf,Af] = nnmove_18(X,~,~)
%NNMOVE_18 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:17:18.
% 
% [Y] = nnmove_18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-1;-0.881804843746703;-1;-1;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.13109940850722;1;1.06280946541617;1.03005982197322;1;1.04673144715384;1.06891740597283;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.9207730725157408092;-1.8490223800235729978;1.3861237698036181776;-1.2134772623616354448;1.0425560775202096231;0.46521035054183795809;-0.72554248954752187384;0.65820163976686008045;-0.88634091852114627041;0.21794261926745081559;-0.041673115950369432614;-0.36298334326663705962;-0.71208884723582765996;0.4652077173738660143;-0.85190274391078213423;-1.0990803687828216706;-1.1862622305042471726;1.5986487061636112106;-1.3837830105988582208;1.8528852337139269935];
IW1_1 = [0.44123306646242571594 0.035237995824316588334 -0.37046062459672080003 1.0410563162599886233 -0.84877851663672310156 -0.41477523227949542051 0.61691203067315425468 0.9392220116498892768 -0.43506285312716147518;0.57575384987779654189 0.66338483021984184784 0.54208126710763271383 -0.52874457672726704605 -0.028825056137655451216 0.079882773278802179928 0.9432007327432418986 0.80273848398336766774 0.57480132697403962805;-1.1330429810814441893 0.91146051387429583013 -0.40815039388609336557 0.32974212469388280988 0.30135214079096600548 -0.56329699092074048128 0.92117575959153641385 0.1583348649405697528 0.3598932842066166482;1.3847800857365457627 -0.92428457812314190889 -0.067750214233524050367 -0.9259028539091943566 0.70965914693883758169 -0.30282935976115504806 -0.40692766891235521154 0.21061255016145907781 -0.16763784737546100212;-0.72207040179692050241 -0.37203335213440441587 -0.11106436355068843858 -1.1762942795224047288 0.033703992785134695431 -1.1101729960349917548 0.33975108052465352593 0.0012768990924807762516 -0.68113079848898094859;-0.23936251440472838814 0.14860933232166217977 -0.88660245205968912785 0.30611905167527175831 -0.04448866862602428307 0.66512113971084396713 -1.1101566264638151882 -0.44563398122769926069 -0.75816280218284626269;0.38676017939156703829 0.30879929820577134425 -0.91067058164453407176 0.41400561589109868832 -0.9776487618532143653 0.6420216080226073263 0.61644906778343200315 -0.64479295778537326633 -0.31799303306023907201;-0.40621483695997151475 0.64915948634668929618 -0.48268344740916291347 0.73124753826980659621 -0.36177549619933063729 -0.89986349563103529281 -0.98262591706819935045 -0.29524071558963693729 -0.43315759809614789999;0.93931909111759415154 0.32285847857574295761 1.1877367187185945419 0.16737736749333892439 -0.38473229649539997244 0.32286919021342214142 -0.70146932248145343891 0.74434333586067458199 -0.30424084954365987477;-0.4435934349992408654 0.85372239428322826971 -0.7075907917186554652 0.28226273509184701682 -1.1129455222012345494 0.64505892624207117336 -0.95872429690351179676 -0.090076643554362248456 -0.23058383285631706139;0.34718581092825584467 0.42008628571284500897 -0.57547118163235677635 -0.028799581032773503841 0.90868930893761490353 -0.1977457167775767688 -0.74681643950935694409 -0.62087766783800046877 0.82614073982293056986;-0.53415919836707592694 0.35916343738821043807 -0.88909832276350120317 0.81018373966767642802 -0.051836322129699505257 0.50814064778044520931 0.089305257299910997815 0.72543573548094619774 -0.088269637274641016278;-0.41787819026798495026 -0.89420331008877307344 -0.64323648859276827405 -0.014208451961693117915 -0.78600356079353261851 0.12645322177751130988 0.61827061314129339031 -0.31078924236206262322 -0.64647193871871810877;1.2772331683740230091 -0.27441166270905315017 -0.46536638542985769851 0.94835590436322225738 0.38842355037144282726 -0.26207374440963904227 0.69591119124545630648 -0.48643485599637881212 0.23580655836390645996;-0.89496941243832095481 0.86965508996478346759 0.85678057831148879409 0.9889914625367223211 0.44753711290648295895 -0.47505699094415043682 -0.024286849625233093708 0.2218712203874012856 -0.22910380796193072217;-0.56717267109278957093 0.76776419472117007903 0.86942500852554138735 0.65103734036797578089 -0.068469382295805264471 0.24603174376101122345 -1.1059252160911032803 -0.28496402521268388019 -0.11846904818983991503;-0.49308924468981596423 0.73945676953340166992 0.98157236041324880116 -0.14177029527217810401 -1.1346173460917878817 -0.2511710587586854504 -0.37921695984297604243 0.43098966987566067477 0.44710313175548471731;0.40772085265477731042 -0.22480834766075324938 -1.1981092642746948851 0.16511806254891683854 0.46843579053379769128 1.1031180407863871995 -0.26896260859819076661 0.17500003457467810941 0.66091932868934033518;-0.92339118105285811211 -0.87114945920357234055 0.72055540076475588229 -0.040248703364648884262 -0.55340901730255809277 -0.81810352626925564312 -0.18075800562651800352 -0.53022285377566746867 0.047258783356830258437;1.0599503196065878097 0.62802177353695431972 -0.23489581509392362668 -0.84678218423543349935 0.46489143427167228806 0.96795656891474568528 0.64433256366662383652 -0.14393442023634078764 0.21280065190496633143];

% Layer 2
b2 = [-1.5982979592981083616;-1.2139158831523502169;-0.80970917299141109691;-0.4606192414669815216;-0.2022614226564998785;0.072098150551973577693;-0.68972565911158689733;0.95855248520309077609;1.2539359438837136551;1.4479181969715098077];
LW2_1 = [0.037723429380403322719 0.4500567161973061947 -0.030347881932138991157 0.37890360986795373899 -0.48328673800092780688 -0.25951831779028572411 -0.49803121691437618468 -0.2167034388058349248 -0.15828131007758436399 -0.031238368597993108888 -0.30514309186334415136 0.027738357684430742928 0.53744042040312467456 0.21381473286276586609 0.6231589581256760102 0.10049888284654660831 0.59014573968869410425 0.14417374537454455408 -0.37250917821273077379 -0.42868873204100671481;0.28985932110458945132 0.37988648922598239333 -0.030603248901316926905 0.93416109011248005256 0.067939684387239893115 -0.0018792517131859939536 0.37342749777637151976 -0.047532094593256593584 -0.48708024051847842451 -0.39356366977500256699 -0.079974655812660680465 0.074462310941027953781 -0.30192560025626463682 -0.14496063943284509534 0.31180586170392304846 -0.41285916061757199635 -0.57635218215806660602 0.2931590336843963307 -0.39179882549694949878 0.6524769385301222302;0.10737707543361627027 -0.092306736957637830487 -0.34855365640563878982 -0.004959565618560491003 0.13162749873670592793 -0.29161159301326322613 -0.576499547645592747 0.6649353850372594632 -0.52419486914054758131 -0.12321946932008377706 -0.26291298890007913647 0.7176413774142709201 -0.24300912807579633235 -0.10671792880437037943 0.39246306172966954895 0.32772278539722676793 0.14826435560969322691 0.68709481591397492117 0.074505145770139016848 -0.093202402995817140718;0.47396321013245679143 -0.014048065669343141881 0.61325645040028553545 -0.53812624855255919432 0.40053963081096266574 -0.23434402951075727906 -0.60153771607839168212 -0.38946899109260435523 0.025717884643543673096 0.17454251618455274286 -0.10756191986885635381 0.27290298107309229891 -0.71361824664153550302 -0.40725373853540391966 -0.24613467349420706243 0.10342782379592084518 -0.095457926749769037023 0.34136377743438583998 -0.30405185139655516169 -0.055984846155022846559;0.3867712152082347643 0.16402639000469804165 0.48855485603734621902 -0.11005729267135233584 -0.03927474236580109912 0.33112409315404367494 0.051019173448198222587 -0.30952037156427614217 -0.096017023591426942097 -0.64745287539714158065 0.39535147423698624447 0.67470780513557571112 -0.30857389992737033202 0.450357995415566148 0.0094223635228150165455 -0.70125517461938857711 0.23727033310589673576 -0.13131104381218244859 -0.18798805288407802183 -0.023061529634056193716;0.45885546255313358621 -0.17176105856726317511 0.36867239493007014639 0.36946562462525645021 0.60351250226721786518 -0.262944129773421853 0.2280072199463062943 -0.07686458027076795152 -0.37983623250185172271 0.3548526392189813583 0.30106591944920568782 -0.42342958632909322159 0.4002968804231500366 -0.60049660178081876172 -0.43789804496117434862 0.03472827426973176812 0.4899824157061599128 0.5342800515494421365 -0.29667877105597101339 -0.34089730399333967314;-0.35243071817488796915 -0.030878244114981773238 -0.33597040311226789022 0.16020431025103562539 -0.065754505660830006586 0.31941237543678985267 -0.4166117696299393991 0.12230004850603586053 0.38209431714141001146 0.45228614088215401967 0.51508404184761513722 -0.10257126274736882987 -0.41117989031983215309 0.35194378681092064465 -0.30025415255813547866 0.67699382186729450961 -0.06614759737948613938 -0.033001418275813376724 0.49016021658274216977 -0.18275564179300993195;-0.04076766948154346426 -0.56563014217027340891 0.0013583421670946681931 -0.36221241589119546056 0.47294812986546491684 -0.40371678781153186311 0.075448119436512042779 -0.057929958392184989491 -0.097323704001380920148 -0.40214038124025097698 -0.010630546834979028026 0.29074552395749458933 -0.31700542773440254507 0.35779180103746921482 -0.50078265001581478977 0.3025084065083983309 -0.40898836019642736961 -0.23893211832128358196 0.075213966984455801756 0.66879612236177476969;0.37563345917196905299 -0.48160422645468176084 0.3182635954356450303 -0.10834193690063409488 -0.56085387946454390296 0.12415440885530330817 0.17513530021339779319 -0.17910368606235793631 -0.028217754846162450277 0.58876797652332646393 -0.25609277379434058908 -0.60372635285712950015 0.20654624923577627471 -0.36549262214043559682 -0.24238074857644184568 -0.50102514071200698886 -0.14068277696626169115 0.27085373278994878676 -0.12973446207512939754 0.5131196901307953917;0.60170320546433231357 0.11335349531448218885 0.48907633562336405575 -0.29050240505007840497 -0.29586653700552367763 -0.011434830056206247983 0.4161338655103863915 0.063490871495494885512 -0.76393069409622182953 0.64233186866141600557 0.07462649242538545169 0.37173119812923854921 -0.03507476361139352794 -0.44458029531032006165 0.28338380846005650771 -0.30498082212552257708 0.43414445363423398438 -0.46171181415279483051 0.6049707699302606656 0.28097322884459974279];

% Layer 3
b3 = [2.0754304505671603565;-1.6580718814963772978;1.4128462140853166318;1.2950255038204676605;1.2353990288335876535;0.91317915413659411783;-0.70816953972224827574;0.66440134905108361174;-0.30110642905621082255;0.18093449361798255581;-0.10627894252272690467;0.36039644303896645194;0.43801673555147713213;0.66509626465036431053;-0.8755847265458399642;-1.1301872013641285353;-1.1625181822934314013;1.5162395157719659178;-1.6325708174250854743;1.8419408782914405975];
LW3_2 = [-0.99971827926105771844 0.23159289215600772915 -0.92403313128062136705 0.23461917371962809353 0.58095945223263822932 0.11481270096089808697 -0.68523390232509906461 0.11680194859765022364 -0.59166066288608043511 0.42123601457272252802;0.55810210702665996596 0.50056245041151481434 0.8728811810518168901 -0.32214174729310351974 -0.78742989214587866265 -0.74885022506432941114 -0.2919722873809859065 0.25099573974417360711 -0.30386667084838175912 0.88189654153743346487;-0.79487015047134634838 -0.16231365302264302852 0.33898775224529842376 0.6874634353897488559 -0.65264556070514800901 1.12815478195694463 0.65922174421005186318 -0.50278212013805856362 -0.82927344290173088392 0.70211252551799652188;-1.0194095687495192681 -0.45065248723204948123 -0.34162904957562356678 0.86839246112623746932 -0.038466963922286198652 0.70034829311792978768 0.14073950978208796259 -0.017703625602857726157 0.71619356085754148911 0.65546265282986959644;-0.76177470779161349235 -0.63290497974079029664 -0.61044564504132003968 0.69781617591112332644 -0.67326922166005642723 -0.41029162270237085064 0.39724898717115098012 -0.21685065334194711384 -0.40374236955612086142 -0.61022824017568466637;-0.04033946328930312214 0.86708116941463142524 0.29895821241070497098 0.60853447360540591227 -0.16513214247304672244 0.56482901390673756481 0.87112004987126978595 0.83363669599035272739 -0.12968917116211026164 0.7914130421579786967;0.85291380363966762257 0.14527084529206088503 0.73504293936496323258 -0.17809786906638472304 -0.94475967705401764363 0.38719924091054885862 0.15245734094217705534 0.04632279580169703509 -0.75008027711768987533 0.7960361832041151775;-0.47852419980679283817 -0.66951534494028863698 -0.42165478004836887127 -0.47885222787175557579 -0.53942432756341762712 0.13741347901683881316 0.7965192596994992158 -0.51746921236699483515 -0.0071608009063715907794 0.64641648918416871883;0.70544733346874732849 -0.77430332759129638642 0.8198331615250289417 -0.5483426911339747134 -0.03214960546020560056 -0.8343624518074593821 -0.41396782182987929 -0.36967459665827456794 -0.71125884005762796125 0.42912922107117734694;-0.12839909853736458656 -0.48272414000785207611 -0.55786259420680273102 0.31273421640641230201 1.0650233730714586677 0.74586180150680025935 0.31953729190313234776 -1.1005202445382256116 0.43360742837418003726 0.16205009704136771886;-0.56629574480044075901 -0.84972611015479737606 1.0186588084547383293 -0.59759881068795706049 -0.96747252109687631449 -0.1121511935428933654 -0.089685423603321490216 0.1919077726424338326 0.39462060824569467066 0.85309657724166332304;0.17472090386681560226 -0.79947442393018430806 -1.1650512112721855829 0.62441950385870281792 -0.59954429181950252836 0.284476745798088404 0.49576938956605398623 -0.2044292633120589342 -0.13910682865910536932 -1.1603880812694618019;0.22938912543054076898 0.9378531926996820367 0.22450429981830521964 -0.13520237634524900905 -0.30694460293310710242 -0.70809994804556886105 -0.38293880343562308743 -0.69567762447409997595 -1.0752758910319077934 0.4803181058444135898;1.1561531496989809753 0.84670929007711770442 0.34145425172743743003 0.27426515955198427221 0.041759342712640590278 -0.29714659905599238865 -0.54808586136947490264 0.86929986048971474855 -0.28406569706513939977 0.29701208618685975837;-0.16840262474847728091 0.23897553924154096849 0.88827194175847079549 0.92171830610985749921 -0.64572964502442031787 0.98501434318878045016 0.53421918289615621944 0.18327348248020727817 0.69317080950095422143 0.26880446576333244524;-0.088330983653130482058 0.46425719629070766326 0.81705762203363230256 0.098516222622218513338 -0.23584221827378790137 -0.74124682836336086567 -1.0276423923975246399 0.017430027536137562144 0.0074394247143734527905 0.90681604962964024175;-1.0772274423439875957 0.96503247682739046187 -0.27193601350353785451 -0.44284391669650080559 -0.27887145559616632884 0.3215816184208549755 -0.99217767200441153719 -0.38641967918510855551 -0.36918219862531909126 0.15311651431054146277;0.19017460335421609852 -0.61929848384609698098 -0.9585946386676941211 0.25405497376779273555 0.18291830176543927289 0.23416208036032162831 0.7592571963684494607 -0.83081892790831679552 0.84993035930434002179 0.16847508139118128057;-0.64596658335867518375 -0.45909421995153226748 -0.35877359744366038585 -0.44558140179886507326 -0.43983281947404007095 0.7274023104170179721 -0.76814946987738119688 -0.60532846350840918692 -0.40924218088637254187 -0.48565344535763205203;1.0186334042839371161 -0.32819981117666197079 -0.40183057588090920209 0.26245163420196709891 0.74331675822521192654 0.85741825738989241312 0.18383638306702274057 0.071772969828223398547 0.79454407403821991629 -0.51536571809801867694];

% Layer 4
b4 = [-0.51174107767243737221;-0.15637789218298317473];
LW4_3 = [-0.41743637943337114082 -0.73221926209280019382 1.0550735111724649506 0.29700611804842491637 0.25646211735697999057 -0.64137745068731588649 0.69650639501949151988 -0.10126019436167979504 0.96726309859128378754 0.49715393618515313356 0.4250375685392313585 0.950555137348527035 -0.61104848764893382462 0.96572407447532770952 -0.49559664000851527677 1.0684121151038745712 -0.22204159389070854402 0.13213157924930710174 0.52593060181715767243 0.66004909313236059809;0.96150007333671694276 0.78657047687522740897 -0.10844653164903407527 -0.15113020300941265583 0.68013377078407988297 -0.60506811869221044375 -0.082610251484160429625 -0.50775978735433069389 -0.01562433874265547161 0.39585297037782124496 0.40000916881846232398 -0.2176703249804555762 -0.031785896652452079458 -1.2125457094431353333 0.25188402004413523727 0.14974633893102043403 0.17438931133070292856 0.13752626366362549759 -0.67912227339132602566 -0.59314160652297887033];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
