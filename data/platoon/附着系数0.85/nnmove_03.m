function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 27-Dec-2024 16:16:56.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.587040224347201;-0.639361590405926;-0.695257580172501;-0.656730875905293;-0.716167654575603;-0.581556487918271;-0.752676008050108;-0.861207253266562];
x1_step2.gain = [1.69825171189909;1.29500746457081;1.53491027182406;1.60065309370616;1.26826958496911;1.30001945712979;1.70035585197589;1.18534909675037;1.19635825035271];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.0088976303046388594;1.6429202327032277342;-1.45729306922856372;1.4497280395596829905;-0.98642513670161779959;0.77347204448786099906;0.82557292670131166012;0.54127061881016935718;-0.43219733430796114515;0.12628786504266620305;0.14901232146665016609;0.14990061041873953274;-0.35309088647022141005;-0.36815462784653357753;0.96252689362980281551;0.88354695681382411365;-1.1688267329630288582;1.3540408593176216367;1.6101037978694809905;-1.7387293287607916703];
IW1_1 = [0.95326227859857182168 -0.67305774691607611615 -0.0073075696588405861243 -0.2998297043380863669 0.79031029722049672692 -0.75872710951807698088 -0.028008676721325752312 0.94218970360752474225 0.36589807110764355214;-1.0752714595807304487 0.83776974695812778116 -0.34855332315917719743 -1.0577500811878628451 -0.028681652062401551129 -0.049455766074568634216 0.18306299316105770214 0.91490814587783186873 0.42450326392245474327;0.033191684836638049583 0.59308033446387720122 -0.61744867689418270196 -0.12471659524909621541 -0.83041804170075561586 0.5188900992088669728 1.375547417981587861 0.21311076855153990306 0.38370125709769481448;-0.39391801352804872716 -0.041242484984707478146 -0.0080077475614100477458 1.0384015118634264407 -0.42673100805069813513 0.75850452198420592609 0.58096066938944745939 0.81925616383630706085 0.73898171482042207536;0.064918445526159884729 -0.86943710388651140875 0.60715551466338812947 1.1233591229921444654 -0.0031764550269168575353 1.0246828402737595543 0.27565184690466454365 -0.19363837086010921018 -0.64625361204217746103;-0.82206246361431711822 0.97491192083779210087 0.33595893653714242744 -0.99073234788358854885 0.92068230902210101974 -0.39806194200997058186 -0.60583503074220956819 -0.47619958629919939552 0.4073896292379833306;-1.3767844020304094155 -0.063755881905157726908 0.20225923658832320462 -0.065073591354454562996 -0.056096952427269315689 0.25075665858832940636 0.015770555956321524044 -1.1381358446061504708 0.12060950424829511296;-0.27077163453400482362 -0.72075252458646066334 -0.34218452165463175696 0.36634467271259468779 0.23902903768511823968 -1.1595108287700026661 0.02516104041637651223 -0.93151700706741180635 0.73906667083162969067;0.025734359740851184273 -0.22003425369224297037 1.0679621604551747804 1.1469324008189196729 0.38041068939271205362 0.97721456485553914728 0.70938706551124008914 0.080243274868537869948 0.56983904520705352947;-0.68835698959980839984 0.56928767485606579513 0.44623051264017027373 0.73480722603567782958 -0.78801619172447578965 -0.4471603901565889827 0.03556851742792915827 0.87308961548018393373 0.86508156683204728843;0.73291629209228381647 0.063252951842520832582 -1.0370341806802709783 -0.897706186719800181 0.20264069993319799856 -0.24989026859653584722 -2.5454780023161788227e-06 1.271638776136404303 -0.99948901328771988517;1.1300296311483877254 -0.2069325428065950101 -0.6194338851355980502 -0.71535143926794575453 0.59184286105274475087 0.60813491034222078024 -0.13955467207071320379 0.25017794053181963143 -1.0445489558448382006;-0.93704899739296143579 0.82350557721542183565 -0.35086667658068904085 0.94293423995840719432 0.13743672107001086991 0.9167041799822418513 -0.16050489173426210621 -0.35285535050478261665 -0.92852062603038065802;-0.2707594460251862567 0.51883712571673201719 0.92123081144526830499 0.50528753450206398412 0.061342733266664235814 1.1502100892553810407 -0.61155503518380138761 -0.87287891145837837037 -0.25727812393065913055;1.4106540370749862667 0.55851378318692934677 0.38843254635978019529 0.78824472953140412024 0.63047416376341414157 -0.38827555389125301133 -0.22174152312308093027 0.11071453783347889877 0.56174313068806525084;0.43384204397556003219 -0.88160645305483076317 -1.2052567629262977977 -1.2380372481397692308 0.45138159010465461751 0.65760498779037890316 0.21762582728106225072 0.48948506514707318393 0.082213879030889294719;0.091118607665770817716 0.13955940171769301572 0.76000018147372494504 -0.24968547815417024838 1.201693949137348838 0.38101810585456125091 -0.80116481152866358961 -0.88216444737769850182 -0.60914666360591129823;1.0184485396880669228 0.87639095609230244222 0.71063982366016986703 -0.059129794604597885055 -0.22677711502903605267 1.0211856819797158202 0.47872614892370579653 0.12355872717219626433 0.69119447488681318159;0.51051551334508726843 -0.57700120172916402606 0.067735241409616078756 0.30673419570754306696 0.82531003620402187959 0.42673767367093740077 -1.2327280343245583527 0.012090184058606920012 -1.0348083330559829651;-0.43265227966149649719 -0.32335514702549678079 0.36096014829435491 0.76725217965011671684 1.1163117755233440409 -0.24184807047300688199 0.85799429440245045253 -0.12076282954751962895 -1.1931778112436648431];

% Layer 2
b2 = [1.5688251956712075952;-1.1998272536628666884;0.9356083390607550232;0.47121695168139371424;0.18213091997687089196;0.066595419398001357014;-0.5772183944073256967;-0.8619596452385220875;1.2546030934945233692;1.4918293758614207256];
LW2_1 = [-0.14716054022326247042 -0.22828735506900782459 0.60975734032669204332 -0.56199136241430969196 -0.23767554509605426372 0.0040891781777068160128 -0.28638984874424266991 0.25888258146098891421 -0.21559738774280862161 0.14051993862606346197 0.35988803816672576552 0.35674046669406367371 -0.20531600511987327384 -0.23723216417472758888 -0.015658764263211097378 -0.52765629908085420752 0.36125498585770965398 -0.29809258351933581865 0.14590052205011744269 0.033584399648561531759;0.45126744967147780496 0.21587143871420710894 0.032458327982317201899 -0.63106719287393608919 0.39333718067979117627 -0.44834622289185954713 -0.38080708515340416787 0.29621126525254426465 0.37715646422885429345 -0.55659901385464805035 -0.23749888609189800937 0.32426185959831249628 0.34303672515382555019 -0.26621590387336946382 0.73227874487829147654 0.29233279844408777137 -0.24477459017514691109 0.44651700540602745626 0.20109500985169917464 0.7446546041822369455;-0.35782418343169569708 0.52489482472375892375 0.31103469104196801442 -0.4008058736171850045 0.12810814013118829169 -0.065481332392026664335 0.057297914983917994092 -0.15527091621048499936 0.32263231547587795101 -0.49320687493350984232 0.7386446518878257983 0.33425339340320858739 0.34605635758617619979 0.15864488656202146988 0.25678804940483329622 0.56853956171643971196 -0.49440449038406858451 0.084978067275709390227 -0.020077231902355274773 0.32771872751681957459;-0.14711417882079669273 0.046682141932857468269 0.59248751675355026958 -0.12358082599212658059 -0.2370791180560461453 -0.41198265064410477532 -0.14478376671935228037 0.45501339952280250856 0.21506976420202261746 0.13761978752031703288 0.28609765772781958759 0.36629708360852247795 0.24545782834775770054 0.36762627013974147339 -0.15740767232861083147 0.84008584425285115493 -0.27773469454685678626 -0.51259809767643804701 -0.6790826564450764824 0.42068356439286436199;-0.316168689511239831 0.21249087002975081129 -0.21714988361142201212 0.56031464360675731218 0.45544690899562467745 -0.28392799195391804634 0.31189687179405917172 -0.54244851623037626531 -0.1156985805310227905 -0.14287704460862771239 -0.36251925018329578254 0.4075266944106025746 0.51600777962807209409 -0.0068754828474550857415 0.50061514442619414744 0.16691375912273281878 -0.48650526755915207699 0.62089745111678973366 -0.026867405160847616929 0.28959282497471439122;0.10950374065197540641 -0.22125122356958287773 0.2684821551234386483 0.49500306018705902966 0.80864578050399871234 -0.090384823085024337819 0.27404428224590088314 -0.43047583887189089236 0.463586277717166928 0.6616156541347747444 0.42022316597693881723 0.30832609553136391956 0.1018270670935869926 0.29547356318416712062 -0.047006541627969529451 -0.4272791808928464441 -0.52991478654284929206 -0.63050747239093407615 -0.28257458810795949011 0.45055311057688690601;-0.19222433967683974498 0.064237685231531643781 0.49852790642342026395 -0.60150760788511725696 -0.37138622259473258458 0.40788714833056483045 0.51144750811303130167 -0.181363609446386298 0.05377215673467562046 -0.18787222115498219965 0.43985740135197692879 -0.43520447270311912735 -0.19213683062067837826 -0.09436144866858035829 -0.3074123688854598635 0.76390532205738559401 0.42888044639891198528 0.3060205921523780348 0.43079538743597312056 -0.2194215624774540907;-0.27640051657037695287 -0.6607831894331510636 0.41047530075019927898 -0.041409604443836733889 -0.22932730106957599503 0.66886626308950059006 -0.50010672044576798267 -0.068146296647050019768 0.23090541663410218964 0.49908837833366936909 0.26159546554822932229 -0.29910759610373777173 0.52165973613854110802 -0.36414971786933880704 0.37318599138593433473 0.23409341886810527966 0.18808614258565503619 0.33445966507882124441 0.072254492661436006684 0.061961267910288692073;0.1558691503739905726 -0.36348093093208733162 0.32706647433274338432 0.29876777062046100397 0.71173938973955319653 -0.51557567708974749721 0.30882198607202304697 0.39283800694352011273 0.16299931667027661719 -0.53865336529002538768 -0.099968171710347331071 0.52693969786983818615 -0.26225801018235661566 -0.31670723984138449136 -0.3552791515418532442 0.64063009934606329754 0.30471045928122236779 0.27184248459720466995 0.17657872992811193824 -0.13525837587048963884;-0.12650840388045983542 -0.024682422264720740857 -0.38770843279415551086 0.27414181753234256878 0.48304116565796817451 -0.42566088461686257816 -0.10414412938339810688 -0.10759653623663209543 -0.37049403594163365927 -0.18398248738058176066 -0.13534667249888773788 -0.61177693546370159883 0.59315605081381284069 -0.3530074655464797706 -0.21089809420681057683 -0.47307906776882358013 0.1566966315252990849 -0.569499653065465683 0.53709080640899486969 0.0023676246956820896569];

% Layer 3
b3 = [-1.8269235174427365109;-1.5293156404702026308;-1.3930551940185877946;-1.2508610107760391728;-1.0905991702070818583;0.91943556941512083469;-0.64343490188660024121;0.50761653034595666245;-0.26335298749348734493;0.010074134692957597767;0.14073928175066885427;0.21649695276029953805;-0.42132366058061448966;-0.72307159914080709751;-0.88058078422159435927;1.1042053308088846109;-1.3651606950750692082;-1.552868760575295326;-1.7617762022304321867;-1.8298553948099984812];
LW3_2 = [1.3465590426592801698 0.27379148715570855721 -0.86564924101724838312 -0.2111255284657551079 -0.024484340504462420024 0.23781970907827795769 0.60268304380062664993 0.23490208546302554504 0.52698678896099049318 0.020460494028790635751;0.34918602764390771487 -0.94732938625607210348 -0.63218114106625933335 0.18694218879535443034 0.38366851422136599714 0.0029131664656384913259 0.029976505642067934054 -1.0828229747765065749 0.054577333725387928987 1.0714205532415623789;0.74458811139111746868 -0.07833657550963497862 0.60770084107053090605 -0.41349995518214527346 -0.11020535296578812257 -0.45611963571344382729 0.041805488812346323912 0.07467521958784804903 0.94259985119603173498 1.2097130734259173845;0.65034643578295414645 -0.1385398033484505631 -0.15167943628617719387 -0.92571443413448073478 -0.72942833703748644059 -0.75820004541272334464 0.031192010320900347142 0.54542701521828196309 -0.4872217022920925511 -0.48542694147444631625;1.0322486672186801382 -0.48086910950633954265 -0.89781496658526327437 0.10496547722537320768 -0.031023806487194448972 0.72810963603222100815 0.35976872711584756415 0.81098115261523251451 0.28446349041167329208 0.091353864926559211201;-0.16818194667923611063 -0.28952752352287891568 0.71595051694560540856 -0.040938392329431409766 -0.87008634192536038476 -0.7268794962056517317 -0.24725438509805303111 -0.60489333751205021095 -0.38465237354440479089 -1.085180144827947446;1.0673655630595926258 0.41436797719833295961 0.23602428668522110189 0.53142894035600829472 0.095844852717261341812 -0.82153591915793888756 0.33663565780376181191 -0.81925405844170751113 0.68518277781722081166 -0.33239649057821862854;-0.10847853208978347483 0.17742466086270350378 -0.545153914617399038 -0.69981885677347943631 0.78373685966008321824 0.77812984670143114929 -0.33442754643368588496 -0.77633006716025210192 0.32660260077478231455 0.89035562845531379672;0.65603905829702535701 0.84660048547110533512 -0.54002576524749956732 -1.0480379262578314314 -0.33400296582347011043 0.14720596319975856603 -0.1844212746596739505 -0.68822873516749361045 0.4673019813533668132 -0.27013016465092304363;-0.72560035072832962388 -0.1213265124368484299 0.90923725004557054419 0.39166578592612416587 0.59019219715750503852 -0.83154239954494613141 0.61538010702316969791 -0.22418755531047437901 0.16464369162818134895 -0.69578897260659711144;0.79588429955727146847 -0.78951958569628710727 -0.38012354419621802171 0.088847620277892613849 0.54116028555816597656 -0.95490145021030481409 0.45913173531619788648 -0.44211988476138730508 -0.38203778437586149996 0.73746587051873768726;0.42960845100270472763 1.123533760194193043 0.13911574076619601104 0.086188089520890159845 0.79593997104824310007 0.40441170466630260716 0.10132660476473125122 0.30593109994686751296 -0.76134241687099835083 0.9558164647148849058;-1.038353084032759277 -1.2370832772625661722 -0.10261092441949852538 0.62682435048626616858 0.4783029905839250584 -0.057039852501708843135 -0.072192378799492182284 -0.7947333940729575108 -0.52869728666366455627 0.064292629023189662441;-0.35417170103520018154 -0.85894498940649532948 0.5795865456559676776 -0.59287245304244085009 -0.71147825679923304421 -0.2354318091912518951 -0.20077130891527986134 0.62700407008781056106 -1.062165070135305367 -0.58494398144397152794;-0.099491743270834834267 -0.7455204715116144909 0.87326869404934848173 -0.35940666119094527575 -0.73504360738741658654 0.68593252000583204708 0.67966869954209607751 0.52656083301577349953 -0.45718705777698087633 -0.42392874976367062034;0.11755143176193445786 0.30558269601118981385 0.43381127330283314469 1.0898113183413231653 -0.33882639832358774079 -0.15866874594712782054 0.053584452298857124242 1.0024326713757285567 -1.034751406286494646 -0.37263674297177029615;-0.46166256410335554383 0.81132134095634944604 -0.42248283750275034132 0.60426064619572639192 0.24289093731866964743 -1.0098683792096248002 -0.60317930716081502585 -0.46453708534885612691 0.60824499923400721091 0.12142930717568287124;-0.86258838789892322563 0.61677047037883747649 0.03366153654006225765 0.35509479820790357252 -0.33731897655788356527 0.4844569842305344598 0.72242398295978149658 0.58339776637339491039 0.80238324954307149728 0.66086736025649805981;-0.52367420075180259875 -0.81780850266316085229 0.15168958202839111227 -0.081870656947155201477 0.50386775335407485432 -0.56934577637220451507 1.1205798143769307718 0.61243310871743927848 -0.20828788798635711199 0.33473345625856221197;-0.071086044204504414412 -0.10875279969163378913 0.63762695465809582362 -0.92234648913616867905 0.7650877935926662099 -0.41536270776184669451 -0.90672099756169366458 -0.47487643068040269467 0.08436670028478737704 0.83603928681605532702];

% Layer 4
b4 = [-0.70021621238072018212;0.74258889616355661101];
LW4_3 = [-0.66185510378776413187 0.4243626511171009752 -0.62369894896790678551 -0.10747616479446116255 -0.094877829927146203892 -0.94395380367304082547 0.95287932715856993315 -0.92841751108176551188 -0.035996923540963177146 0.35204628366533435857 0.40955767741021226191 0.4540228932598861511 0.68840894513070405303 0.33986971320334535829 0.50330313898722123245 -0.029475806648400586923 -0.56147280142178346285 -0.27032016341236636547 -0.69269729319227169029 0.086416817227136497048;0.18530867512862719826 0.19910629400136511946 0.41311839677072598187 -0.62737803765190791605 0.11098876513739609762 0.06953248374271574217 0.021245091156853072867 -0.54156770882142613033 -0.29387840806711479358 -0.93618852120408524442 -0.90218621025932332902 -0.35423725995285837431 -0.4602847033541984656 0.57748234862950165169 0.82540371339441764853 -0.63441976171893510461 0.10965629903889045904 -0.84153606205633146864 0.30161178225489371219 0.60839472584113707399];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.03350395435011;1.22444356361217];
y1_step1.xoffset = [-0.935164342218349;-0.633395004421358];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
