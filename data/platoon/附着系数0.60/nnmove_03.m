function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 16:45:25.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.864392556223614;-0.981740734431473;-0.867516274104758;-1;-1;-1;-0.982296504876327;-0.976188506242889;-1];
x1_step2.gain = [1.07273545655592;1.00921375094698;1.07094113595275;1;1.0833619175059;1.11416004780897;1.0617059146968;1.04843592991722;1.00875457775652];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.9900119439670964638;1.8657197074206575138;-1.7974637605162941956;0.90570569997515970595;-0.91231734261787289508;-1.2322090762619248849;-0.77197004426857152026;-0.32455010179049420538;0.17136250409701533903;-0.27909338104553910176;0.051687592262152998179;-0.13962588932536845743;0.35661898129659025392;0.11121192085557365936;-0.94045915823479819817;0.99385533182345586756;-1.2006168982493594655;-1.489377502752492255;1.7802532914116300233;-1.8187406009922313377];
IW1_1 = [0.36699217840007641867 0.054658240437334040807 0.38506331029529988763 -0.6858591845203398929 -1.1722215830828852656 0.44952538136115582912 1.1299739526837124792 0.222634751663457503 -0.43748170910032646574;-0.63746167559859778784 -0.43496723499674672109 0.18751099002750759581 -1.2479420799033111855 0.48185294744129208988 -0.62630606004743405446 0.086930181249769103435 -0.66102083411103329524 -0.47958000087101515518;0.40641342487970016917 -1.2155641687316791621 -0.10941962332869853425 0.67137779149746190654 0.60110943518615589376 -0.33081740001829762488 -0.26335149751038716692 0.64212306408750619013 -0.52559922853813700883;-0.81256353011374804485 0.16025049352061013219 -0.47649326004446823646 -0.14117638013195821234 -0.78195516146522936474 -1.2635424396899168631 0.05461027082751945122 0.39193456611881055673 -0.73795359335655774657;1.0346041280116888839 -0.83423192664301426547 -0.97117144351084749854 -0.24679718871764635968 -0.19824078011664536536 -0.77755197797567876528 -0.92975061991228835634 -0.025432287512494562015 -0.14014170522538499375;0.81948422267587772705 -0.2979962783909687607 0.49847234946641511 0.73397616922420783059 -0.66897506470159417979 -0.27827841536731579009 0.83470870257108609191 -0.45022866446211734504 0.55872507720961017696;0.7687992374288135089 0.55357094884884283648 1.1972114481679434483 -0.83514639312136074167 -0.02016172936150392378 0.13533289959229571897 -0.589154383466831022 0.39183214046926251317 0.22062254392908720035;0.86387475345651876246 0.43505710949324266634 1.4218498287258409807 0.19735240137607854005 -0.0963277273003849549 -0.87497626856687493735 0.54376727802427693437 -0.36370710127221783647 0.27194516488370595875;0.50205960825130047098 -0.45794751397244370938 0.57482148046211523074 -0.56247242701017630129 -0.92606836259854596882 0.55464084681377701092 0.57150390839168418999 -0.69786846695908577587 -0.46025815248814960778;0.28300188875425175139 -0.90161193418517560083 -0.21751935373498909598 0.12629698481205334226 0.70015753072738506901 -0.54055907177871842517 1.089686875641679098 0.18650989405857346104 -0.62706140158288226072;-0.64943296288558804985 0.072126854023009140393 0.69491353799659494328 0.67325500939140114909 -0.94535319944036499962 0.24189557020725174774 0.058008765993574226694 0.87738677685034471843 0.40466816270072181183;0.63033410104864751045 -0.89708480198079876278 -0.66178533911429149317 0.51872678167960417639 0.43541040064321684389 0.39142208416664880932 -0.47604474591274514861 0.77218866919017736805 -0.37461395772599620502;0.54698623880575281131 -0.7941281890869564819 0.65592856218028783299 0.86656910881156734572 -0.24005263519596578559 -0.34792555935379332333 0.87448930776326638803 0.31939027013001114463 -0.70753700306785494156;0.89226529498496964798 0.85701292460516154126 0.3145556815799946393 -0.85367936401393673673 0.16504950992875938587 0.63088930900130046897 -0.030487763946156203054 0.26224212057447404689 0.63300448197322334298;-0.64174689287957198403 0.77491746288489182781 1.2320640321535185624 0.39067823407363788668 -0.23379837053107396794 0.93545003865187326131 0.38355898266737581404 0.51126830000882517169 -0.018484934475420058964;0.83467475362903398306 -0.8118497140902024567 -0.18234014651758773118 0.97785073183802617702 -0.31026927976636459183 0.8254293662688320099 0.085307743313609199487 -0.73221990053884100647 0.11250606897141272877;-0.65962768325751008902 -0.29835585269879899561 -0.34987703955698218339 0.59056011013023357314 -0.90667583479426649973 0.87123690024598776649 -0.21666076538225526038 -0.67156221225733947477 -0.78760489370059638681;-0.080173071834586440154 0.55651555925808149361 -1.0310955571589375257 -1.378067426254794281 -0.1406383480146007614 0.039225504639342455293 -0.36379404593574615756 -0.29788599403069015992 -0.14046395274415260368;0.66473045518256512754 0.38163409214649807177 0.67039068021627123972 0.3475783744252617935 -0.57237669952324443656 0.79024627875911979125 0.62915906868197613022 -0.9342302241634919957 0.57876744959390258316;-1.4072187259092032718 0.098041748240475443121 -0.44055960610469274696 -0.32208445552820430535 -0.94495765400035758308 -0.62153779574108614092 0.34323683412838201789 -0.64523294140578069111 -0.74754159852939794373];

% Layer 2
b2 = [1.4362681836169333138;-1.1970457653437192036;-0.77373888946163382752;0.61309212792122591562;-0.055137863460267000359;0.18852055330478462158;-0.72185367533412803098;-0.94191796953248829727;-1.1262373156573102229;-1.5365605368527608388];
LW2_1 = [-0.16215237576737601133 -0.35636662692012527343 -0.087027630416887283293 0.14562159564653429089 -0.4377775565036146066 0.096645154423193033177 -0.396827207845029728 -0.094309771879050360854 0.53635855485242356355 -0.67449882551640838457 0.24834969326136568935 0.25047018176334412409 -0.080725472328481054363 -0.16678052886941668875 0.075702660845955060953 -0.046870660225376642449 0.78330810771221104361 -0.19910131436742967148 -0.7432156207890656674 -0.22868246682710663409;0.33456230647617840601 -0.37620681655457927084 0.47301238927130817569 -0.3043954715354584839 0.50887700903998789315 0.22455920426523534594 0.39997271593606409379 -0.34091512672881058021 0.0058562488543534487601 -0.49417074144215833442 -0.32179044095107689483 0.38850859710821350479 -0.37879276592032712356 -0.044025238958906177944 0.20302269157292293644 -0.26922236953353478883 0.50023755027572447407 -0.34035593961612792269 -0.28938311811754185987 0.14669449331231076972;0.3515155627530979765 0.075588954244405676119 -0.51069180971585670381 -0.51965060219407621656 0.077129418770232188729 0.38723220073925784801 0.061606607096305894544 0.73340913558549447604 -0.010654444007459094867 0.024118361445460752973 0.052029559787087849287 0.18243804861113654958 0.29634451187077021084 0.48625631454513218443 -0.58999488383959652893 -0.2814539552071128603 0.30297196298429690531 0.15387906351352495515 0.69193332965729037465 -0.063804133532987528099;-0.1536092673810353082 0.10352950627193877042 -0.3917416224363991506 0.38278360623965806964 -0.14158522563694300733 0.14737673942313492259 -0.82029767198652836502 -0.65256888488029574091 0.086073741888640281639 -0.56898272300251240274 0.31318246869108695707 0.021604906123192400835 0.11236847048558805395 0.61267689815280002019 -0.12552153151289557886 -0.73585352575996954005 0.65563267473986297507 0.11071703354454978663 -0.27011512982158614182 -0.050921494978192365088;0.31558694257026931318 0.65892155613959202398 0.075101740200044120321 0.13178261374734809297 -0.30771184544401519734 0.24162293049373656517 -0.72483869822312108067 0.18065486964515853341 0.25195213608824834628 0.55480121530355752668 -0.044587088108526046204 0.34987417014179345021 -0.51462994529078287531 -0.23645822462611973402 0.2315136547414838597 -0.1711960446969321703 0.053038970682037278603 -0.24050727316990802573 -0.27833043341304913865 0.53551026093966413999;0.29252213325993098314 0.624084532926370672 0.027311956441630435427 0.4290233710619774099 0.12773906557318454036 -0.43555361204460912861 0.12798813799337072084 -0.19022747357930064327 -0.33331182225022609744 0.2809485583406062803 0.13570178224249590526 -0.50979290528479737077 0.23098948193698010112 0.24734529299528676405 0.12217518080123138113 -0.43179339475247968672 -0.23370338906331916684 0.53140822739052129275 -0.40650443712827721843 -0.29160721901335784345;0.2025239793530937138 -0.18895019070681945417 0.11576519817450818539 0.25000934720394724087 -0.46199326044706900962 0.40600322445081488132 -0.49281640344048444069 0.19381438918018459305 -0.15678419038222884963 -0.62927300087290183317 0.4668973504846062883 -0.46483928462453749653 -0.53378598485940542684 -0.098139752394087856335 0.49759157761043648627 -0.21386595752425666128 -0.34694289709033798719 0.22940363021051451975 -0.029455065727622648658 -0.30643849653327076554;-0.19969806934816849986 0.32120618196822287027 -0.31219966240784002842 0.21411436648568510366 -0.35105987343923872324 0.36603585487067630266 -0.30290931840555918031 -0.10255063504152703291 -0.18689567665383058359 -0.18873507379670984019 0.51649383026723039158 -0.78629016422018027654 -0.17236809975515343663 -0.52844259934731285799 -0.11189724968900652269 0.31230597361268253032 0.098797298574759412348 -0.78646458729904777929 0.15497683745925228127 0.53045138231750121882;0.053679338410730428888 0.56324533195825887688 -0.44250911197269643393 -0.36827898329451502768 0.33744641572022499032 0.28777555397607307297 -0.56056717092712970985 -0.18608150636728343352 0.15085027813974719035 -0.089585495302506271131 -0.27284360307806171386 0.45863569809888793394 0.1364223084502122485 0.61980032979036503438 0.44973185576128810181 0.51869390755433864015 -0.48774292287661119571 0.53829046504505151383 -0.016148025898992075106 0.18928676049899581524;-0.25867239876540959465 0.16575980050074429206 -0.21379594916520394676 -0.11697773991982048092 0.14651078688305152475 0.40965199895436638089 0.30633006758263781055 0.087805808362881501705 -0.26645972029924952507 0.17419880411703755896 0.2816413522223154553 -0.19887751403776959824 -0.35994319768077959187 -0.072040219425960588806 -0.54272112683791129406 0.45879161478718483158 -0.5942372386125621686 -0.51041010994059188288 -0.39125170582299034772 -0.11823238855213411003];

% Layer 3
b3 = [2.0231519147855396845;1.7520991553726135148;-1.5668151697592826999;1.2954175464438799636;-0.93423022595071669727;-0.8171467769616107546;-0.77038300750880250867;-0.5136321949774544926;0.3168606116283739782;0.1201373590902698324;-0.15629779549175032427;0.2639920228702443139;0.41524806600602737205;-0.52444411797196832659;0.96822952773644188618;1.1099090895195571349;1.2626056442946802516;1.4988423244695263659;1.6844645097920225574;1.8080596247426001799];
LW3_2 = [-0.23109110894129758496 0.8292814598395775727 0.50341917226979560063 -0.47426590887262504159 -0.57800859065073151299 -0.80368591160155244957 0.31793928751473704564 -1.0148648296507349897 0.24576642531975248507 0.3395771929508852871;-0.19096493652419913034 0.32030692334254751152 0.93503777776545848877 0.48794766269976547202 -0.87914719015330955454 0.70060570097214547314 -0.69359916216259609456 -0.20400953166198043665 -0.48301596642431549045 0.14666829532702979622;0.47781908617959806262 -0.76353183074046704348 -0.42494697494836902729 -0.83643310674097526292 0.60876024118626681503 -0.46136189579665970451 0.10419508092025561719 -0.73142579192566914426 -0.1702977887185608552 0.64963963272969682539;-0.11879278365505803461 -0.86204514898612116802 0.80573607798936719426 0.67935687728540405939 0.049332471254420640072 -0.6837482259039017185 0.36579129259261117246 -0.88558960160380295612 0.13526614101350348252 -0.51148976269961765606;0.43949706004382876889 -0.37102312745692400675 -0.31232233689304450541 -0.78445475888767723927 0.44728947176306804723 -1.248493804711719779 -0.16489797036605613467 -0.88914564723343936237 -0.50134950092981123149 0.47983494584684288631;0.27671140045682018904 0.025426343700793413438 -0.19987302925387820385 0.85374376918125138847 0.7872851889298219108 -1.1834238847524705118 -0.17640817301947886442 0.7192902508026833841 -0.14606337067283700626 -0.21523110778810905508;0.33553254635056883881 0.84481572320869202652 -0.18630073733991661666 0.69349625289327709865 0.92789190630906082102 -0.11807700122221669037 0.60184058730636569301 -0.35595090849640859121 -0.57754490560135418598 0.64082145245533006506;0.25381596429830599604 0.9997769899007976635 0.80451448703113126459 -0.19309125627285811388 0.55241665237155157531 -0.076062962707998824086 -0.49886831403705067522 0.33096707758990545623 -0.97528329716051453957 0.52083373845292701976;-0.81560938784270842206 0.18218662020647019562 -0.77584677295125603624 -0.88510943364385563648 0.77998487887609047053 -0.37487717054438718378 -0.10863021195512551076 -0.17847180250226366005 0.92211297022381999433 -0.23365361814463658785;-0.79715676226778298119 0.92158009044198296866 0.96216031636556498263 0.88100231167516118713 0.67894715077938305736 0.42677293353291145817 -0.36097611632107862167 -0.35903093040515904333 -0.39763628191963990011 0.16207356358992502932;-0.41903767685509535346 0.75206037081415200163 0.15003263371182948283 -0.66677850580182684848 0.31924787420601363763 0.76185972879382635181 -0.31588749417372019579 -0.73746539646269393398 -0.79819616911495361311 -0.8425696661251690367;0.54643244775077026709 -0.7784285345165830039 0.5422053478181177999 0.12525768285036062433 0.8463858449594070521 -0.41037729825878738188 0.44201548105173843473 -0.91274372893361621628 0.36530711101014767817 -0.21703800540594528345;0.56957846244279175529 0.23251969172484260318 -0.84673402575466782949 -0.41102119695664829369 0.72691416105591344365 -0.69967263616484931532 0.33755250266037523099 0.24003910928856383999 -0.7132233454088292568 0.28621772843763498839;-1.0552393839788223318 0.25387612171167411868 -0.063084303406559433247 0.037752392565812177561 -0.60135448673508573592 0.80279170815094058611 0.13438055346190022621 0.86992004000257361351 -0.011148424641735682483 -0.27614770774964592093;0.40460791511326732461 0.77713743911935673214 -0.71750703033027307676 -0.65896226131768331769 0.43014104356229154735 -0.087083516615054062937 0.062387039403494368162 -0.30327213223931082098 0.59615870946503157768 -0.78231767306827382225;0.56998749667701886779 -0.86023198830660252412 -0.39820248084501674857 -0.32772185404724835101 -0.85043182399460437448 -0.6723495369694328927 -0.11886153813816494051 -0.68965595441328297888 -0.76982512432200422836 0.055830622115487588131;0.73794453142709048876 0.17221636587686603437 0.095543487250397740596 -0.80645264299356478332 -1.1115513368595839605 0.89740526479426774298 -0.03379884492646033356 -0.60685636816151466988 -0.18370601752425017028 -0.023814635322668736145;0.18688314239722253474 -0.82508589197268400461 0.042674571590498110163 0.73635791560110286369 -0.84779322297005632603 0.012613867021628833234 -0.30568322545767212528 0.73109720826157875706 0.9632801237853944043 -0.16923517300583490464;0.052290256141664284706 0.70439589502739807791 0.77142323481407903962 0.47533350168182253448 0.3247995959350540307 0.10802075051624521196 -0.87283693359501934861 0.78005385373966507068 -0.51336769284406758018 -0.68721020077438976781;0.90035886311109580848 -0.81058978146384741414 0.34610325646005007938 -0.80638092309279263414 0.24082149842615024893 0.29780298560204498948 -0.96419146615703521519 -0.061297004438937756354 0.45705951331184613284 0.45068179907354588565];

% Layer 4
b4 = [-0.21672967291341543872;-0.020809769110268688808];
LW4_3 = [-0.86738912391249145539 -0.29164749871992090569 0.54795024507776934897 0.30375371993118682745 -0.56764380062952435324 0.041157509793963542588 0.8710259406159015505 -0.39576840931670825841 -0.28128421102863326864 -0.85811465416239940396 0.19837411585774708533 0.81002376273257659101 0.10584594052611046022 0.33826370344765965825 -0.70118370934744445044 -0.22858198608967186805 0.34325620191634864664 -0.093153079868623478443 -0.081273242099806075611 0.27386299817652132171;0.36550107732272957284 0.59404504715877926024 -0.47095110486235269853 0.51535674484160642894 0.67234328218409677991 0.068021951582564896266 0.73684911075790915369 0.35970064165339166173 -0.8791531085744249685 -0.65196949933766223939 0.3794986009218729861 -0.73180028037109201566 -0.0078689844153434409385 -0.064318912825805041322 0.38913130080049174175 0.34375253989525644815 -0.025607689947638859196 -0.84107807212322482915 -0.079515706468005875607 -0.23767226990309850421];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.000000000004];
y1_step1.xoffset = [-0.999999999999992;-0.999999999992001];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
