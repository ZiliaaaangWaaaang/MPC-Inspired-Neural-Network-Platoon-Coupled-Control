function [Y,Xf,Af] = nnmove_07(X,~,~)
%NNMOVE_07 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 16:45:32.
% 
% [Y] = nnmove_07(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-0.981740734431473;-1;-1;-1;-1;-1;-0.976188506242889;-1];
x1_step2.gain = [1;1.00921375094698;1;1;1;1;1;1.01204920162317;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.3647165721180765097;1.5711380088759681062;-1.5423014080242594126;-1.6172143471630344713;-1.4822701310414991838;-1.1163328232335505419;0.96831459384315665684;0.49272622840008695189;-1.3080911754283817139;-0.52591021785744218597;-0.55294010673200044703;-0.30989882843690580438;0.60457577534676421038;0.97870776682392035539;-1.0961993833827459177;-1.1552841106899003343;0.94419850867905052993;1.2432298735065518969;-1.6130230148217477026;-1.9839879995401517032];
IW1_1 = [0.53923514308748965451 -0.62874466174818832709 -0.16223934291794459006 0.82973777518116398344 -0.79109268956474687595 -0.24755346632522223782 -1.0237098568649762864 -0.69483099728863195743 0.13852496354514201582;-0.33019418853288828863 0.75891164455007786849 0.70176964743555514392 0.32603009223049139731 -0.12183239837397162597 -0.14630650694355498698 -0.69476294611497968479 -0.81418355004187914492 -0.71070457510593687545;1.3421870503119188722 0.81689397779823413881 -0.32443662949568596865 0.41614752151297101923 1.0943346528041775212 0.11572803298610132017 0.34938017048860514624 0.76777066759352696756 0.76342196620278190977;0.9887512293463341928 0.27412934264294480657 -0.83068403717294236888 0.30399702719554844155 -0.60426977340359910862 -0.33665918945445899579 -1.1817322513137464846 0.79149712987794007546 0.077225353214615599651;1.5452699261738627179 -0.62334974444335555788 -0.80057989461531542386 0.29997242746391317159 1.2696707302339917955 0.33102199061973408556 -0.47127180039847688109 0.58551052128446179346 -0.29660780989507834482;1.5068727160979267232 -1.2343140683730482454 -0.36545825804168363682 0.475731447963833598 1.0222216790669076403 0.2359883903967089358 -0.50291393815729268368 -0.19231572547025171938 0.37133268623440307543;-0.43930886973576138699 0.31689724550491016331 -1.0674766738011236544 0.70253944449218219681 -0.85991347195132539216 -0.47453606150561866706 -0.44961341705592827722 0.15143627865752756767 0.74258135381062495561;0.14599217543797010643 -0.49880856473790019523 -1.4579029816516417828 -1.2247227049268225585 0.70309774210839159903 0.030274371149710294082 -1.2750047057535107697 -0.24468852230897639166 -0.52784654296718713784;1.4462657852397060587 -0.41225065805716937239 0.1461514417079600725 -0.33484386782857539222 0.28479879270764596466 -0.59070205105519346667 0.35170918721421673414 0.0066071464397991774842 0.32210920203235959836;1.3083051319760201636 0.084966639577265981598 -1.7871637464710266041 -0.18896135899352481391 -0.17638948789049815891 -0.73144788594404241966 0.27613020269091059777 -0.053290182816417258627 -0.18179121626669986211;1.7513742008539776585 -0.58418556725889103642 0.92085924390909956738 -0.12663803596955902631 1.3136658240565379785 0.31327676021269645901 -0.2279225535594002483 0.14690167787911095898 -0.037893233921286600951;-0.031596590643831898304 0.55387064152991938304 0.15385299193002038853 -0.094676512127638376426 0.49646003714391806483 1.1094906129753767665 1.3823003435941376704 0.7130441920161089131 0.42385060421279080467;0.55442993134538920419 0.91860388094051903529 0.16694232593121041686 -0.55545620861466260543 0.59236089513218215252 0.39566877526942667576 0.62757566089761862571 0.16600808616467185863 1.076563816350068814;-0.037057913723775953718 -0.69125387516188918635 0.24010961478250814061 -1.0007922395673027882 -0.11625636662860630577 -0.041596584692563165486 1.1524592628311058906 0.21104909846186462041 0.80652533969233397571;-1.107715495154262042 1.5323135898077913097 -0.29229765705208632376 -0.22399644848599320479 -0.24303444096858936585 -0.17660898199782931739 -0.46034698708431520675 0.44955991966537584004 -0.16268684947132011631;-1.0231561818372241213 -0.21941726504903935613 -0.24304706134207534896 1.193455627671016428 -0.44697287614048913928 0.43488262888230738712 -1.0042316606394336986 0.79155770232519795382 -0.86974830239389167019;0.19334289338012228265 0.63209707848075447068 -1.6102764187474110091 -0.6339845996723917354 0.28668228610285245717 -0.86301069174875366663 -0.45098422404421723009 0.78019329959439842614 0.7560035806427085614;0.91211788943123051077 -0.45844848741583266172 0.71620054600753202401 -0.72841096226518597945 -0.99460766321618099273 0.41248867773973196815 -0.1991877904972814417 0.22579769072395222684 -0.65700559246067224972;-0.70941798188690119442 1.0763345566108335483 0.41793978107871110339 0.51909898962126899136 -0.15305543344894628754 0.6816504394781333076 1.2806226044683581833 -0.63232270755069919232 -0.79339567769021501764;-0.37245585332563585501 -0.60523591445980862158 -0.82032507359423390003 -0.811082369937409009 0.72044178809588721446 -0.74194554514138233436 0.67563134180300865594 0.72080205658872031904 -0.056797226804918589382];

% Layer 2
b2 = [-1.6131747743535189699;1.2201729592247783085;0.91071352385024129106;-0.36234277961841571125;0.25451048460104869209;-0.43662459455272784048;-0.7281433550005255162;0.68736256970209530515;-1.1218092246248871913;-1.622560905663560149];
LW2_1 = [0.10359666238267267735 0.14454606192078769955 -0.2793026691725538635 -0.71226927400490414044 -0.58562285549455095346 -0.75810862301787806938 -0.33682829102797490206 0.064981506808169275935 -0.30248391520112472008 -0.7212626037495152298 -0.63446304058883429278 -0.079225229284899723048 -0.19910173798971725345 0.33914607600939811194 -0.072090674675497498636 0.22722922891059108008 0.38970083563145824224 0.46164982268950960353 0.23281237015307071347 0.34176657827286871516;-0.66285991644543473811 0.059252700538384779627 -0.62127766364076619787 0.0019979904792676375647 0.36866704800176403056 0.73699675844628520505 0.16971760895369986111 0.55646348478450213815 0.38697190067284764625 0.22127964200752534007 -1.3056991774006572182 1.1197805663399711396 0.44835542720611942791 0.20034200259636553154 0.23203931929931534417 0.27139199819973541805 -0.81967128779856901488 -0.5248704924577193287 -0.17769869100667268214 -0.29110765633643376216;-0.6122586931922515685 0.33217981260381612696 -0.61560717422091970619 0.0025347994821939188147 0.40625801382344717272 0.010877916343823679224 -0.71251738074497827924 0.24371943939205542584 -0.30769874282424486411 0.29547770725979505269 0.38404068107160643786 -0.065306137063741165338 -0.31380406180929387716 0.40607587715882942359 -0.11285235839966234472 0.10473480913684210525 -0.22395653328662598613 -0.052233030020768324297 -0.003551774036151811309 -0.49732737676856514364;0.51242165879409840024 0.23902490618040017623 0.34443816885832950758 -0.47847566948817754628 -0.36630957054347423885 -0.74379108389755022035 0.46252425050028062037 0.3470330969545541433 0.77233434956114910275 0.23018953487362128763 0.38917937121119011712 -0.23473609201355968845 -0.084510082676552383818 0.22294131426145175068 -0.53697693077103192394 -0.25965200791145448544 -0.11342563337485854491 0.25418124394253066578 -0.51891429871082772607 0.15092520595498193359;-0.43925332889765028588 -0.32199888161418577237 0.56446001201534823366 0.022146526310661697468 0.15958833345752954092 -0.018245489744244662578 0.44585285384056905222 -0.070729733284623924616 0.48081277738149463818 -0.30671058944816104175 0.44257029284324900242 -0.21206454325291029805 -0.33324803276526759888 -0.76039992118596411164 0.1355586754848873976 -0.29753250512686446605 0.31524423863851158689 0.69205359026572510484 0.66566226099113656733 -0.12731771765850263822;-0.33895395572018111041 0.09479297029419334053 0.26115464475121485943 -0.61987048484563100903 0.44739426110521346436 -0.82234476085366536857 -0.041223946999583677142 0.055573401584638165707 -0.79965979427459110696 0.53463436101610961604 0.58546335872181332061 -0.43756188489533626162 0.02753572455893389323 -0.71621099610644989308 -0.47842702883404925052 0.54413397759451664903 -0.72900834495306021665 -0.29319276506584612818 -0.49583215191883289741 0.3356874580460844637;0.0071264238940315222104 -0.2572584884814665962 0.16694184412330134726 0.67713789811120406181 -0.59207578960008788727 -0.69107447853390913117 0.3805023874110608495 0.10414672035562065611 -0.79940290634753885524 -0.91434763266068630472 -1.1152804341456821202 -0.20975606132981439167 -0.11927545724010568673 0.082639795312491534651 0.61981036706969683259 -0.55894234795800623594 0.12542986247236842523 0.14453666686016874987 -0.27745386227670909562 0.33445073271214081911;0.05402403317305448649 0.16563298197534773171 -0.1178662393077429954 0.072393372739542147243 0.83889109188581223453 0.4401198377717939203 0.52611291268246040964 -0.16069170006204491763 0.050766440120056835483 0.132403114822013529 0.61754037802732397733 -0.49731114902024986524 -0.015692629173108471607 0.29280536970196247015 -0.15504089782691832244 -0.8323066548773685458 -0.16514241530692375104 -0.1334335731294047922 0.21895935073836975127 -0.103068530002149647;-0.49755790611957434466 -0.25305038428492715452 -0.28583637609711498584 -0.19390643184770559038 0.24776932219717534567 -0.019177303716560428759 -0.47883344799393140478 0.42613377144314440459 0.53498759082525082498 -0.43200644602864729515 0.16094417475781352955 0.56936848170179110706 -0.55247083409768094064 0.25975290516129562191 0.057249456649133785568 -0.044724911285332388799 -0.45277958166241377702 -0.13181453278335505952 -0.28119018127687067654 -0.1603776718936755219;-0.43521179938358561801 0.35463243864788723814 0.13665048210063571177 -0.15543620358739163034 0.92668914992007089815 0.35764568091846876685 0.2730842212291781923 0.19074502140858690113 0.41803123146022991286 0.47598963080315437324 -0.00013931985981916611417 -0.074596674743062696411 -0.11232157684001528586 0.52294759826068815123 0.58755811095389487431 -0.37866237280689507561 0.66721000907625904741 -0.073176118216245047976 0.65324671364865183332 -0.19757551768457901065];

% Layer 3
b3 = [-1.7798653694784476453;-1.6051674706002914128;-1.6018196204948491612;1.4834019301606171659;-1.0827361829268813409;0.80576937797314873713;0.6738407309067132589;0.62116942294828725313;-0.55131184094229956916;0.079404586038647709256;0.25923051105755656742;-0.40341504488800988826;-0.57725667388201085117;0.74520244889404196886;0.87945796619489913226;-1.1441126653948143765;-1.73854980933034442;1.5218847815820402136;1.7583489803249683359;1.8685425000043445198];
LW3_2 = [-0.67236035089715562307 0.20632838846494044871 -0.4881766996638339795 1.0391505858385097216 0.18731031526748037619 -1.049026349252885959 0.75111947421816604997 -0.18988215337935196447 -0.18804839115421959073 -0.56525529877360458642;0.30537426988571869657 -0.22484930043985690284 -0.67073757040213288771 0.20026112213413807539 -1.288374842269368159 0.8947288496215748399 -0.35133853367188755401 -0.12465153175710960709 0.39460734609961095609 -0.36678922759768889383;0.94786303606924504628 -0.91770847292019108732 -0.054914040614375499161 -0.56186529272268082025 0.62909174716139237837 -0.41367153839841364071 -0.56391926582626472619 0.59019787695745273837 -0.0033607499417593854341 -0.23043298442483506339;-0.40393267949576566744 0.40878698655785489224 -0.59454342467106280345 -0.48873884593135624721 0.585402242405007045 0.45221507031335944626 0.45681126185516068849 -0.25220202766496230273 0.55321644830926197667 0.58993281442205980358;0.5834353445927549231 0.79402555190594636958 -0.84357761520298502056 0.051295683104951597664 -0.56129992863145461435 0.35895227573663074372 -0.83085097927446771582 0.20705435382580633652 0.73049149061289597729 0.59503073238723380722;-0.72281203210846678431 0.35161626764714432047 0.3078926778886279525 -0.32457535890260841294 0.76875654131696213867 0.67610508061150620396 0.3689630171038300599 -0.63798928266328536196 -0.8315507160221100591 0.4375636602344117887;-0.3403729475865637788 0.37277142283157599367 -0.52105076330807953422 -0.2851996310575176663 0.075695006255155600217 -0.18286806510740580278 1.3096328249813220523 0.67123343359019460586 0.50916660466526386664 0.79540150981809909503;0.0013774519865915324512 0.20356089851446962369 -0.75463944455460396643 -0.91170295766361086898 -0.57689367470426855533 -0.53377816154713408903 -0.58247012581129276043 0.19324318411908397719 0.59138962723583743397 -0.72271101782445246187;-0.10293645081872636327 0.57338336234405318237 -0.33012120696479663184 0.23819989243674444257 -0.28603255628638790675 -0.12106632133699363196 1.0180083703865716593 -0.71246409174782199258 -0.76289397794029412125 0.85140439112713983683;-0.52390238608883032967 0.0047447136387281652059 -0.77600785251971005074 -0.72284129326224932921 0.093861482816619434821 0.8674362389858707445 0.59654418375751505632 0.86315142107879694322 0.45708165444382692355 -0.70260857681066257729;0.35318061608820894293 1.1257638436006816018 0.90040790800282555217 1.1082149779221357466 0.58420293687321167564 0.10672152708816622091 0.86847846102122372436 -0.98456122315404048795 0.37775187990516001513 0.30856282128625345251;-0.53873288046766421022 -0.29555049507970659883 -0.17044166515268988071 -0.45414577728984439897 0.26262274187736556197 -0.74197370751582358839 -1.1997947758002736052 0.47973481546838597778 -0.39944343704737855782 1.1248544548387406916;-0.54191227438960998253 0.56337361886323389371 -0.1476344634227279573 0.59014393417057997571 -0.85626088234353014972 0.32826830427808917356 0.46774724632884084885 0.35389495053410835457 0.85196540295171219181 -0.6249471893046476545;0.49027350574125361238 -1.4713883149443141019 0.18127773026017651725 -0.78548631992944051294 -0.045947210118148902602 0.23018916461963712106 0.97853698808281097676 0.44458718132660729472 -0.67155778498035922919 -0.35797906655179084767;0.09701790427794197702 -0.30758876622317787852 0.68181220603045311623 -0.84715203441979292087 0.087258429912018181662 -1.1608684406234308639 -0.42430980279405261513 -0.76464954839232668338 -0.19596919626909922729 -0.24947850261164244978;-0.096594877360604985972 0.6900474409729093761 0.48417641103035102823 0.22253349041289496868 -0.56057810544477160164 0.42417100351076614251 0.84286823995254656072 -1.0051244049291692129 -0.11666549285360769406 -0.35026528582502081122;-0.98099549057661283857 0.097395907465817582738 0.37070813770927957265 0.23056311482868832585 -0.99241252600231144587 0.32646498053179900944 -0.42892358160569349357 0.36760353906764792198 0.50260310785163231362 0.60405262304554663277;0.77245798233523599308 -0.41278208242134911687 0.38677244669687982359 0.65777340592150612686 0.87402256145384926711 0.89115234794770270543 -1.0706014496988602858 0.141936044274789952 -0.26165445036630441411 0.54409191036075255088;0.63523634508033566259 0.39341068883973978609 0.88844476686444096014 0.51342472869278776848 0.031867693391786897084 -0.97842051437462906893 0.66916403978251060014 0.6499779442380131389 0.22687291209008469961 0.17920600846376988358;0.36931938665246061282 -0.15689211947861445018 -0.93430789273829328856 -0.76461566612794928943 0.31910797022909831444 0.54033733062422417692 -0.1845845298686633329 0.82853839873805457117 0.28794603714172539721 0.64434208234556344941];

% Layer 4
b4 = [0.13779484433990821235;0.38895211048953226562];
LW4_3 = [0.53511576605785482474 -0.68981598419601808381 0.6181067379407056972 0.055200175055020693493 -0.055646040418496411917 -0.28282103503616851103 -0.58047254933645409114 -0.33436391059703601814 -0.39379932021666663733 0.30771016954135799182 0.642487147711202633 0.23622455012753024173 0.18039407376473820532 0.39516808102836581407 0.59720016045088253342 1.1298064838506753915 0.42338772348891490216 -0.47386445129717591485 -0.1613554516410377615 0.40530366036349174674;0.25914515169563234753 -0.18400465451732778144 0.7504208295149400465 0.12037373035261751675 -0.41389675854596641447 0.11443577701609881914 -0.10359517250612353123 0.34599722658490494887 -0.22546128771197043728 0.27301377165403517555 -1.2165608344714380351 -0.47532262375499961804 0.011773260495255559455 0.61920218246288649677 0.0055955375146957593568 0.30192596583298669799 0.70919426352851866469 0.26489115996885742588 0.63419918907276151554 -0.32753730743890885346];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
