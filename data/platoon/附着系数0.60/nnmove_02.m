function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 16:45:24.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.864392556223614;-0.981740734431473;-0.585076624051763;-1;-1;-0.817826662813753;-0.982296504876327;-0.92751717694512;-0.810496984604482];
x1_step2.gain = [1.07273545655592;1.00921375094698;1.28566239180235;1;1.0833619175059;1.24000178665013;1.0617059146968;1.07588651283315;1.14594767026125];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.0902560001155099378;-1.6903821948081805271;-1.7931719446642675475;-1.774745572338506161;-1.6119187946524449195;1.11620978388202019;0.84499433682041158455;0.71043389159828340684;0.26602290654054355779;0.47239333721321602466;0.11589353065006438581;-0.28804146064791691373;0.48657177414105051705;-0.86106784048593365544;0.81144371067893417138;-1.6352464230776639909;1.2263537886931263898;-1.358292436509563883;-1.2980502228119095154;1.7565238589019396276];
IW1_1 = [0.18895487037584529633 -0.17551613437908783477 0.75892174468576512059 0.47456489391080708407 0.76042680824627761904 0.78940153585766159594 -0.80187871873831007008 0.8081893510800109981 0.15567416996721775146;1.0514225366678258133 -0.5632187158639881952 0.014081927583691970784 0.19797843044671628587 1.0698334048818132214 0.91329799077279294472 0.53786828954941523495 0.34586453468203792738 -0.45583173560030643134;0.9852654089369023982 -1.1046975633045068577 -1.0462262154703378947 -0.27692840081116382178 0.23155453629926103787 -0.35643424374092430584 0.26575661155526658641 -0.70661701795974474205 0.30288505582690788964;1.2892703474915179207 -0.13855555660196189338 1.0089860722235541868 1.3051890593450374833 0.37438692043482729721 0.3241561014399029772 1.0850280313531648346 -0.61566076876108588589 0.20786062242431554981;1.3217661601783383674 -0.030700237899385893897 -0.88848432214930173068 -0.85708106485154311738 0.36078790376868818957 -0.50034514149279940565 0.3708800763906430209 0.026428698848895156026 0.21307443701913242329;-0.63502003385956395931 0.68317174053527540689 -0.30705471178452237169 -0.47085855220880495908 -0.84277773435672920233 0.65881635166259844283 -1.1527605425228011349 -0.67377506566623679429 -0.54858373241427960121;-0.63636143635585551426 -0.69559406209919094621 -0.43118598706520089303 -0.61103072787646683928 -0.29614544751739785289 -0.95561998669681824659 0.40932726911464051289 -1.2339758193026206801 0.9081058855036736599;-1.4038506648630872942 0.62963546701886552448 -0.25854235360845634339 0.51848444982280916804 -0.77384327523535156867 -0.14015845547533317683 1.0301718752358461906 0.23206062455624673624 0.030978435982491021178;-0.28375352007985982228 -0.59307610474978711412 0.29408286283863571686 -0.52044376598400510225 0.77285538323975933039 0.69354481592211603136 0.74581996126780192302 -0.54197958452768879578 0.23504333777223757052;0.17905845164525846513 0.53832814274379359176 1.5033627085881304808 -0.77155319953974987879 0.070003334888766199917 0.38437008934736460741 0.023024510014397956553 1.1194817053260841533 -0.30190518178373326741;0.41015132615660881976 -0.3152083304755862736 -0.81352796995298004568 -0.43123080729343743478 -0.93018095995451421931 -0.76867148941721363808 0.37403630196733739233 -0.44119666874336488371 -1.039675030316500548;-0.56050940278003813511 0.96726773657750031443 0.46126309527474051997 1.265126187423375459 0.71681131385129082112 0.71668783842605177092 0.44199343045514527528 -0.19355208903705242718 -0.14909593691689343453;0.95723599134861980797 -0.31395264456220883797 0.63193249825735431369 0.12668495079620165078 1.2030120536589627989 0.84392292134046920093 0.13500649034062270348 0.6556359435885941167 0.094996094091685440164;-0.69647699172977395321 0.59000107887423547393 0.86166745756122609112 0.61236237126136583431 -1.406409592200347225 -0.07582843620953062802 0.0052543716364885639791 0.88899083670550260727 0.011825142977929255228;0.82614303422171808666 -0.41611209722995978755 -0.41107196230863618513 0.67804431333293990747 -0.63234262443053856906 -0.06998515312541533917 0.29774482563919801859 -1.2716819795158025297 0.72096270964296604866;-0.29507244520623787665 -0.76394423822151269476 0.084093225176945549104 -0.57230868521141231575 0.96232132878931586628 -0.44296753235534458426 -1.0993797755073735356 0.30998299995421896291 0.20366358047286423072;1.0069410977564687837 0.16398257064658525173 -0.25022353309569950186 -0.10676031345033207276 -0.77954022282417001488 -0.54364533022577776755 -0.49986987828927575972 0.53810596248712405654 1.1525330958446913243;-0.85781279360863582628 -1.2161331396625112422 -0.37591382245610149848 1.1010060278239901521 -0.2223910846135075392 0.10150164573528669409 0.16032999904428982263 -0.67359146205445785682 0.53983699278300723012;-0.37405806791139722955 0.83708638712487293265 -0.11617020615389336835 0.90053789463707589746 0.1854105709391966339 -0.8544213852208890625 0.64727511367332912773 0.97364526859120947844 -0.11088170939739749876;1.4899696275341614005 0.086227095348232696281 0.77733813822940367455 0.29796261523540762406 0.64515302212433855988 -0.83664509808597009588 -0.57328607237931461516 -0.43995264970992836728 0.57453578396805982109];

% Layer 2
b2 = [1.9503086006245029527;-1.0324892390991140534;-1.0246097482205591689;-0.53421082320477109029;-0.29286797519055968175;0.26031424768533417691;-0.51325636695198906256;0.68028354403378088477;-0.97732942041549442092;-1.4423180420019228176];
LW2_1 = [-0.43240471513625572397 0.018180830450832092399 -0.20061131745949936644 0.85827156769458068375 0.63169320906743575694 -0.091277838169893224518 -0.11025385655128022711 -0.71628871870726451565 -0.47298686873126921659 -0.23109261583748291757 0.18514986097005456389 0.1648743933854387167 -0.051820050770695430531 -0.21618228517908397168 0.28459962642543468192 0.14468436075388169115 -0.40196336107370056467 -0.10966916250129897514 -0.10644446172105359594 -0.37909253885847893351;0.67409054075399732486 -0.47035643327433940275 -1.0107258461343908706 -0.0024940830208298641127 -0.18240888143544420341 0.37664971770637151183 -0.17683561970294103816 0.28749825845645521349 -0.30047436340824229539 0.11958211498201573586 -0.041652968607198040396 -0.14967398597437669983 -0.69056571618729467588 -0.40844041384225115987 0.48486598853239781803 -0.37672964983807605277 0.36209087574040521584 0.63337391670161713453 -0.42536872153166060961 -0.47536684411237895009;0.21746348851310523531 0.63026601312327468207 0.078551694488136619698 0.59027772824008406527 -0.83948571341162403492 0.42272441206467442631 -0.03685540044132033094 0.51099798997141332446 0.39678723510121249873 0.61110035855005095939 0.28874303478174334625 0.76038349675139993433 -0.10483942226521883456 0.060653819376181902778 0.46844996346444123247 0.40181994039341051295 -0.11539450872162108908 0.40333049524145198061 0.44200064847824094283 -0.83386692797765205043;0.15140327571699116471 -0.013465880083123899641 -0.37026058649418402968 -0.71216327197496043233 0.09339716159982244803 1.0220532421666344014 -0.0098681055551261241676 0.32995299121445814672 -0.13373600950102143559 -0.9008667206677956063 -0.36542351313943888247 -0.51417099958516443436 0.23506380916761121513 0.29828611223818429776 0.079314901712384103249 -0.11561126423416005771 -0.042387216177712350174 0.26881599539579503766 0.721080514904934744 0.28277905085649135408;0.52331882053718203895 -0.20088818070288488871 -0.21710249324170752261 0.704229477688883998 0.034768119799632297984 0.65914874754304741966 -0.38728312039299150893 -0.28142854068352141095 0.18453158806174890794 -0.39622294311164946157 -0.22916648906584394241 -0.47400347490365607461 0.54238932060632183418 -0.24958504319284308126 0.33512607718051440342 -0.43492372693042480325 0.34497233217051037624 0.4708826361100718616 0.2993305545594068251 0.69528416689939986917;-0.44442627688594055213 -0.22842903025087446522 0.61197953320624165485 -0.30962705945083646153 0.90514381712677183245 0.6643387107701590466 -0.44472887410781891671 0.086516917237915963446 -0.10125955202109403197 0.0065972638196699559532 -0.19049098615676107737 -0.27175208627262442684 -0.35431395586816694099 0.26720107368663847947 -0.70977981268550438543 -0.5656696488662388278 -0.58465583104350860033 -0.11287649667904652018 -0.72695625453538814664 0.7553719207635888333;-0.10588947859029537724 -0.51294277327533643884 0.24495013941468585239 0.68801133556971960648 -0.64234671942739041128 0.16262674077177749488 0.44993332892422766012 0.22307545849592946841 0.30972838238416772194 0.7988809384106465572 -0.038684171512021872652 0.10800216494476057305 -0.31129809543861552967 0.034891640259445952377 -0.25599117088414152787 0.2375688726356126601 -0.72296220303541969265 -0.88297583626647513366 0.40903231386287430826 -0.44541593404714585613;0.26663205075818002809 -0.1417369873131069935 0.22773147023914855347 -0.18272536248417686755 -0.28190762860659551725 0.30733465554955990973 -0.028976992319585160446 -0.38278118610227840346 -0.068340807868219916044 0.52765915159065690521 -0.18891795625623944432 -0.39493343760882598792 -0.038991443781383645917 -0.42859667429506975722 0.64317924689745131772 0.53204824844660947303 0.094321485489687773018 0.27870435139163429739 0.23568202656442749365 -0.68401319244695635291;-0.16206852640942168153 -0.27571605958206535369 -0.1307463239448177772 -0.74352236238400570834 -0.3483427832395179502 -0.20061504936789498199 -0.29709906305578126506 -0.33265488161443607096 0.26171480284717252296 -0.30653443717698269921 -0.22146800771804661667 -0.16814097506250980096 0.19083744422866508184 0.30804466475321989893 -0.046834383728753606335 -0.23678152895832721425 0.25187713936730071751 0.068568380416816593348 0.25208603424111636349 -0.041747014684790265115;-0.075686208888323849853 -0.013178999925250560465 0.20569844752453239622 -0.63463972869600360216 -0.24079206751259715769 0.064350831772974320666 -0.64322922433441531709 0.52492048250848988289 0.22546234785978880311 0.16920371351217175504 0.32177828197580637948 0.21625999833331494004 0.41097054710257857613 0.32950000630058434714 -0.3358911230417888083 -0.19396349043514723998 0.21497383271222178514 0.26154020823227247527 -0.67031765344037086418 0.40660703143283094541];

% Layer 3
b3 = [1.6347460541515042021;1.5569387467568611694;1.5694395619876453374;1.0353271194274888956;-0.86679751163944473991;-0.90280684767942653846;0.76235854959240967332;0.56185206573504842265;-0.17875442248448158988;-0.29750513722877919287;-0.10720464616366354171;0.50587426201181862062;0.37304305050713321146;0.93687348456121088969;0.82811365457620600417;-1.0799280036646099479;-1.3030879168137474711;-1.473343471319056075;1.687842248951580304;-1.9310367894129443211];
LW3_2 = [-0.44988851869768003988 0.088724025750019280823 0.33592837221865112785 -1.0194141777336220844 -1.2609618445438659506 1.0907328896622503489 1.0032345322677975741 -0.63467841621778287031 -0.40492589090622493897 -0.6977963916539590139;-0.059524674238101545065 0.19296030379516829201 -0.78564573525584702196 -0.25098236239931942526 0.081160710870213578771 0.40867284786376562034 0.74957765240300910925 -0.86780107834433106717 1.1337223538628640185 -0.60608226151351662914;0.026556595485445338989 -0.72225562712076862848 -0.8829148889809992351 0.27619833040927027623 0.44109312722706062182 -0.73350061914736652824 0.62164428775951430239 -0.47572966480449485616 -0.51335500353702701037 0.38509856401614428467;-0.75375988354865142149 0.61848697610916258949 -0.13630133862965571057 0.36243054082717540698 0.15359458928677985345 0.73272744782276499897 0.52845290847114978483 0.13147434058722151651 0.61292972046053961765 -0.97598135834079147166;0.88599361124218700692 0.12036828016492376325 -0.11087624417332057891 -0.71298315426988301269 -0.32816818398147462599 0.33134525734612091386 -0.0026518445420998667215 -0.073266551993604642212 -1.1695667377391441022 -1.075403721415961078;0.50376523580648546741 0.30954294342371346804 0.71856943812533069504 -0.85165519440018866426 0.91361174832900182707 0.45609445197577269671 0.70764545281616975103 0.84933816175803045212 0.14595112765203938077 -0.55030642225735704187;-0.2057158024777660521 0.69513783285793051547 0.38878993177358117661 0.7160533359119634067 0.59934418875863804121 -0.90453216345230591511 0.41862706960674372914 0.71060785773989343372 -0.28148040709043853358 0.44181915467455190605;-0.72441788044311472561 -0.84832838565024260014 -0.67675808932131764628 0.29404174516975106757 -0.20727178570596010987 0.78987449786412622377 0.39430768189231180099 0.25556124923713807728 0.68218161149381795205 0.0017608280427057927675;0.74899531253846240997 0.30055189711406593567 -0.3224085060715874973 0.64701150445298616365 0.95338137723682325753 -0.68155908351904948006 -0.63951307022550574199 0.42206265600810211058 0.66341800427272468177 -0.66311363007177337447;0.61318041146344537395 0.5816702358404125528 0.3955661119240823087 0.92279381524542536397 0.75937736098640029603 -0.60656580974292184649 -0.59730360498147838655 0.37325022494736259659 0.49636047783242476239 0.39155916249025374265;0.089586805262222082846 0.15555865286090292399 0.69116023569762241596 -0.32858770599118453104 -0.40653260377919980817 0.90726206991652480482 -0.12986368136707951426 0.69831135668160582153 -1.1078462360504117701 0.45071804604674725603;0.81351701188465908032 -0.55779336191670580991 0.76285297005318752905 -0.91262463922247338832 -0.28822290918136889148 -0.44440579009545772005 0.32065770885553296354 -0.60746384649532159106 0.25980020106971868366 0.77199905712294214499;0.62156107928134196605 0.20070849033339269174 -0.89791775883565116967 0.12076867327138987585 -0.70441499650598871085 0.62455099958695459161 0.32780509557939063736 0.39214676395711606238 -0.95887550736065452206 0.51002104038984819034;0.79804577194905856885 -0.5868257605982566405 -0.28311653154215582484 0.3655582933720513128 -0.51056544915786483685 1.6082977919938437061 -0.87257469883110960751 0.24293767528969381631 0.5100633917857688715 0.50153965241228271044;0.45293365099981286459 -0.42417727423202922221 0.0893309591981326645 0.40707722942263158128 -0.90193183452048453219 0.046983575603811153498 0.077249774976042337449 -0.81348746561975815439 -0.27219169064296117044 0.59165382537754485082;-0.87931421046539448572 -1.0025404953764569527 -0.68818638199719384119 0.45852024411367836576 0.25319175315848246877 0.21442703201238416666 -0.2059225658834301087 -0.18119429607018350259 -0.69613380416368164649 -0.49847222587398415383;-1.0469239220470700769 0.53802514789698319131 0.75402855009440394873 -0.23773382937627424161 -0.4271254939679935414 -0.7972229072653580495 0.14736172901407187941 0.31937953409270669614 -0.77566505421134102072 0.11968502952933003647;-0.055442798733937356803 -1.425948399113175169 -0.90775594578404705803 -0.76648464966418738964 0.32823162646811582244 0.13575414814202246827 -0.64431377875922979381 0.74428721690581522985 -0.079729763896922628552 -0.64434537259226665196;0.12296743022519215915 -0.99878986996030461043 -1.008024539793546559 0.02994252339198337845 0.72755475745876485583 -0.45935856469124675128 -0.5350143566687044494 0.34856547560809075792 0.6922105156138377291 0.10144640350689630715;-0.37329866052597537873 0.79164973796762461156 0.75705524486700881415 0.025215345816762102515 -0.055924039175433426507 0.63849341640881340787 0.51568276481804165012 0.76937005017634174653 0.20190544993037845556 -0.8856268005120101483];

% Layer 4
b4 = [0.076765112481104444409;-0.54694743204249007817];
LW4_3 = [0.74331217670156013444 0.51978491511189628405 0.76989934624412836861 0.34932188719323803427 -0.22897714777257130447 -0.30958401626906961734 0.22008303018130664919 0.0599873570026322675 0.012993592432063320874 0.23957413074104136341 0.10187956712746323862 0.28181153324546648342 -0.73155454107323802937 0.070577254297910854697 -0.61831539510850530572 0.55721468450524469507 0.711986053289919818 -0.77527199149833614378 -0.61829644537144512473 -0.18636501251682702218;-0.049871620564577966161 0.60381217082959481868 -0.57878506906692406275 0.11871252572877796783 -0.26581466105798373656 1.2477413213971411121 -0.4283123115650510071 -0.23435065273541261233 0.14176015935379115973 -0.22683571137772834403 -0.36257128822915474231 -0.11968202733005250948 -0.7301167251717178841 1.1570001341885125523 -0.0023384406607084443422 -0.65486771253365194667 -0.65719372061107705907 -0.4321449892643507984 0.10183658345214105512 0.21024404943783145394];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.00000000004028];
y1_step1.xoffset = [-0.999999999999992;-0.999999999992001];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
