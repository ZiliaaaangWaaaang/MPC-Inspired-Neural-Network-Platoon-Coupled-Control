function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 16:45:26.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-0.981740734431473;-0.870314084923812;-1;-1;-1;-0.982296504876327;-0.976188506242889;-1];
x1_step2.gain = [1;1.00921375094698;1.06933911053847;1;1;1;1.00893080075565;1.01204920162317;1.00875457775652];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.7315168431367484736;-1.7532712450422354156;1.4285826136086767768;-0.98710588465988169382;-1.2250751699014852392;0.89913581085653004887;0.86560088958664871406;0.78978097276422176698;0.22798077370699634803;0.2368248894559100981;-0.022265991620471131673;-0.396373835930342866;0.66029543985463812206;-0.84149936272292069628;0.74481065893225562036;0.81658673363693978775;-1.130842822083437671;1.6458452541274923853;-1.8252113568616654682;-2.1505152900504249658];
IW1_1 = [1.1614471970192570272 -0.048948457518207900974 0.88420238807454398788 -0.087806231968911227503 0.73296383688364141751 -1.1292601127532202465 0.19732948190974169966 0.44442983916899525543 -0.11106364392268226748;0.58415019980371774011 -0.024115340527929018943 0.65808822184318693793 -0.010791275684012870129 0.31460854844209373837 0.35034873257704651772 0.58962445425123710674 0.91505480118770976539 -1.229118727935316846;-1.2797580743121745872 0.93639513355286196905 -0.044647741142132109371 -0.095902169680867593859 -0.44682039859898664558 0.001959393489032151825 -0.54656088686573467417 0.49188261804634614283 -0.45336716093947382333;0.19977755823838658222 0.85219841703741594507 -1.2531307491567273971 0.41020722607791632042 -0.95779238952521716932 -0.15111071566805744926 0.58051457638957038032 -0.55788771370660472648 -0.26934594720072008167;1.2314376505258275429 0.55443770225438770982 0.22202577562185210613 0.86981797152872530887 0.77216914474661457746 0.78886197035847560599 -0.54866447894887915293 -0.0067715379968315558834 0.53523477572921418499;-1.4394757727869555985 0.10408955323950196126 -0.49837648522788158267 -0.63573227445223512433 -0.53759054695392638479 0.58299945887095183661 0.98504446700955528016 0.15798174280399152059 0.22911582888445647388;-0.86864724681353522318 -0.69399531500260080996 1.0032340506181827156 -0.866512991257129217 0.53534686678691123518 0.022627668339723731872 0.51481460483004659601 -0.43798637859236339009 0.29191474757032970233;-0.51455665578690212847 0.46178823599439949854 0.68897909137255008982 -0.56500320506483681093 0.63603086347441450954 -1.034517830287154716 0.097035867293688043977 -0.75887451429583707707 0.396936561894392137;-1.6762860838768980365 0.81281461640247931744 0.20269420005463226198 0.55815043149728860161 -0.51138953246242269124 -0.66644463975823331481 -0.33177052279643653998 0.41902663768062037297 -0.54396286812121164012;-0.66388504496870459626 0.24629244555335044753 0.52830741457819174745 0.57781406957829362092 -0.9370875107870029197 -0.81998688335683400652 0.031210998812441256844 0.24586440203715254071 0.88587412142569110785;0.6950704747007172557 -0.57126073106690400394 -0.14087919534908294183 -0.25789459170070527794 0.1873455919473654141 -0.68675308432697512728 0.8186034986816280723 -0.7123470773213561591 -0.19913492325723439191;1.0469305561763750934 -0.17449749684450874265 -0.44591128225706821997 0.44040493270293606942 0.8831017750726983806 -0.62682444447508101071 0.52853225770545309015 0.46613628837370113533 -0.11467031043536903001;-0.0045243480669950597584 0.54446844678358230496 0.98143015046897497111 -0.12431387580180994212 -0.90887641623881765263 0.8512293664463579379 0.94178034238548158363 0.048645551945274374817 0.11760719260063356995;-0.79224268383176688069 -0.28230918882066652342 -0.86280910181364200984 0.61397047479678812376 0.091521576763441886415 -0.53759594569960722499 0.96926204499062884601 0.39441814788736262454 0.33733685881014452423;0.46661843058445195975 0.49714753100874881087 0.82965683510799226319 0.8147693610959217958 0.9305054464382496171 0.52409612386951043295 0.64644999285272453093 -0.13561482490778192789 -0.76042101135318418414;0.88020352749879837706 -0.9725634533070782739 0.067040838306557271054 -0.40123986978961595495 -0.80703339623281244997 -0.83081735537397571889 -0.2322327073022458499 0.60214986442626738938 0.58943147412998764256;-0.11097934802358502826 -1.0151963972389044244 0.77649901761915396392 0.10084844765528333532 0.84402726977446251855 0.68219367443476808255 -1.2236256788345989399 -0.081144102460883646422 0.38162475693446440417;0.55032656537338453528 -0.061068892785661327283 1.24096241918733452 0.57127185055673590508 -1.1887247546500334661 0.47285383170748451764 -0.93375653964481875047 -0.16938850382958309249 0.44722790263650735731;-1.1323942879104804682 -0.31076319867651652773 0.60176103631755650802 0.47956711673565521892 0.1427352070771018 -0.95241065335902008737 0.35199136719096879578 0.63974569112068857546 0.44481756201034916565;-0.44975709666079244364 -0.67316939923788832179 -0.73593187022301598255 0.51590738679456560334 -0.76707421210113180265 0.77150379757501519329 -0.23115166222963978715 0.6275320856180848228 0.22340165683555845977];

% Layer 2
b2 = [1.5505291609042897161;1.2310516909269058061;-1.0673775591812515451;0.4294233496216719459;-0.17383740536699038293;0.21718783367880536983;0.45153232214919297727;-0.93417106053567477986;-1.1620481019896788943;1.3493611409319217209];
LW2_1 = [-0.38555482415228370385 -0.65175024676249371236 -0.55805780900862234084 0.1374806167991355077 -0.27889320883800733375 0.19838222212034525849 0.30240894847723559513 -0.66961315042325453284 -0.28585861588050903714 0.094708192295218734946 -0.12268063639592582947 0.14963704808742139818 -0.45076977861812583814 0.21683977894312067569 -0.18951286388608193367 -0.11292569168204882879 0.56589469950202808679 0.42253675140583596415 0.048509087214284492273 0.55575354865763360035;-0.58332018449371092483 0.13143263401027660553 0.10441478368248560682 0.48713496141785384008 -0.5911001070977031091 0.3621366523067235943 0.17381464644457303437 -0.28020040665680590042 0.11521203959434880848 -0.19269979548123616908 0.27341161798379376435 0.29514229651118117914 0.25050295529555877128 0.22738087165235143505 -0.62261794289154304138 -0.81171678547842784912 0.75607278607424555084 0.43387369401013176073 0.38038792191897186079 0.41111670981492487442;0.5003539906216287747 0.016438253117559809002 0.26105042903414543698 -0.12607584589522269347 0.1202175426676681258 -0.31255552482107046286 -0.19823427688596556573 0.61587908243003297581 0.1061746427683129268 0.50679178275242531271 0.1826440779112377677 0.091972819973318520326 -0.27758575193832868422 -0.38872615206767002771 0.23074261509202459441 -0.061994689458160598394 0.14097334339510725343 0.68227974687429537859 -0.2615502102846153365 0.65155152179596831363;-0.24828667691038977527 0.13866510902922432602 0.32623746384738516735 -0.086804541545043467643 -0.57191993707710064854 -0.56382139821336019203 0.17194863240048008368 -0.19646439107252205991 -0.17097501953057350765 0.55904883549014849908 -0.51109111661036787932 -0.37589559157768964726 0.31697317389663820508 0.25035556709779144269 0.52247639144753355023 -0.074293360822042409097 0.0076519168558764711838 -0.41524035948301529775 0.082347013887149447808 -0.32921188781635890575;0.39229898159058301799 -0.20472787561263100509 -0.26693230396862793752 0.632552949527616315 -0.28763506552321888021 -0.11085582124038223517 -0.17132984076531571072 -0.15469689240266365493 0.79205489927158090335 -0.15315788087545822993 0.1842803410303228695 -0.46006602155521086894 -0.25150441705343484777 0.18849893260544786644 0.31774986604758181929 0.36886051841576383836 -0.10878409027142756094 -0.45812570492266774247 0.51579518146981384596 -0.12157192949222735134;0.59640916943938648842 -0.014943002232087929104 -0.016351829100860623689 -0.24656526169997677878 -0.090162246124486034038 -0.47517239931159144239 0.13362544720625801897 -0.50051166883179942779 -0.43076945200289834537 0.2437664718541106279 0.16350491279160955793 -0.40271462868806345847 0.54662834094514856087 0.1331956872745074516 0.1726388880247773927 -0.51115091472167473174 0.67961790553097878309 0.02660900549541722615 -0.38388760390936094158 -0.29881871598491449582;0.30535361847343989172 0.32767049312815771378 -0.19709703878955711631 0.22880909550572367528 0.51103137011770993769 0.65735295140995686491 -0.14717623425619863475 -0.17068439520428282941 -0.59902495518320075796 -0.21520850581013176162 0.61498084160001720289 -0.12571051533660146382 0.049287479814690726698 0.45470745215799857064 0.25103621158335948094 0.7297164792000154776 0.67685135277044050639 -0.58673797728455134859 0.069240159289211150595 -0.20025579731069170775;-0.15018748817104940474 -0.020816878861170159953 -0.14601557326928321645 -0.27706610122532610019 0.18742536689631072999 -0.92745083754229329376 -0.39345531094686259088 0.49555474874139715524 -0.70791253897718697807 -0.22426601549834224159 0.20607526154221186832 0.50648498203074177049 -0.21800809332545689756 0.2697908921839901053 -0.046612806059117939395 0.46195708157745501987 0.5383378410602449593 0.41474506426241758428 0.63815740129691578275 -0.63104148247151792273;-0.3452877051566111688 -0.3337002516836332644 -0.1355545284456164401 -0.14928360225781855952 0.40960867599537459371 0.32151502313383428788 -0.42639143105122911948 0.18929890333526963597 0.26076070413423652061 0.36324108047508812946 0.17694580164385903531 0.23095050972213962415 -0.0063002109129648604935 0.4154726526338416992 -0.68302364954673988606 -0.65211172439003106671 0.49740634906361985701 -0.35903199264589258366 -0.55805435802771530263 -0.078033306171221825109;0.43619679917641668299 -0.083379603434063614964 0.63440120524311038874 0.56667890196749282072 0.20557674131661982098 -0.4568898830756175089 0.57365614661065844615 -0.024844440287220496272 0.96963749651171904365 0.40606652941855603256 0.095227333046645629144 -0.93849747978313691199 0.091118814759373570333 0.32050523859983343078 -0.28234811818336236211 -0.2716870027756322914 0.22144462982210394442 0.55095082662882088886 -0.11172137642919315048 0.22028778312694888286];

% Layer 3
b3 = [2.0160079169195355142;1.6858628287497132714;-1.3672198583490757784;1.3714331524859129097;1.1522699402588585382;-0.86529472343694457948;0.80527352926444362158;0.56972504868685769353;0.30623075611727662571;0.013386760478236808813;-0.034505170975767489316;0.26961882479744442298;-0.48511925067505351494;0.75377854735281568654;-0.82419132807464279278;1.1353672123552733808;-1.2880422146091710101;-1.4837197468393308331;1.6722706502247801641;-1.8866232002563148029];
LW3_2 = [-0.31585981698144027785 0.42493469240334436066 0.76474783565393211759 -0.46117939597924495487 0.18561470121491116525 -0.43800688182944919058 -0.77706082813361454509 0.74625066008153606578 0.6996884145163865254 -0.31748560457968355575;-0.061862899298260914938 -0.76717250764009303765 -0.29072885541695819844 -0.88544226531627134857 -0.99583237221278542162 0.29367701703237142352 -0.58834367260752540307 -0.34015485462593186838 -0.66452419164323028866 -0.35400288477267488618;0.97880615236461876449 -0.2663637700666383612 -0.63878533106249868467 0.18383753941389135989 -0.26498804188920643821 0.10529237968112370449 0.47237005475020010792 -0.61580191917819759873 0.65024079213836183389 -0.34855723116073833445;-0.050598524269995150127 0.44915810906376180123 -0.14079418102300331195 -0.61709004090614105742 1.0768365592076227788 1.0444274394954227159 -0.57061571301769908882 0.22134633210604626186 -0.43901984842002778064 -0.36095181982664603648;-0.21006833316252529475 0.96588178508037780823 -0.56223533848267637225 0.2109666452844593254 -1.0501101400229615468 0.40076375532891372888 -0.2512161528596832949 -0.60645462573398056794 -0.53041305949978279077 -0.17753271362642647491;0.56571148408946481112 0.74241503138063058564 0.62796936277253023739 0.071202336277163727485 -0.68960351019118770743 -0.69067787924738055505 0.041959968482492213115 0.23147121929460848233 -0.31062225215704747372 -0.86634538715933362418;-0.012952598732863307429 -0.44256454624338681381 0.60841749174066273032 -0.77262497730254353634 -0.13980524681885037053 0.22215296667052780721 -0.079926716571495887154 0.86724182827538831564 -1.2607924928935287934 -1.3538662443729583273;-0.44373066063449240204 -0.37218277907773400504 1.0584563403997906406 -0.86622792734194165032 -0.24269712716036118128 -0.6683216549447231758 0.79835906930663413927 -0.10069373757765523458 0.46216226167107749001 0.41226098496032576035;-0.74255991784902108943 -0.59677177408601755904 0.98198135293466215501 0.57872313630097349524 -0.51156662895941384939 0.20948501748275100143 0.41801514082981505727 0.16200223430505877875 0.89677910833307872274 0.57721942405630444206;-0.60733997867725997288 0.590295322550643764 -0.90269590413437650334 0.97742014358855566769 0.45195783123563676442 0.42548732001661176971 0.49521121831261977198 0.17085585675480083334 -0.11525426715821390777 -0.45979241942375564944;-0.19449551532168682377 -0.24074115742547555485 -0.44236937920805052826 0.41990680749359066137 -0.20815530764173265088 0.78039633109166373082 -1.3071530092976075821 -0.73122124673221766677 -0.1126193791617804002 -0.39087968783439025477;0.28024699060089897085 0.77859988049214490236 0.82278428480414877999 -0.48610432223271154983 -0.96072733758561668083 -0.23286080240427242671 -0.6632035170253115508 -0.68989614415206323983 0.59345816515741989239 0.080678021083392045809;-0.74287873589558739429 0.18203395475120467961 0.0025761050846912006418 0.47090858696588083765 0.59652929330484816273 0.87357286682179735582 -0.31051170732027993937 0.45735129818693009973 0.82274408040807400777 0.7860471998231631785;0.62096811635308679644 0.86301118553660194355 0.74693021923998215161 -0.87039440603021567266 -0.083695237921683346416 -0.16314284206435769597 -0.73162143211714947277 0.58754493690619113977 -0.87506723505615080505 0.49985084034525190111;-0.60089781327646707432 -0.79691189175736010242 0.74145494775394504838 0.68438931123093249553 0.68878244473747829435 -0.80296854941144868434 -0.21738925875647838182 0.11425272071654329897 0.842908330595101285 -0.029616494592015929488;0.072855016695825114414 -0.3697520868833615304 0.81366392432683243285 -0.81826749976987067647 0.90250420630884653495 -0.18743395403338591887 0.2850822502046820861 -0.19142283457439904226 0.51516902663529307027 0.89339294098590482651;-0.75480574656209120654 -0.27418463239550583399 -0.69627274511184600314 0.36809218600990101233 0.60983470008272711027 -0.58072642042617839131 0.64115505331021249713 0.76656537285986992014 0.68269908024120584678 -0.38137320495854104552;0.02124178356167424897 -0.6123224309482759864 -0.36281683231137024093 0.67370128067135226502 0.53050938987653839529 0.63479542612991113337 0.78845311818751229183 -0.89598546684137592155 0.40878911372932469348 0.33598771918134012759;0.89142035175322897889 0.590687728546214319 0.84389539569261928786 -0.13592903670552131112 -0.51052305779424156373 -0.54804900318267968373 0.52191588750653161721 -0.72686709372639812798 0.34016275391041228549 0.25318812144964741861;-0.031620343875271517131 -0.10179569995069791266 0.29883046682850622489 0.48135416818671133976 -0.27666646820624529735 1.1120809851808506341 -0.30810792869745251554 -1.1170276221196469013 0.52612371104617561279 -0.39732187649195066514];

% Layer 4
b4 = [-0.25904459858713929643;0.094925966118210719502];
LW4_3 = [-0.21079046714055127421 -0.47369606280899001494 -0.30824093380817263466 -0.73297853467439755271 0.77758657070630099462 0.29902405425016759244 -0.82865460234349286317 -0.35602876589032034227 0.33867989717034102659 0.070919216044177543767 -0.20364655821653940282 -0.097672719916825079256 -0.21247421544995037657 0.23237136264037466793 0.032407698909597236481 -0.090599403626876476303 -0.026354835084289592734 0.47662410535624738506 -0.31585755808043353143 -0.59363494119470394672;0.33124938358438088537 -0.008335126366879394913 0.73142430407449754437 0.23914558850967365666 -0.29540772626886774299 -0.45450541359155355314 -0.10945570164591711393 -0.43834045430076845618 0.25478148255377125464 -0.29542192219046237156 0.5516411892205861367 -0.38590577863459396557 0.3458700508474862878 0.61639003262620839507 0.85874372531040721324 -0.32257702666392834567 -0.23405531889374148191 -0.12566061120743360346 -0.42787317523665802099 -0.3645496137848406315];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-0.999999999999992;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
