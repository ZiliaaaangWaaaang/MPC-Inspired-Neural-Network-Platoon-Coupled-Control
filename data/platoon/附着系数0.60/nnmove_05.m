function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 16:45:28.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-1;-0.981740734431473;-1;-1;-1;-1;-0.982296504876327;-0.976188506242889;-1];
x1_step2.gain = [1;1.00921375094698;1;1;1;1;1.00893080075565;1.01204920162317;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9873357681455430246;-1.6841729169149655121;-1.364285329518705403;1.2151159588254647481;1.3071183602590663586;-1.0417271850139380174;0.5631575980585551422;-0.5088891826985912914;0.024112855442444840193;0.71392565157109411089;-0.39973807850823994681;-0.15616122949538260856;-0.74696166709018652075;0.81380538434502114331;-1.1258597298776300555;-0.89087626561497557098;-1.4787430314866520931;-1.4342165374849549231;-1.7954379909676752014;-2.043938884685248869];
IW1_1 = [0.01801403443366881435 0.68306748546312290316 0.17197150424245122302 -0.59229206756055308158 0.16301733105660645706 1.0145846785829482073 0.1913920221986191994 0.71069112856742566731 -0.66277777366265100412;0.092822142336657545436 -0.15423336317167984921 -1.2835300287292739085 -0.65283354327732912026 0.49512521285990335196 0.41770678328491128717 -0.45960806605534620939 -0.91707980291119484129 0.21374715469654853583;1.8370224236626433445 -0.014440167222547834608 -0.10778527637372717352 0.52339546939796333103 0.77845232193086100203 -0.31446632356585491053 -0.545815085763780794 -0.26229688691036828763 -0.17386054174107398729;-0.67123774659642454488 0.42991891164162621131 0.69138924789307998342 0.33838004503817742386 0.40189946830410200329 -0.15566155098441641913 -1.3496961420522826103 0.35061541973387089222 -0.58508722585918870873;-0.99575366093675210521 -0.60448145403808983822 0.14267049015128258072 -0.52092802911508007124 0.57169172174775007012 0.34454504875167485389 0.49880224276482126866 0.62299958148349543485 -0.73766996096258763416;0.79857736500725784445 -1.0858798582410611466 0.11973236503875780978 0.49277193396938451242 -0.36611506593384496311 -0.82565835373030849187 0.6765856607530600364 -0.30959494262958181521 0.65373696715758899956;-0.1176824736071686861 0.47001888626734100729 0.87165178437406320988 0.8151028099528881965 0.56311818313863848395 -1.0269619920323871387 -0.21924602789717245743 0.66984396476810648124 -0.22904715611466555658;0.6837834697907055892 -0.75302500986489762091 0.51253392616040127638 0.45283693789345241809 0.27597460435170095838 -0.86007641056138417479 -0.78866267940075096554 0.24768212363458591563 0.90516034348083429517;0.25220976102363273919 -0.095850376932521644258 -0.74912533142647752538 -0.54634168065652366497 0.33412908239972211044 0.34594920416660507323 0.65486635717398000711 -0.47661020134847714713 -1.0449901907453376104;-1.6598906100971859701 0.82320248462453993188 -0.52235926796105325298 0.27489548252461892819 -0.9136241331577311664 -0.85907352903174427627 -0.48200416687204805655 -0.59382655551397789395 -0.75465474690848666217;-1.0875649210705828906 -0.20368891186777521307 0.47160516567150723155 -0.3323464066029233055 -0.23919897573701431881 0.76129820885811327891 0.39979716009863469628 0.85087095358341890972 0.92993792456217017062;0.77944734695154205273 -0.020435948373556937774 -0.59706604604301660721 -1.0946708545811139057 0.66223763652920863976 0.3649347179799032892 0.63716874508842868963 -0.011217576164476418532 0.4186186214628607738;-0.19587625880768444464 0.39782081110901690302 0.66538743660002641622 -0.98366737284006855457 -0.22704690849482561665 -0.88076307240481110927 0.061060367895240483249 -0.574742558800840464 -0.40527881891422107286;0.24714149766380896778 0.75112771858974192174 -0.35274044689023181798 0.55796389740118035316 -0.79915886994491702744 -0.57201416303671237529 -0.34772988527691306437 0.58844551373822628904 0.48115866231059689628;-0.6593584302813125797 -0.24050884252114868023 1.0510497563410932109 -0.055180701158532553807 -0.38541147904265438129 -1.3468057934762902583 0.54084180928808345268 -0.60371963347517398901 -0.17702939235841658183;-0.97388674868689517616 0.72002510814167175468 0.12894572769399878509 0.70164821344159999938 0.91874947668879247686 -0.13730119025640719066 0.12786270541816857627 -0.36889849360164278513 -0.71589861653513020556;-0.4597531291297477507 -0.57793350872871906976 0.31110422381022395655 -0.68223725171358440278 -0.45390327087682330598 0.80790301235724426565 0.44191785397358945842 0.86516351852357042951 -0.87480481365825957241;-0.59585933782145961146 -0.89608052550210270937 1.0045874511738703827 -0.53413834441104746098 0.81818745892770894379 0.36928116902514901421 0.0053819416850581953959 0.70583398972272459737 -0.53146303585927845425;0.16882996930998825369 -1.1081049272113623338 0.9646212944960401714 0.69476353278263436319 -0.090917215582485097491 -0.77622951474237922298 0.77427486011571700075 0.33381964354443693921 0.30161232700570228538;-0.039008585201423764954 0.9071843715564967825 -0.2692230206188677144 -0.21695803523959450443 0.55057189055518529486 1.2505543377249073167 0.5403823739587263475 0.14107345083248964968 0.63480731404718626631];

% Layer 2
b2 = [-1.3971476653689620662;-1.057997862667109823;0.953047463095988312;0.31215436453570605257;0.12048367025000911168;0.1442487399171010487;-0.58625175878676372143;0.53984378952037648247;1.353248175974244516;1.5567059091533392845];
LW2_1 = [0.13014711473283829823 0.042491476110397913279 0.065860323149151536737 0.11785908031672648333 -0.18712467190004072881 0.50402292704131734791 -0.089782377227221155103 0.17943132185825028113 0.0038447486201521677285 -0.34936220583260890749 0.11180309338254706963 0.68027279285279018683 0.23784631541081904804 0.1433837741516428288 -0.52647153174362404382 -0.62868047652006531223 -0.55549683346943579121 -0.054014989155749308647 -0.086224819651501388718 0.53084442769620432401;0.27675404174191631235 0.022513105797375448924 -0.43359155604569726838 -0.72547224470405391461 0.56659112159506563877 -0.69692951616596776621 -0.34454312341249510032 -0.2356943349494841633 -0.66697221471221590505 -0.039605389633357176993 -0.19785320962272170964 -0.2935662970964315055 0.33364627869102608804 -0.43859240454334474935 0.14090593809940979431 -0.35068853274850264601 0.23955332027339021339 0.19878916549444908268 0.21634737416128910215 -0.20160156765959169611;-0.20742668709390296722 0.38239806760452016432 0.075264618205537814344 -0.39147980210542077106 0.47102072040369491468 0.42020906903099741747 -0.0077580270400050277413 0.5690118650434972114 0.42322533135043310937 -0.54800684136939781244 -0.32233545831695609163 0.47094987802013477118 -0.49198922684823687135 0.35724139895897022434 0.38195444134581879592 -0.00027037400530526695119 0.015486064169092091797 -0.62906470473231979046 0.67169973518901460174 0.060842403254734236939;-0.53580487305037349799 0.6131074161355822838 -0.57196558002410224919 0.33341186447528597947 0.12616190280792535794 0.033047665745321273822 -0.49035211605004236368 0.067895159329341425725 0.052954524713800424363 0.67878643460323373482 0.3860660763146708252 -0.49950475685725009845 -0.52909820149303987691 0.10945706768563004396 -0.59262532023893788047 0.36161606803412871258 -0.45843703059235141328 0.34362455801209002004 -0.36556899558324124078 0.23490887740555113639;-0.18453239131286819363 -0.095742944990727385512 -0.47712811625741624599 -0.58493454796724131395 0.21774910366676031304 0.31548955146987389675 0.14762223994007828143 -0.66903354496084510572 -0.32029045104024772561 0.56136417108929326236 0.35294439814357109197 0.22749754519235784733 0.11295959770127451949 0.21502939409076818333 -0.40351935489099288734 0.027034447897062968691 0.20072363250071098562 0.56053125402203551886 -0.40249763161896945363 -0.093906653081459026677;0.28029534884830736852 -0.28715482654182489242 -0.12894207711675531591 -0.11462561586224326304 -0.57029835298947217925 0.11458264829747605296 0.72071952766821889558 0.12961048667259189582 0.45401090096407376029 0.6440070674256338501 0.20644718885797408436 0.64149319066705612347 -0.16321309437653516716 0.26820155046769783569 0.012912013521981038217 -0.096855567278322327041 -0.21895282628142553882 0.25361649795599089385 0.56147130842569692444 0.20473475396929893821;-0.6156050656986591374 0.12124737099811948304 0.0063549957839152066211 -0.086163668434906567906 -0.43800010880373363431 0.060741726474927551505 0.41013014313584633674 0.15881561122738588332 -0.16451904073911305382 0.56855238964634202681 -0.35390483832571517642 -0.032594403593779214257 -0.17038792191649981822 -0.053846977822992941887 0.61015673158159700051 0.08932069499598077611 0.34844157489560945162 0.64681820408341017536 0.60965607792095943829 0.30994128111917518265;0.37968924803622750019 -0.52168080291378515767 -0.27831301944970415763 -0.21169096446773483233 0.11489675309809951886 0.23455013331249460751 -0.2497379480940307428 -0.11837868199101855837 -0.69565678902382399595 0.0024075622394460682515 0.27102016916760607312 0.22384680585727825819 -0.010377594502655117584 -0.25209981815564974639 0.38593219536487000099 -0.4207354852908241627 0.03418337467069542529 -0.037301044359112127402 0.62862310124689446678 0.32271131428304633548;0.50151717376708060403 -0.092034968455319512981 -0.39060956493175630344 0.097968916520774426693 0.16455553372549416857 0.6850785747621844779 0.21701845083042423101 -0.43002759263654244393 0.050918766591866046478 -0.20460011444616479914 -0.51282529232913598438 0.23533228219393848013 0.20451825721108740641 -0.49943287236380773386 -0.078957671223563508089 -0.085470008187524412757 0.42037027661364895215 -0.21476690054673075458 -0.66942228551543647708 0.19958931851345393382;0.60170876297212505524 -0.56104477946601805094 0.078296341434630462031 0.24114505312921641345 0.46594410470658031986 -0.17315444437117291643 0.090783512685647257956 0.40883423695188736424 -0.35271410200259661893 -0.078815513384204172187 -0.20260927492722766163 0.078167299159599301639 0.58666178708654925789 -0.1872127971782253375 0.24830355996001327035 -0.63015181370186834631 -0.040274522406467276603 -0.24685772984843401545 -0.30728177730609790297 0.32820741125907004765];

% Layer 3
b3 = [-1.7607432886406155781;-1.7980477068033964283;-1.6274169767579536039;-1.2599260310024691378;1.0719582484573062509;1.1108928319698403442;0.7048874051776229388;-0.53164793923643516305;-0.31025447168104780538;-0.0070243689849205110526;-0.21041066092899884943;-0.27838619942444703392;-0.63959280478106828038;-0.88279547705361616217;-0.97032041352592901529;1.2085876618754092249;1.3180075146934002728;1.4487592218322724591;-1.7167636090343341149;1.7966114696989872179];
LW3_2 = [0.73583896399433701419 -0.40502513189041622343 0.5497858087093354662 -0.03572138537430268046 0.16798023367920580928 -0.90308040364699271318 -0.80234617418970277658 -0.5094878036002797872 0.050366072054953386905 1.0262591695399929659;0.80868304999890472384 0.29550320734744039974 -0.65926820889266457559 0.86047000888201263802 0.027907549619890462123 -0.7743104106731588665 0.40732365733740200087 0.88136504087729583556 0.18162582940839447354 -0.11394365432704323116;0.74360560398429786932 0.14661533964554229748 0.32471293842342086045 -1.0252653489905672046 -0.20590583066829554193 -1.0647327405011062229 0.044668260498254563906 0.33826537852210658563 -0.31242108748388203177 0.7009763663458790095;0.74992719336602498004 -0.71551847368161469731 0.36521926257166126284 0.082255869990596058861 0.74843387790069182408 -0.00046195037951860234288 -0.88611938841589033 0.80831544453033166153 0.075067385023560986856 -0.054421114888120375452;-0.63502570218944098812 0.39692848689563797748 0.43201947903969373233 -0.71812759121077562874 0.69660345921197441843 -0.17275607117562702397 -0.65295398157175299492 0.97443333944084431497 0.78506260915258396782 0.06666901487723765618;-0.51487923725175821499 -0.8458487008659182349 0.40755300053017967654 -0.43753693079231964491 -0.87109484222809141496 0.60422518735335672968 -0.35401338903225837429 -0.6964981046711176127 0.80558830644718071312 0.18612968535619453525;-0.54623137181193393008 1.0038647658420785103 -0.31021436460846313343 0.23138417582191386779 -0.42275245341005879274 1.0378439169393167685 0.69527494554810531646 0.34656791133409720063 -0.14286600126675733091 0.098916719778225761783;0.012635974875855757182 0.38408516806201686844 -0.33063505300512474605 0.51282972550558925118 -0.27671506594476774632 -0.76078012590925792047 -0.81443518414762172686 0.55992581909247496341 0.73808507296774594764 0.81110442480750721828;0.53202515735233868455 0.52288482729005136829 0.85320217932223019197 0.7625712451704473871 0.15440568658567010996 -0.54608866808379552538 0.082782911605187761706 -0.41340433871429910218 -0.70728324298070988085 -0.63315687896337458085;0.14954357177654692412 0.46850693600951559548 0.83375566279599366837 -0.62916147559806845369 -0.78838177683760046754 -0.46576265760015450601 0.44522242837759390399 -0.82479701548548134404 0.35977358682029192405 0.66937735997385461317;-0.21797908902419008137 -0.66405324083614503117 -0.42971049855405973883 -0.75610009483808382491 -0.67187871405018273485 -0.66917225681656800074 0.067601842019335792178 0.29697338278469637141 -1.1304017060503628311 0.42262949323607823526;-0.84816165516068187102 0.087386725807662185561 0.95302437815539176036 0.14065702097470889065 -0.12446464473705226572 0.72170063358016134369 0.46671118199449784791 0.41153548290829766731 -0.77277169385698807336 -0.75155910539171855156;-0.89572652326474877515 -0.32589791877524049157 0.22783611927478653048 0.37382654031991785493 -0.56001559049838944837 0.43279832461386691378 0.95660243427621316492 0.327744436102441139 0.74630455540006335191 0.20259236175452552398;-0.29754299216578472542 0.79459769509002997623 -0.14719078227392462521 0.083429242835675460066 0.71501295791620089748 -0.77843186340906955767 -0.80617231346272855141 0.35420036464930909625 -0.71360764437736479149 -0.33683549471055185265;0.29087961161622666317 -0.76969605787988504275 1.238471882672069313 -0.42341166940707974931 -0.73466685410690224511 0.60478511119519207107 -0.42888384342414387351 -0.65052029455091597843 0.49036936920651491567 -0.56399546937396149993;0.028106825228533638406 -1.1276862231066686615 -0.15355677487367072609 0.25474541937437311656 -0.41678053549683097279 -0.3574657268458718562 -1.1177079285914317541 -0.70714498181731855198 -0.23734684896606056403 0.33549332706799472881;1.0839297450165714665 -0.58678114228385047646 0.69130801884545467484 -0.18949763817224513085 -0.3192446567248596323 -0.19682225105691708578 0.018119981421043093034 0.23064222103138296016 -1.0464191486469704984 0.19212998093182975801;0.033704216842160718282 -0.32575631003071670033 0.64273191729733336608 1.0279246138804212229 -0.79507195409557285259 1.0310653444772228671 -0.080318216592121419173 0.29912474513174552859 0.49912290043197832246 0.11168461669905728473;-0.00033572018123233671877 0.90287010750883567312 -0.25521469924059392298 -0.059662526265650932256 0.2473253986829644091 -0.9719852834628580629 0.92119744447034623835 -0.47057169480174082521 0.76375788951577350261 -0.12795081223295726169;0.36718497563239288484 -0.50330555070662708061 0.36637382900782128337 -1.1326785048604246509 0.19154314127522806266 0.35343739512927963009 -0.015800643938438899139 1.0882293491379211314 0.37243744060251571248 0.668064833135212921];

% Layer 4
b4 = [-0.37057099728631270885;-0.51566422332959793717];
LW4_3 = [0.013498501027962753196 0.4319153653919409197 0.16224987341766922144 0.044029974904947657977 0.4449266109209519815 -0.46276085528959204352 -0.013045890761601964744 -0.11056889678069101168 -0.87606027072689662827 -1.060705863870978094 0.036005266871524645167 -0.61390453524853005884 0.38904007223946807104 -0.0038110189964730631362 -0.14847303799619968045 -0.57285963440096288046 0.20754679542366352707 -0.70882917169229897603 -0.10577445510323459088 0.60017447399228451843;-0.12708832597626779082 0.1037613628960428469 0.32316025268606340948 -0.0075720409033242369601 -0.053944992785030142224 0.35975968194134266831 -0.31894001092767959582 0.57292626409343805349 0.72597615975583162928 -0.59722467793920452905 1.0007648723130591062 -0.50618173006637412481 0.50010231615587263931 0.19019040025369685076 0.39823118596530887592 0.47179487909064388163 -0.16091753945475559262 -0.28027846195227135162 -0.55305494667098797912 0.21008724433295403178];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-0.999999999999992;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
