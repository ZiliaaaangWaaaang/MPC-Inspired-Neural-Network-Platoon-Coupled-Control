function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Dec-2024 12:39:41.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.832381007605849;-0.881804843746703;-0.695257580172501;-0.656730875905293;-1;-0.581556487918271;-0.92174258681972;-0.874312231364002];
x1_step2.gain = [1.40069505009147;1.09147605858083;1.17425519538329;1.60065309370616;1.20719667212524;1.09753168206265;1.60565698304423;1.04072211008748;1.06705807417398];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.079825272952333659;-1.6847991172172620544;-1.4799166646050292417;1.1956817037119482627;1.1342736346487725108;-0.93191598586103552293;0.87172642453269733043;0.36755990588340892167;0.49194261966198932212;0.031702673070440806624;-0.13147227829421051504;-0.42509982425901388092;-0.43087468540969353636;-0.57253817872727363891;0.93244604043312306896;-0.60916785378520865724;1.3900667029055906454;1.5651786866558230482;-1.6198687484677676274;2.01328449310445734];
IW1_1 = [0.75627550989095793099 -0.21574569271134116932 -0.98613637794969222217 0.30393738539240583441 -0.23165066739842213317 -0.75173483249646821935 -0.52324744876435369534 -0.30533441035353081627 -0.69531201084341887064;1.2125712412795155437 -0.6379296987542003583 0.66356840176752551752 0.85111153809197415132 0.76582313664016388177 -0.35266779048832319621 0.32091850082927686483 -0.59293008772154220942 -0.0089697517879298409305;0.19717637681344085676 -0.31063450596839131679 -0.45248984289039784201 0.86344396606551798712 0.20345296561210682307 -1.0121005252824717413 -0.36348255503153231727 1.2405833215387400692 -0.80379650858083306897;-0.56928339894625923367 -0.1220549279342759974 0.12325912717124852536 0.37292803735303614587 -0.28641207405614221848 1.4707864265021075578 -0.45535999027402301875 1.1698592795067341843 -0.57424850182585851499;-0.61421199504942980418 -0.14905317913702675892 0.485243791231005972 -0.099218657874034416055 -0.38596000899909965742 -0.98859618597241050164 1.3569728048386133779 -0.43694353673937330607 -0.67093869307582587602;0.57539022715224996674 0.79365350804056300493 0.4008279019044094782 -0.48883449250372379424 0.6987619099666660949 -0.61079450042075245086 0.81767472658836082289 -0.52663556385014187455 0.41751080554806685452;-1.0993746754362867524 0.32380035550277669332 -0.14624810976378471716 0.41238625657214267317 -1.2693086126529071755 -0.80115049165931806474 -1.299083293439336817 -0.41236456607294635912 0.34154385649959839721;-0.91726638465686971546 -0.12857518422017155668 1.0613360839569023764 0.48898621525526786424 0.72009009711059701608 -0.29189955089211350181 0.49023992990772818912 -0.23718415989755964324 -0.37478311488524301831;-0.95542157809062333573 0.68132721499918880159 0.57930832676392263192 0.48558802946173812431 -0.080067721018658055687 0.98361481989666144088 -0.42133423233843347866 0.017089497842098948233 0.68868136626517872934;-0.87031829693165496664 -0.37520214580395416792 0.0064048979230209215213 1.129185378679188112 0.023272985298581898295 0.58842448600536945147 1.0209055653708347666 -0.48807095918992277062 -0.33864465154985662343;-0.05218113670039521701 -0.7701277754846355128 0.73714057254173193101 -0.6725813524898396345 -0.31909412866612052451 -0.086320810353129620585 -0.84516331015135359728 -0.87084369214587165065 -0.033166265939849837174;-0.63470256996839058417 -0.5777731252549387353 -0.56751820447144274429 0.29820358701459803719 0.79451013703319994796 -0.41378967294366192364 0.62613408098770373389 0.87851933807060089698 1.1032246163260379657;-0.18963593022603691951 -0.21396561342282294227 -0.070041239210911501734 -0.74093893828019430359 -0.91286279673720149841 -0.56876438652197280899 -0.77825292244782451334 0.47444830659601860967 0.88167484351973690604;-1.0427036867525960595 0.6438823376685334221 -0.59590520965214188731 -0.24388411805287785183 -0.80300585395991597171 -0.20590421157630864335 0.18616376841379278506 0.53484058156457880973 -0.99823712394402175363;1.0752727136049227141 -1.0923127402617252013 -0.27506556634735584987 0.032037193847124320611 -0.57343756409241064542 0.78497965912052058979 0.3120453850580475752 -0.53041477918710133732 -0.50971096420265793459;-0.3030783751538292381 0.63395738145676072683 -0.6556873589567362437 -1.0332525972087884814 -0.53971272602012210218 0.42762042320648790961 1.1754790609154317504 -0.78930401056909227364 -0.33244920981251391279;1.5784705663863061176 -0.06367118558268897166 0.53229309737577534811 0.043103242582133875771 -0.14911272862219557278 -0.28633438837963842705 0.11730768005554671751 0.14235287074744018554 0.69994241302259330162;0.1518639389588912203 -0.85560026450512893792 -0.64031269023594572509 -0.90202280721041050437 0.71997375276091946095 -0.39190723046354203341 1.1395800885868805352 0.68913753540065880721 -0.56114541036800047458;-0.80775887657999323466 -0.69342847002614105278 0.24795117877424455166 -0.98150265184826324116 0.82557724128770026972 0.17051266414094190527 0.23803758481133188707 0.68033042855148506689 -0.96727714486245641723;0.74113984615996142402 0.780344901003401481 -0.86543880652051152769 -0.85666903666712035381 0.29962565122227996506 -0.2202768773929162649 -0.69213843678725195385 -0.71130544861427014158 -0.1428107519252428681];

% Layer 2
b2 = [1.5777504104754098702;-1.2161451026800278452;0.90227446239362385505;0.63383619615521380464;0.37542085796913632345;0.16020292897744520255;0.46203498698050726734;-0.84439229026251472199;1.1197206867732749647;-1.5360607982777487734];
LW2_1 = [-0.69622591654802679084 0.32299030849254578568 -0.29440699096245576127 -0.27585587770450381573 -0.15815069212149920896 0.027101155400485129471 -0.022114403255945158655 0.4143025383079390056 0.50444952381214125392 0.2958529388151082129 -0.41328267108476457459 -0.0077006962411334837701 -0.36091221574111331805 0.59194180960565834226 0.36965912408229195663 0.67590687771211210855 0.31993461974644638035 -0.1048360268109273935 0.30351336291065128536 -0.02276713802947873469;0.11913492758062779742 0.21925379640369979661 -0.53331394323413983116 -0.60258619983549022159 -0.70409711873149682937 -0.10582078706490830045 0.1589004615546499577 0.45436083812726185682 -0.047943696294755658305 0.023344651622783030992 0.10668142462095851764 -0.11285605535026707602 -0.59362438211669066312 0.56241872164072459483 -0.034753240402769502992 -0.35788257138751311537 0.12752392181820990102 0.088788014116799762743 -0.59364183517741908602 -0.58933771614597740829;-0.10309815476920737576 -0.20770058864422344391 0.33532110702113931966 -0.29486904992062451525 0.078954850230243650566 0.51787722683796133527 -0.74131767182044183695 0.23543407164249788299 0.48878586603237061947 -0.20374157088988667508 0.20101624905901643858 -0.1326632342175132484 0.43301223937277416587 0.065926674232809540088 0.0023101897302037835424 -0.24166969976727159519 0.054483833400152698045 0.50511591070552974703 0.50869182918456112841 0.42854518995058860087;-0.18682644577710075251 0.97262902672647955082 0.025623964303542350052 -0.49943647736894336564 -0.72090002141517206535 -0.045197347803541419731 -0.7305649451202860245 0.27016784568283480628 -0.35988595988585453389 -0.28672085440803346534 0.051787207509100062486 -0.6738790586281792061 -0.13944432240720278093 -0.087220346129261272505 -0.3848131042770709942 -0.11913924006178688852 -0.57609342164768329031 0.51839691471111803978 -0.46916754310333186329 0.087344529322952044192;-0.27423620790617292409 -0.0097602189427587558029 -0.6083450179092050325 -0.51598264440396002239 -0.69574905630657735145 -0.41689672389430376676 -0.37422561264416320803 0.44608217652194692704 -0.37583461853332328362 -0.20637104174072604112 -0.022906197127948068476 0.40563929918662139373 -0.30581989229882683423 0.45586692795048439075 0.39907048195758410003 0.30285971998884342327 0.16514534907949113274 0.47659034938055544472 0.43571432757512212897 -0.31088909198438730019;0.14549778098478383104 -0.077247293866391536499 -0.28799688848760301996 0.89610362143441246729 -0.21208658918284742367 0.06157304102949624075 -0.4709810958742337017 -0.097606811878315768993 0.35899295458159807826 -0.25679142635722113086 -0.0038839309796066842466 0.21054368809434007015 -0.66166295613283609978 0.079387197005783727288 -0.10216574573115205782 -0.0071348633364996215389 -0.30358282756164811644 0.17817938054322468577 -0.023404831332399643473 0.070317541800722804801;0.20680545460477317565 0.45689585262212772943 0.59257962347882964238 -0.23306550941160328327 -0.20627699669906313096 0.16314146190427497585 0.49546736438179345141 -0.26569025761807985031 -0.31639040439960108841 0.13729003557882910047 -0.17776176708250190917 -0.35479831464044053746 -0.38724113323658176933 -0.42987661464063647854 0.65527182976501496814 -0.24331051434755915364 -0.33656218999608861209 0.83455676228929775995 0.39766478096138702103 -0.079176070306653245634;-0.37109204654971084114 0.54435339111277236679 0.51147602051445428817 -0.21753012824393111457 -0.4348824112290483046 -0.42561226972978016825 -0.12132664335890980256 0.36480432817690072733 0.019873519732469681343 -0.54310376186905939822 0.36759817069754063823 0.13585651356749717245 0.19422522516480644761 -0.49134824876405513994 0.31664977299924851328 -0.083906496831250246271 0.57220071138808237254 0.059946959120143555877 0.29066061698171125061 -0.35309323663325486997;0.10297726508244522958 -0.067546887413711911852 0.3361378038943229063 -0.41030572677468202247 -0.25226526214834493755 0.13117204873763532724 0.0065780118175511482354 -0.32875947593422000237 0.22855572082059466554 0.51726642604285788529 -0.079334147643827734875 0.35678823322425617937 0.26346938580997836254 -0.57728519391862576082 0.15656125665431225302 -0.23344448895186564741 -0.66560207055318465486 0.71909706362224490306 0.71311674214659848126 -0.2821116171866715483;-0.031591931738882549074 0.54099049798966258873 -0.21824625126406255182 -0.18064746577651183412 -0.61421315208636806382 0.36916554360559322712 -0.17571018276109814926 0.22807940590111625001 -0.014491683549244738227 0.27093485121210236777 -0.5275879187909183754 0.26819713078671136852 -0.057284527501935487981 -0.42728808686417973917 0.37107788265451924214 -0.68707144560346933293 -0.078146464904779527894 -0.38910790533462019658 0.22887698384232244009 -0.49227653406626764587];

% Layer 3
b3 = [1.8181943003875704612;1.6732212213105468468;1.632363189334024689;-1.1280234613024333612;-0.94428337127483641389;0.96996957767544400575;0.51039310398888670939;-0.67811294958001400168;-0.47359890954854855227;-0.20383037387654359684;-0.0054283545148514989256;0.22355272887781013624;0.37990109484853251676;-0.56174870343784233384;0.86827721538927105094;1.0760398688166721293;-1.223004498492892278;-1.5984412909470178121;-1.6293551273267152801;2.124805075628266593];
LW3_2 = [-0.5111689104858831989 0.8600497083582008262 0.89980859218970798974 -1.0345736772489362298 0.13712772216615820575 0.35250738669720921292 -0.11747652276743936195 -0.062165434334249120019 0.074701436760010869742 -0.86890873814071534209;-0.69409793207750025701 -0.35173353735549633958 0.58208965143728397251 0.45699113292728443803 -0.43837670369721404295 0.53480711519016810307 0.4988276280933813811 -1.019425400195626219 -0.60653243857374972148 -0.50495545718182244244;-0.41982179174146044831 0.46070010176565245885 0.32686681485772139943 0.87292985464120853578 0.71949115854350487176 0.68376265584099216177 -1.0149507784552742606 -0.52771503567790356559 -0.0060000065197830312891 -0.016737831031293046169;0.088007641907357991862 -1.007322598005204739 0.92610564405215201056 0.71257970325108832554 -0.78385378914150449781 -0.075694911431896341747 0.52558527892203710241 -0.10786871185377841509 0.30433270439086479442 -0.20858412258708666775;0.65048253786775944718 0.12497183842524939301 -0.035546116067321609222 -0.53936077725882081157 0.92145672290359259549 -1.004329003191532399 -0.78384400471165616153 0.26660202801773780212 -0.6806002546890462801 0.00091205156098632519587;-0.96027518816556933778 -0.44116786992663192812 0.22455185061217253217 0.82601631915695417074 -0.69072448713191803016 -0.18874529346629262405 -0.78912381054528302204 -0.017183257577786052034 0.10825806208909989625 -0.90012717443694434394;-0.20293284357858726308 0.88008409366219830794 0.26317713031700123993 0.27613775549381069929 -0.082233496235948888575 -0.75763453303741445932 -0.88822978209904379643 -0.74705163255504791753 -0.80873467386035935434 -0.11913174003683141278;-0.15237494688461397652 0.35090841228631503013 0.46504721036336282847 0.86094635588759538258 -0.57708408617753303993 -0.020465991459802511387 -0.83737662399526657797 -0.34467221360693234278 0.50336303589552455762 -0.69817616681232808062;0.49303014796267136122 0.35001748644578356551 0.27894375453823705424 -0.42567040522106402989 -0.82446918906717259201 -0.5098248011904856769 0.18067576385616637702 -0.94039863341181617606 0.7826948718443318409 -0.14913420412200914522;0.28289024424002645608 0.17272100357551420369 0.35188765537876887102 -1.1570542195926978302 -0.35471609129271014504 -0.62441126556372150702 0.53517876608372949576 -0.40481762640887863913 -0.57053093338238491938 -0.7010759040624160443;0.81580114720010887819 -0.32075600072296561738 1.0323615356176782942 -0.92426926669647735402 0.052103944650066180699 0.4815043991835506465 -0.50520191988457063825 0.011174417342129434882 0.090520272230585313578 0.60341768452651567411;0.41722215564239034657 -0.85751104600657890309 0.71944683218417804227 0.59392167994386690921 -0.61116635914065342572 -0.64238629892937337829 1.2119940529975925525 0.058795525894220698748 -0.2790723688958371973 -0.43888868428559890678;0.67241026427767358609 -0.99687875370064205072 0.57995371586933297525 0.26368990885635651411 0.82098155270798289784 -0.54919298303032426656 0.44193618459277417276 0.87439353213450177194 -0.081715236553988296331 -0.13931367337170308396;-0.61682100948301954446 0.40212900504673104729 0.55025620859098245408 -0.46815089325904590822 0.67793158996022118146 0.59629879514575079291 -0.99677340419975446473 -1.0081590533064457293 -0.12596076953556711864 -0.49833027379916439159;0.065345521122473743114 -0.63840444325374179346 0.601897724092928188 0.27193463224121222632 -0.85498475497518677813 -0.51532334091444798041 -1.1295748280622834869 -0.095282676808722932549 -0.59491521887401932478 -0.64120347496016605326;0.59275318573434843117 -0.93581859793774413436 -0.78398167769271753791 -0.50647489402265810643 0.75166884918585041842 0.38941583286111486339 -0.34503485339996148307 0.8576724281381691295 -0.48130956541833574969 0.27029110709126491496;-0.40322905278546650187 -0.14069637661246156557 -0.099264639273902791072 0.81403160148109843242 -0.027172919346740976448 -0.32257734904404611331 -0.87661283862610628326 0.91754457453270232836 0.8600172082729320433 -0.3190880760655050441;-0.16311808363467567018 0.81472250794635137083 -0.50479264366275067299 -0.16320452298786400358 -0.71827703815888743755 -0.9712660721371176864 0.61504801271599951473 0.20351576340337526605 0.81681861136223243847 -0.2931138727719920789;-0.8041014139556122986 -0.94400251091434106421 0.051201845913803951948 0.42621689096383630346 0.4462922001432773067 0.23771217404750738522 0.28116461442348922306 -0.71393522520404106846 0.1375841250294059237 -0.43708403849376642469;0.48475292494119809339 0.67523501471171620825 -0.73061053964833322372 0.93110452807997268199 0.25725678250645006573 -0.99376757129757098408 -0.0010796307254503974965 -0.3033166040953557685 0.09590024526516828518 0.11326344440643527911];

% Layer 4
b4 = [0.11122714854346169022;-0.71854604944499711472];
LW4_3 = [0.27315338453801424334 0.77939836643447868436 -0.40837009029355053613 -0.16566422685134779558 -0.88882146173663745259 -1.0816231570230971926 0.93521088118991324567 0.26326874690836432613 0.22625357762392228622 0.80863372466630722979 0.26958986621443969955 -1.2694895434618582719 0.68581452889658034433 -0.14841606633762699508 -1.046448736103371191 0.5006219346702703854 -0.71150416611415268076 0.39723554684920325819 0.43816412284299988134 -0.77325460695660086508;-0.2270504357422639119 0.25935975787038945128 -0.2759956295844366303 -0.02354307075376399494 -0.78499715623131505193 -0.30659845524938061923 0.30516866831881583888 -0.24645040164203685373 -0.49863320682122269645 -0.16640377809388484653 -0.038823715232944616682 -0.12750455768167689996 0.09992484310142492332 0.032433418842623025491 0.99308131223251250308 -0.67128376108868592631 0.38636797948337908704 -0.57759701116045847336 -0.77422015215025574708 -0.35566322770135033737];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1.01639162834449];
y1_step1.xoffset = [-0.999999999999798;-0.967745447940794];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
