function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Dec-2024 12:39:40.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-0.832381007605849;-0.639361590405926;-0.695257580172501;-0.656730875905293;-0.736217511301753;-0.581556487918271;-0.832777317149331;-0.874312231364002];
x1_step2.gain = [1.69825171189909;1.1174848563727;1.53491027182406;1.60065309370616;1.26826958496911;1.28329478701394;1.60565698304423;1.13162626338097;1.18705279589493];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9881616325696911396;-1.9724698210849063162;-1.7162828116900448183;1.3755725529704485588;0.72848878118088866707;0.84768145255275528793;0.76051552351013484987;0.69666516174092185665;0.499946725691583993;-0.086166632669050724491;-0.12890241129852236801;0.22171741080139684144;0.46206642311437085002;-0.73076067715888493037;-1.0200085356307360129;-1.0708195553096877539;1.4199534556873092406;1.5646195796359203545;-1.7154808333071078774;-2.0528844073511711699];
IW1_1 = [-1.0308048562380858204 0.32675530577120925901 -0.63970798397648565015 -0.78142879323755032317 0.6349509537986499641 0.1951363534709589509 -0.89981839838053367941 0.54500320680774927418 0.45543360722391484918;0.46448612081088064274 0.33512763494203912096 0.61234435568835543506 0.37426103219418921375 -0.85354013066035205881 0.61421006412797241047 0.75281882536263944328 -0.23913237076036994444 -0.77471320979941249441;0.78972375455487009432 -0.79191477499872675594 0.78022348702890120808 -0.6810427492914475911 -0.074895612610402673148 -0.66177451971298251188 -0.64176915546902524312 -0.029260248051518656515 -0.4374709123614623496;-0.63483744010051657014 0.11782489311959966349 -0.40138751097482056052 -1.0841774761818867567 -0.13617170095074979108 1.0206169439168066848 0.3079337564428065166 -0.24892465709084571346 0.99095764448566081573;-1.0173961066541994391 -0.065954883950831488804 -0.72977725816964145178 0.35103621075890345526 -1.1111800944972605176 0.31407192924696919478 0.42295515365303792965 0.94309248035858850301 0.31441752027699776395;-0.42019909604313815388 -0.38023122204887072062 -0.22938330440829618473 -1.0157332368638722908 1.0789330352960257997 -0.50648841882552619875 -0.520633693226779104 -0.83478708313748684056 -0.40640328021947202952;-0.58777193225588020287 0.42737730311851024334 -0.70521090528455265822 1.5393415953171127875 -0.82784764708948510581 -0.29457326949806295069 0.34618730419825183287 -0.068927538940012203494 0.38443934305514759764;-0.57537660893599684719 -0.51604532730980079425 -0.82977597653312518133 0.61998221328434077737 0.28832428550402289247 -0.55126798450965897036 1.0939027654287367675 0.48524520860879027939 0.62823140700464807917;-0.95949106114224802511 -0.65104432220413355203 0.29465751352932456619 -0.13886658733541162869 0.53882907932280521557 -1.0746572073981670581 0.3225092067290700748 0.089574314910340957496 0.65454873359505172381;0.59658182886584221194 -0.079890607741803149056 0.29999826606136170692 0.54971315105053697447 0.49505109764536719963 0.66077997043944547428 -1.0470935896444839575 0.10491104873741262382 -1.0102820977487485532;-1.1075931058386092598 -0.43710108088329185927 -0.080113042940947745696 0.11537560499027275929 0.87814371196418139487 -0.70132350981915281274 1.0360487013411623369 -0.040514094617822349331 -0.0641453765570892398;0.90122234353534447227 0.089518229861220321997 -0.4748498839779908276 0.68101471461515727945 1.0773375092646519935 0.31938562530843750409 -0.65290746834058843717 0.38667136905659243995 -0.59540603202654274195;-0.06306168372734269334 0.62658884317650087592 0.99340819336808128259 -0.46606175994842152788 0.024663193070559894654 0.34031483555647951134 0.73825911205622252176 0.59902016845993322214 0.91813692288832049471;-0.71547395950814018928 0.75533618878959396525 -0.88992699022163779254 0.35483706503087186768 0.65806612192824143204 0.50505564693219162642 0.23789803340637349915 -1.1369667253908990467 0.17272853871767393508;-0.29730667051752812657 -0.58356470129789572709 -0.87312861682530507057 0.66913091456962425774 0.28213766558355207748 -0.45126573774782513526 -0.93566928066793586538 0.37005769244746633539 -0.84275790465382294236;-0.84413655955972954903 0.54588570330384122986 -0.91457430419803409372 -1.0849475605322493887 -0.50228841999589268763 -0.43744841898931580149 -0.14594218509462647537 0.56137109644760585514 0.29292785951192140681;0.64944939595893080853 0.58668390509981493963 -0.64242496012785310633 -0.23978356966208863588 0.38110534998833567322 0.76302079700010905228 0.68027761427205502009 -0.63554208115756549713 0.98325667425438290081;0.7755178258771342481 -1.043668590839454513 0.35831942259753030156 -0.75384235756823392283 0.54033366827223727746 0.24095864975691733134 -0.60999521194788386413 0.75680082697733430663 -0.28162987629119667909;-0.15289824841171922865 0.48312789301470421277 0.83644766065007247757 -0.41560954407592104465 -1.0075021831917119197 -0.38193744580441402192 -1.113187231505699426 0.57196477519706923065 -0.11586323438729685675;-0.8383798155815990194 0.089337377592789035674 -1.0224674330174008396 -0.66266530334815676451 -0.29385885453836529946 -0.72498078339612725962 0.26860536984211180744 0.51033289033494189102 -0.63520591507085599758];

% Layer 2
b2 = [-1.586326470869313443;1.1613077522017609677;-0.85850026421458103254;0.55355044617082205249;0.11401535914742667865;-0.25952976274751315966;0.42154220257395319527;0.88880153784228266289;-1.2862512102911785039;-1.532177015642335105];
LW2_1 = [0.23913704600468810302 0.54834582161533662603 0.11721081034455235748 -0.036173953374584857934 -0.11630860225724770629 -0.28041842839630176654 0.47724127707873276183 0.33188150254489295898 0.56075437902591496186 -0.2723026582743071633 0.5187562719400418132 0.17088280713610204398 -0.40537417889546251137 -0.19353207058040575173 0.2035954663513253049 -0.22451475440746604395 -0.21834260846749412033 -0.31730843710640299626 -0.51211121387765567992 0.50663126225964749683;-0.27292159519499065157 -0.60703699153083656714 0.27221141024060724334 -0.59759386514608436869 -0.0092767979541542953253 0.088305361121537626068 -0.83929421991527741742 0.12646694917898382293 0.012875860889572061235 -0.31237787429412300355 -0.26016615529226672088 0.18267189731426416999 -0.25176389008448180062 0.42152449679760800594 0.54455859850076282491 0.56941281835041568371 0.34140674262958625729 -0.32948218518333899363 -0.031575860099785663104 0.49183424372929340773;0.35741103580212202351 -0.17936437583170108945 0.073923459620829717887 -0.35620075182352273213 0.40092617724315560146 0.50055386131313817089 -0.047903617391300321038 0.2604227340574446492 -0.3854734028180363814 -0.52743411064048184578 0.081450311117442275588 -0.37818454162396025753 -0.4570431437918452966 0.099662454848190029644 0.18460212545001314366 -0.3871089445198632184 -0.63629704259933128618 0.080215010133891068156 -0.31522213202305382485 -0.046759580034536445126;-0.55805557647536596644 0.47516593510968757608 -0.28991635956186678769 -0.30489014515472478983 0.15200347421002963211 0.12727037185178083356 -0.28483566726620224152 0.3915566771111771982 -0.51342927895012013817 0.41013131310224032466 -0.2214626743680724319 0.40482258337492627032 0.1757622790436036142 -0.087358196633955220722 0.14240003157341202256 0.016049736807857428733 0.71863477018170240918 -0.24113063021051914236 0.17087431218135465394 0.24234038486444803295;-0.19603882730640739829 0.38584775682804650643 -0.035682120206874966273 -0.21180197881426310325 0.11598226553258207672 0.32937500076067205423 0.12294292526583132374 -0.040701392957355447821 -0.14950933539413474582 0.2385402670943479464 0.13139784665463777324 0.68779333306769674383 0.14280001074143092166 -0.045664147071450313098 -0.41685655441343866245 0.43869227611914962672 0.27070226136753777757 0.011011757485850055122 0.64295369816384984052 0.56584369912188303697;-0.21330563992781698124 0.34289261591686442943 0.24864040069790283027 0.19114846312113825677 -0.13555052180290255714 0.71449422609852186739 0.041278529943747616082 0.5838825630798676336 0.038124708437805895911 -0.1205033633081397243 -0.044064265150324549714 0.18657314111727282824 0.07989074350468541863 0.56510193910012496143 0.319714452231414481 -0.092572386874631595877 0.081524946692819039162 -0.54891236801749077046 0.55542339961493769618 0.42668309895587913649;0.25815088584268658378 0.17371443139430001179 -0.32829627659576943177 -0.040155691920692709873 -0.42171571701330529125 0.37545126251102717285 -0.5899699946181135024 0.25729182834489439102 -0.015884223401539988157 0.029594629428575321833 0.7535467357095519958 0.15333973575994247485 -0.28764408697008586602 -0.11541245888813941867 -0.25559599997967019647 0.77686117401787802006 0.050077467680770031133 -0.40609120371498252933 0.0012207096930677251156 0.69632105171632940888;0.53046890060524531929 0.34621162069633842906 0.39098415487374854616 -0.39552132008170437505 -0.28935424036374279844 -0.13552385697577237766 0.1059659585412479621 0.41988613156683385341 -0.25091799228886862982 0.35383726846443236402 0.36954869926411065828 -0.40432893170803857474 -0.23573417425107046075 0.20236834674304435278 0.17904511146842291835 -0.60480076867283916187 0.42964550540266888135 -0.41486183410752897061 -0.09083548210830008629 -0.035428820780007481972;0.065365977708706224369 0.2130149857425392701 -0.19048573420663422739 -0.41211399289886707642 0.17334209743528936065 -0.34864450333312879682 0.54507381521623410325 -0.45461986763994138849 0.51280894354961337189 0.48456393536612374362 -0.23640976089602083743 -0.17431479255337950507 -0.0098421405604833048231 0.33396424314882000584 -0.30215235949419849693 -0.15689695525079869198 0.51599143475696418459 0.14767987957239403496 0.12064022087681311457 -0.23324470966927279836;-0.099877828996814063678 0.20441642675379043115 0.33046104223440003755 -0.32134042825142872246 -0.42504470637740354722 0.60263601549635004151 0.46443457796856291164 -0.30946227877083604119 -0.45573860369180668739 -0.052283162979324115938 -0.044187622548830199354 -0.48407165836115673141 0.24644613378343752097 -0.37415089965360165403 -0.12404725752971866581 0.46593033634900871132 0.43053800553498988712 -0.46151214631866682714 0.24813105545404082197 0.16429632017513381981];

% Layer 3
b3 = [1.8944960940047956832;1.7378469211288305463;-1.5255712863001107404;1.2798179288750153315;-1.1974878110014117727;0.88555097503361701605;-0.71115391425265850334;0.5040096701677455604;0.25585356043590734565;-0.12255296140505966829;0.16299634340493227014;0.29770829509843937943;-0.40835362040169853604;-0.59518861080822738074;1.0027192240408215884;1.128141801242882325;1.3344982967763663328;1.5166525955159346761;-1.7410460322676608591;1.8900058289652399424];
LW3_2 = [-0.6659899791649469547 -0.8812847661210014838 -0.33983424600171319163 0.55754723999731015116 -0.73244276017205423024 0.40057199567747070468 0.39116202125825044744 -0.48192955914391172323 -0.20560610544023025237 0.88272769375692228255;-0.33363306490521926762 0.51040259506263196965 0.33288843426946335136 0.52012648179501486112 0.84258904667159728596 -0.13458028783172240606 -0.70122729136767369962 0.58660121655481556324 -0.26944298415761125387 0.96240535034666097047;0.074703850493933146582 0.54644592408897596503 1.142716014123986934 -0.84068995045399164123 0.26725055707052214338 0.17847868665067026517 -0.82618706649263173869 -0.45426296236393226557 0.12045748663573059567 -0.37520518825455234646;-0.64944320737915550712 -0.0058119104135679385686 0.94284050108134531687 0.49099785457857803017 0.98453717557016307005 -0.23440522447773406989 0.81520531504524929023 -0.099715550108423478548 -0.44911114236632931895 0.65212617495119751254;0.41363683587212063397 -0.53795951090581972664 -0.54610946240660007689 0.68107149385684784271 0.34897553057609431715 0.59839751281700181984 0.2639850204235607567 0.45945712582979120198 -0.64053101288516767209 -0.82759440595008493258;-0.4762673992730723227 -0.56063866528444150639 -0.58237744092389187589 0.075664554383124194015 -0.81742795948273327955 -0.75538391064145471443 -0.42639046121219231766 0.70423717386129003337 0.64872705356622384354 0.55535354962256122668;0.33682295292761132988 -0.54483563717374594582 0.73443204025797803602 -0.83029732730748706526 0.79876580390715290481 -0.015641064871332471115 0.1855597228637688445 -0.95284951290877994978 -0.1646868275808702764 0.55972223557665468086;-0.94665761763314237864 0.42297176672995723257 0.80316637784775846143 -0.73145661099733549904 -0.33409953985226542583 -0.69991969369188655747 0.33987508874755428812 -0.28830345226913745016 -0.39777193710233432755 -0.43088140770166544202;-0.26996263049420665681 0.57477879814939802916 -0.92235845420779316584 0.94647911544528895433 -0.074397588541449302668 0.49788195354626640921 0.34772426186867982922 0.23474071392718398599 -0.40842926938051349328 0.98075096823705942839;0.39279455220472919708 -0.66055168986297119194 -0.88651607423074096914 0.41014144840369987088 -0.36768810473404089922 -0.062716404397176864216 -0.39349561034938373982 0.59543969748942593423 -0.48106130889565817954 -1.044147339237663008;0.44975583229968868482 -0.18633235698131916935 -0.23109253403513285718 0.7302888936906865025 -0.80361598074541107373 -1.0128012328670235043 0.97762062273884664521 -0.011776182369393766933 0.12048180601741034779 0.18408950901069254247;0.67511930226637251184 -0.25774674113189638414 0.22968143077333597057 -0.93197736217464866026 -0.57624110958667118521 0.89666666270550399176 0.70740630596771669758 0.5455120113078842925 0.22307817109779667919 0.37888711341808067878;-0.3672756367803527433 -0.99429103749608416241 -0.24940458707885190814 0.51731238579520910648 0.9320912050012807315 -0.35602322152289722634 -0.072604840662826491959 0.070488717275989695721 -0.47293653044752664849 -0.81065109638199128739;-0.72503560942285849578 -0.86529151155252204131 -0.036129785556696492055 0.8175147858454645533 0.76785041871387205159 0.3513924654993700325 0.77524824109939693972 0.065952802950902958412 -0.91758835794437465516 -0.0081867642364575748948;0.24266767751119011631 0.090865640839381020544 -0.56824653424492888032 -0.22901780342653926814 0.1600492001631652339 0.96969602487650374822 -0.86283778181595760515 0.8207392461112202886 0.39497231849291358774 -0.4712961613692709939;0.85822541989859979505 0.085023238427299349662 0.052610055898758459336 -0.80768706265718370751 -0.56373416895214223388 0.73543065765229587161 -0.58641550715163870411 0.50077446821963633727 -0.54206013842652800427 0.063601491243446620083;0.57151475859859324213 0.60027859500849523045 0.37597820216819249906 0.82550767950704884157 -0.74689293398362543996 -0.87244782801245523984 0.39330767942678146465 0.12792903072979636137 -0.42218935830662901454 0.74110696715017843061;0.67529918288172707808 -0.24821226861193299018 0.64231746702784142666 0.95861787883915527964 -0.36155401113048535322 -0.90477703633345485379 -0.32618583572641324242 0.15494945083627703619 -0.40631641741561141945 0.64930528342968985012;-0.78385053243229840803 -0.55762009986212535129 0.04157759055149235633 0.19741334599411680673 0.036824819604994007971 0.23202698352100831203 0.65684481243609227352 0.5947298406618279909 0.94543441619814883037 0.77916097482649571138;0.81650338835043734242 -0.76669939170644507698 -0.50618868511573622548 0.42478530459061958346 0.73535382974873320094 0.28747401267379507628 -0.0071689002969326787174 -0.16537219398096295042 0.94758739760133980923 0.56220786732206129432];

% Layer 4
b4 = [-0.26146617371808217323;0.92558995788359399448];
LW4_3 = [0.035595743411722488569 -0.31788445420927075036 -0.63419865031460154192 0.62179869450244651397 -0.75862009540848807099 0.10690241856890522754 0.2574856570690974289 0.0086601098307127477582 -0.53989278364902204554 -0.44805221736001249466 -0.8674860000005150118 0.17553845323261180189 0.65270583656508596171 0.6319994289093567863 -0.17473680606295463602 0.53600039577553759695 0.75342345855994841131 0.14704123952090711325 0.76626601194734145217 0.85201769379175029684;-0.20141291806835845413 0.89044453976347237578 0.12328271117823376424 -0.12810972752830834809 -0.63687564258717188626 -0.52449679317920194777 0.71814198007637808363 0.26383471414261283616 -0.014034195924996533539 0.10261853236972906522 -0.43984285694410746315 0.0052504194313601759703 0.41724288025835615246 0.31974443573674660168 0.71246597189787197468 -0.30685587307128758816 -0.22670343836434270202 -0.81080582046295723853 0.61749432326515996117 0.033038536984484848102];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.03350395435011;1.22444356361217];
y1_step1.xoffset = [-0.935164342218349;-0.633395004421358];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
