function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Dec-2024 12:39:43.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.33937173704159;1;1.06280946541617;1.28680884651708;1.01333396529071;1.09753168206265;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.0212236772668816798;1.8031732298686855565;1.6821270809393877865;-1.1330093443852473634;-0.94092651863212128927;-1.1150553845312640711;0.60232879927180538182;-0.04592520650576125546;-0.49125715758882160245;-0.077361453892592899062;0.15047998272015972177;-0.36505508712184298048;-0.50102380156604608974;0.71696164207755552766;-0.84382342571409441057;1.174993832951583661;-1.1450460558887951557;1.460794388882227679;-1.6711186805343798412;1.9393499762200532288];
IW1_1 = [0.81034490852306662045 -0.42219302036943462397 0.43096588782233219428 -0.46835612748918703518 0.055169379279763328117 0.76558621028295714694 -0.8347512062207922412 -0.91209342877728372123 -0.12223257036000850784;-0.67310966448844200549 0.62448439810836009478 0.64766975262356718535 0.95519843135036441861 0.65530569692549012206 -0.64465987628860965675 0.67978404435383621429 -0.49031347394883306734 0.061599503986933312749;-0.78196616738877688935 -0.58302002157512100577 0.47536558752796909122 1.0147389031173605911 -0.41141817822840542895 -0.41811841470873761795 0.26560911722333024887 -0.43773306599758965429 0.84064983714829466521;1.5564908748238375225 -0.99881575567724933951 0.79239561928217772113 0.61942598550046257255 1.1744018392269799378 -0.4627483021452830636 0.44972083183640054749 0.17804487973411256552 -0.059191956464091914636;1.0383832667300125774 -0.19776666373484122485 0.38685214457414263123 0.44774110786142257146 -0.86698156461697117869 0.076507373173088907836 -0.55476532092135166785 -0.54677532611471257873 -0.53907815898010491562;0.75412451208451358742 1.0606934749565473108 -0.21509693685132325047 -0.13775330374163799463 0.27349091456670010514 0.044313973940644305061 -0.86495074610266775572 -0.33919453200494287248 -0.7650582439113153832;-0.9726948142967214439 0.61210337942606862782 -1.0272078163705260501 0.72318593950865528441 0.60953032589965194799 0.22550462027709586299 0.90814245236426971442 0.30411016815944491576 0.30525020705101063578;0.70199389203790552028 0.68997877843220800642 -0.56925493452428865826 0.30472784777305927939 1.2090259253349016078 0.39674325370967550297 -0.60102446578432133784 0.79182923130786064814 -0.69617123523209289981;0.046808040334113829029 -0.38340345168393935582 -0.11254402122290620147 -0.0090479464091083438432 -0.55600407936460805036 1.1107723800171294126 0.66091335935787864919 -1.1557565322435201516 -0.38309614279132658821;-1.4028101410933713211 -0.68846834811953827593 0.30003545851885621287 0.41971966439951430283 0.15299562654865483946 0.22942808334244771395 -0.068357813876055120716 0.80104132701507391179 -0.10456981237974104226;0.71068619544627509299 -0.85892012836754083605 -0.10516468876868259597 -0.37326452094025697193 -0.76038404922991253976 -0.68724849732302972782 0.73574121614815601866 -0.48985896660826699911 0.11119555598134801822;-0.077779035260845633126 -0.83215081646224553502 -0.81662575364084100116 0.58274678802459134452 1.1419040976588830105 -0.28721570835737780802 -0.33138504640002464097 0.36919443451284517099 0.29679058338386737903;-0.69356172081805445018 0.7746089527368644756 0.19222298743269694565 -1.0575262589825353832 0.36539392708577811408 0.64728801034525518254 -0.20716737962962239461 -0.78836281683924303021 0.27808588726233846034;0.25747171916037542294 0.090525364367702948476 -0.19669944617704737677 0.45809100414781556143 0.45630814933374397313 -0.75719168617939547339 0.99047169738700924224 -1.1602736914008053848 -0.5195711287733357775;-0.66964013913600795025 -0.96900651865296039134 -0.81030364226435480646 -0.042226131211197004411 -0.82257312837980300912 0.59590018928135735088 0.66018091325948191628 0.72088039316656871147 0.3779318948071811457;0.94964521953450031777 0.56645255157734664131 0.60673878793710489532 -0.14876286558524598469 0.45213432589609553469 0.32061486859210802658 -1.146066732022610557 -0.51429082344346532807 0.23437955702899579413;-0.071693827301599483137 -0.41340366638675202227 -0.19987029674944198354 1.1313652971201406672 0.5503604897210905289 -1.2354829798444797451 -0.0089204127180558100835 0.27973715134942356286 0.77445844455102852422;0.14695645457400999256 0.030956847761393967849 -0.22222403228030379596 0.91848293757621712885 -0.20289588948179176908 -0.57437798171943665881 -1.1824438974074482633 -0.5304271710810333218 0.97621729832850578923;-1.1119472284168312459 0.93699321212245945123 -0.22901234777192783221 -0.72549700954319107371 0.06674183438460040696 0.5402611625163117326 0.00081292497262664374647 1.1352280994623829002 0.65684753667492246088;0.12465967054144495851 -0.75434653807776297363 0.95803998468708295722 0.51531628650515592938 -0.25461279328580044279 -0.85084720567394356294 1.0788811653698215931 0.34296539112429103024 -0.35397885978941096008];

% Layer 2
b2 = [-1.538544044917288689;1.2207779315110607321;-0.86258922144029170909;0.53735508575345525273;0.22140976109133003735;-0.15651664255038807982;-0.36624267210532757133;0.88634009295195759215;1.1662345774935987119;1.606526657153019233];
LW2_1 = [0.39071446126212755479 0.17972283258209215129 0.58957548386837754784 0.67531443322596329537 -0.21750932947362741632 0.21824088229490518076 0.45788193184406728031 -0.51172483941217172809 0.16185541559170271708 0.17551331065275413423 -0.37732064709195983765 -0.17905094366873927636 -0.069191341044704979257 -0.19181090927569560689 0.022080345209803883821 -0.35528070662046701278 0.423930936731377217 0.18920663948687571621 0.48646703792678952505 0.26041091080384332068;-0.57622291888027032947 -0.2050186780488947591 0.41490792072535115365 -0.41041534153937131446 -0.32444143386256463213 -0.50871742100526307073 -0.42060113951191707704 0.18053220158403632256 0.34802397309282723237 -0.45849308918464753981 -0.43245106588420040294 -0.42761296201000520423 0.24136219064320380001 0.35905806943242024598 0.10156509648015185632 -0.03429558223721940885 -0.039777854952513812259 0.24994178179729717448 -0.43708899047406080118 -0.2008782628895577349;0.41171587510191132164 0.46837133224970223244 0.1612528911129733622 0.43089642976806358243 -0.62589164658259888174 -0.037834650219364898693 -0.22989327539704176862 -0.02844477547151686575 0.0057657839563663958182 -0.41644262831233347377 0.56591280342109928636 -0.067371351272134533117 0.61786109389780496937 0.28324114945833117618 -0.098599484443971874281 -0.23153070761565336388 -0.62861464094836971839 0.15799084357603129791 0.48960565470024791646 -0.15818386097849679306;0.019050713622001044789 0.046144763146602638115 0.10229171718594540219 0.74603863371678147409 0.28765935438391648793 -0.52398523127007878841 -0.24892818392927690274 0.21157085444293619036 0.21552929097435494232 -0.21054469044460255578 0.31051699384235637025 0.61485510334655879561 -0.053754753288904895403 0.13179201652328942362 -0.058432001340769548769 0.16007292859363947413 0.56674670233334190073 -0.27082284868108785769 -0.21762115661522141163 -0.48570854690932652176;-0.30431660195610110708 0.21840075890494414779 -0.050715344245920133959 -0.22076330439739802469 -0.048179089241000484789 0.0062376138741469296795 0.29380285521133997495 0.54194663459029224217 0.037890677556706338358 -0.21944271725877170787 0.39031678859989593633 -0.25424835228909226092 -0.26978663476518732756 0.44862684426532090098 0.50584579394682216424 0.034429102752117600461 0.26715382029590134527 -0.82337426549143999388 0.69950064083050600416 0.11007748760534416532;-0.65476926039544547375 -0.15246255437128841681 0.091388293741658577218 -0.0020045729118783571499 -0.33679256794766276872 -0.21379660339652359347 -0.1157458535783803949 -0.080701414351345590603 0.42000222688502075741 -0.05735546637500410494 -0.026225645832799408114 0.65559962760445478214 0.29514420131379015544 -0.39201916475247344795 0.066731438376428753312 -0.080319554226615352821 -0.42210689869795242624 -0.042422520732675453314 -0.13874546734415979521 0.65460997065908343995;-0.47895801992597897279 -0.56300166679410978965 -0.60772397635285568818 0.60206169528112518652 -0.061860210267050984301 -0.11877666899034683423 -0.26142477283836107471 0.33936245075801291238 -0.058842846901991534281 -0.63858840386684756485 0.0020055826333244359747 0.38278908086008478495 -0.042797225924350382198 0.077292430983713064641 0.0458009409267691181 0.3755470684738894116 -0.28097860509292477138 -0.031193242054693245957 -0.17069116239526571643 -0.39050191381067461682;0.13529884771053099501 0.77300234345391904967 0.092373567529399236431 0.18484391687279930205 -0.30320472569287831854 -0.42910622498904821276 0.15703273993360120087 0.61686453208601554898 -0.29430673630749515368 0.54566990252585267918 -0.25327005878686292828 -0.54748445133626155723 0.076947662135674055328 0.041986687699648611583 0.11803000542764911784 0.34538558674741409726 0.26539919110474907704 -0.51508514110670466923 0.11624289647156392513 0.16003668889591068925;-0.18958130731401415248 -0.11844161423374893749 -0.57254758291319085561 -0.72305830900798362393 -0.17846031181602647897 -0.34026115474452928167 0.15415210090123740438 -0.51362342028658092286 -0.61888837131644258704 0.22869359575586276079 0.043134564403713715475 -0.37291598094973721356 -0.62132003926377132874 0.018419025176860864823 -0.47223822095713896552 -0.50598388712776265486 -0.059036459660800788551 0.00038621874400135078331 0.34772091112728836793 0.26705120961030565097;0.21504586642273948449 -0.26047937045476315943 -0.019547517124965906044 -0.37132753084541503252 0.64570215929315422088 0.3114902176170571968 -0.070630983230929658689 0.31174112895739714002 0.45790330487232355772 -0.099596877699849692411 -0.32312691648614044748 -0.029647186200892058916 -0.34844351413929236516 0.66000044775346000669 0.36032261954559102746 0.25540877151564894687 -0.33310435466500115664 0.56835665386492206785 -0.10103995118951157595 -0.28196667140050080125];

% Layer 3
b3 = [-1.8765493044589580673;1.6649664962984860317;-1.5033728495209421894;1.3829054813785437439;-1.0377838936384642388;1.0682786701331403734;0.67887384433932529415;0.64798032998378130021;-0.32859384439720434878;-0.19305820884364982559;0.15237450361214976979;0.4027622325737058584;0.44693814668669490375;-0.81227154813542701284;-0.91360356757428373697;-1.014805278019875967;1.378229557034196251;-1.5406098377963379775;-1.711960568681569983;1.8866133314344897265];
LW3_2 = [0.58905970460832723923 -0.61195144599983453126 -0.89679722538155703937 0.025071880407018857367 0.542109070807049509 -0.45766132338455123296 -0.88964108563973343102 0.82505931666123066837 0.49515778709455310347 0.14488753336186221965;-0.99446725162736626658 -1.092182156275847138 0.76340952288956143157 0.32163908613730568531 0.58466133889138471869 0.11737666111283083514 -0.11270903561973205642 -0.55527801297859058494 -0.094827023267254118011 0.092731761912545049298;0.070210255495295553763 0.57834839478285371417 0.77397741627826144306 0.12926554465116923964 -0.49818621941372936979 -1.0431894636290302003 1.069973364701163554 0.21397915356501504003 -0.087312567305785404592 0.020205821069167448356;-1.1243661510875597731 -0.3762237052236854784 -0.031339213480703079218 -0.13864228185288413053 0.92134365976260945708 -0.15466679208164210713 0.68970875460901048815 -0.56255842810148337652 0.3017239845831395928 -0.37227174372488797127;0.080648963661365632993 0.94184338522069455113 -0.54152218175243893583 0.22650851654391773726 -0.50365247608508223465 -0.83146046699968467752 0.038529422361951615184 0.71699496478592394944 -0.90604689221775047692 -0.51927650565628913348;-1.0692596402493987906 -0.40222131814912520653 0.1017529762743387689 -0.8674459508709546629 -0.6573559364541975425 -0.5647628945387248578 0.23635033196894272844 0.19899003723497532548 -0.035903658675512845067 0.68884232990543137198;-0.5263560772259154863 0.79912639450004696595 -0.70357055914880761716 0.78866150944245805299 -0.23256911268256694192 -0.81935278094484265132 0.36199794156727582717 0.65268485269744969113 0.2261095626192372865 0.3935394040999614651;-0.22665796424053527569 -0.095779583393621456344 -0.30224742144406679945 -0.49093121994427441068 0.82585992472268077158 0.89176336183384830036 0.061879415739378190731 -0.13706472895335364282 -0.90324040857091980605 -0.53504083041063477122;0.74354018199218130381 0.34370999589045397871 0.94785657066643580482 0.72580185944569164391 0.37525755553724610136 -0.64404900485595917292 0.5495793696684434515 -0.23161933206350890369 -0.77780325729044252903 -0.13301317116111971428;0.67344907811572118916 -0.27495550605293384017 0.43550273846396092559 0.63210509289690108847 0.25046288459148663419 0.35379931488015237129 0.46809268159943973053 -1.1356452445931579653 0.92173345139275908444 0.25799392502551282691;0.15910018504116971161 -0.46315662111522321043 0.98527615746559349397 -0.70883592264850847631 -0.82756655846830329271 0.061604972364273716257 0.40632405052853376448 0.26430210413231652877 -0.87252364448986952095 0.83550683411869453021;0.60450881804746547932 -0.14160576291904347634 0.067214726909230221308 1.0827276943466610515 0.066078485694761351921 0.75743558223357032588 0.21090317413231263188 -0.92786878680473572345 -0.58075017233035586273 -0.19514058184933996687;0.28025437179089229822 0.77479327302287492873 0.60107691402962359906 -0.066581641854136494607 0.38159300228168424596 0.045291077865824425075 -0.94743089353349330128 -0.93401222426143326594 -0.66221148642984251076 0.53785181129298942349;-0.35117483022610324062 0.21069156688093654273 0.63772337908531906425 -0.18445758476568741013 -0.60737297092671649335 -0.011846673755034977521 1.0330571569361122197 -0.51076539564794898318 -0.62401152789668656862 0.65683193596566180616;-0.53762465098036738009 0.4495098499376586898 -0.044574592744802389588 0.11274337000166564926 0.73057921135524694911 0.56222945663593493215 0.53214380238725256245 0.90678734451701503705 0.52413004924744366342 -0.91748525499075128664;-0.80019648306655000169 -0.11927961371763666498 0.54689036983602112851 -1.0004216664066605258 -0.96877513951559779404 -0.41072728441681199962 0.1981193312291398001 -0.33022077883763611972 0.77042989589745392021 -0.30534644661872284432;0.41986799925179646431 -0.16387754202380178103 -0.69870207310333964923 0.97666079644506975654 0.28755934706750174712 0.37831063344554993755 -0.14206953395168023246 -0.57561597220849647361 0.87326686993787705493 -0.41720833463308182321;-0.57694512808884956812 0.2187166436148690607 -0.36813006972155987162 -0.73606806535366708921 -0.19048944844799395315 -0.61799096047550494681 -0.88310012338705035084 -0.51128779905955057394 0.77018676773593797158 0.42556593224754346583;-0.10569976738353152601 -0.63817381748980916978 0.42236568669539065191 -0.4993231263538596143 -0.28919429469307411651 -0.21919022348388653154 0.19422262845329846259 -0.60005410730446373524 -0.99492857155882197251 1.0812952170496907822;0.30799592681474402545 0.81349718590491004733 0.6652864340296118506 0.63805119773797935867 0.75574371472948653761 0.68733585924930851174 0.20907442505565643209 -0.52593458603529386064 0.745778092750659094 0.24507706845193272249];

% Layer 4
b4 = [0.25745175795981106726;0.070325140258797991244];
LW4_3 = [0.82651482628195127589 0.208166369943637658 -0.59826179750081864839 0.11365980076986724467 -0.090415920530565255242 0.3120559060838060117 0.00098721747097207110735 -0.46452722153274100814 0.8417712538697299518 0.017562167469925858698 -0.092666077984709188664 -0.12924734718192257277 0.31231426916582311071 -0.54542460915989721126 0.11416089979769168672 -0.49237721451941285356 -0.63670238762283659639 0.6873235644847850434 0.84276180942624889791 0.192381883899921724;0.41910652879898235845 -0.22799247334230940409 -0.22371820531198813309 0.75475544365728441942 0.66556460057943089836 0.44108395406830563923 0.97705972085913683767 -0.42438370118507851014 0.77393357715259591956 -0.49873109783410346507 0.80615379666597120067 0.28992171520804005391 -0.063793505505608028017 -0.97643199628273846802 -0.34534076095550414465 -0.22337898186183574589 0.43322238924845890562 0.036159841179777725551 0.59649464423590325968 -0.76702343039071285702];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1.00183681199409];
y1_step1.xoffset = [-0.999999999999798;-0.996333111396797];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
