function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Dec-2024 12:39:42.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.801945638638892;-1;-0.881804843746703;-1;-0.973682979654431;-1;-0.871051952961493;-1;-0.96736142527888];
x1_step2.gain = [1.35943184961436;1;1.06280946541617;1.28680884651708;1.01333396529071;1.09753168206265;1.25325738564118;1;1.01659002474164];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.8904694181405858888;-1.5842100425143130771;-1.3225317020606184304;1.1931679685453100426;1.3494598049087931368;1.5825983980188598199;0.8937481767878204808;-0.58701542491976055338;0.19175538639049993783;0.0079708161523347337285;0.30734339455915488104;0.43850733278593095887;-0.58836533525905165831;-0.56189167132513706537;1.2409542386436387407;-1.2496146329312145529;-1.2053868402122498438;1.3580366383558293286;1.7825112837718228853;1.9602243185384318203];
IW1_1 = [-0.64223373286849816388 -1.0448022800445908587 0.22636824708935157635 -0.21240588671811030941 1.1173862839375141576 -0.24878187633348816665 -0.2116720797502684992 0.39646314477635280493 0.58605626708166269623;0.89374349129984542728 -0.75140134753890364117 -0.85242318005201200837 -0.43863800458830221052 0.31855663837126263482 -0.98305875355135041715 -0.16988226610271825456 0.90409587637397237359 -0.62011464704262808656;1.1140635135000693801 -0.71808142352429826794 0.81625758669975478909 -0.9821176008230284582 0.34525386233022420379 0.2508270577303977622 -0.61969455763313407992 -0.3463978320784715792 0.6267249999467502386;-0.55573226560285016173 -0.85658086008817913015 0.51663900441758681126 -0.31728881579516104994 -0.67746552961110173552 1.3013823426432373775 0.37865639770360487448 0.24793319578073724774 0.46984884479161093118;-1.703369355124162432 0.87293875943460974565 0.29487287931150552023 -0.2024759290323975558 -1.3055752933229218815 -0.27438859314177760362 -0.11176303453964030188 -0.012183996917547901262 -0.075976130422829538102;-0.77002587816939493948 0.14656776194475640285 -0.24645409487331920717 1.5486818212375281778 0.50015686825052685371 0.48532110857816651572 -0.048312919101953566425 0.25514279428393771276 0.33996475803957010298;-0.66646948421357332659 -0.53162639346403550711 0.37869477261142958646 1.7591928171709394491 0.11757027520118376596 -0.13265506320095168946 0.71006561120372668761 0.2818360337483365452 0.22860198224980216031;0.16600209754778363913 0.62082050763098939328 0.25573112758293459201 -0.18034983438237695008 1.2694316429883967245 -0.82433226963973038615 -0.49685222493864028559 -0.046782053906340603788 0.63675505432426438013;-1.0820663889290513815 0.13493087531705663662 0.40662912539177714644 1.1032653205945877062 0.30866487371018075381 -0.77611380280603192716 -0.87644185699288812419 0.084839898997364673883 -0.36239879668084912234;-0.69012791670986395332 -1.0215878138407135101 -0.63421346125254784987 0.52313711313534316805 0.29350291822924956531 -0.79100876979066869765 -0.69392915047040470977 -0.1692144283508506819 -0.42974533978718409966;1.1260906152202261321 0.20105238077257822638 -0.37375412960759296643 -0.87615702416158380839 0.43875579228182226554 0.18440303427857909768 0.38693350288058953046 -0.89346668495969516766 0.40712007273902733884;0.69647582586019918249 0.66286907299107378222 0.64847314833864289074 0.28238252048334344657 0.81996279557538054306 -0.12464253892034307669 -0.69353114760994116761 0.29876785393585419959 0.083893538541281897913;-0.30223965611161124345 -0.57638214318797842406 1.4371557092442837078 -0.0033654074319132629145 -0.25202053714557026698 0.63434881684343835673 0.20372329406728531542 -0.33336917434957591411 -0.46063387961123714032;-0.70692776420922176506 -0.43477639235228415782 0.52810906989886152729 -0.92946667281940087424 -0.094925977624650992315 -0.59369602271338106636 -0.24853132923483994832 0.99813159914925786431 -0.69652384633228558997;-0.089219738172930107556 -0.71974487640340090167 0.78409325146306485532 -1.3785841318413654122 0.25126997216934543466 0.52651189373528017867 0.32382391389086201405 0.32907200117608204071 -0.17173741747066412211;-0.31437465470388248345 0.91325614541168642635 -0.48846019260997491918 0.58929481763969293606 0.96368718599176061979 -0.56882806304107613737 -0.2800946290430536556 -0.38467465906933195896 -0.74834251157477893468;-0.25544751179521218987 0.49594534498720949101 0.92512032172085467696 0.1389283425638973557 1.1235906179462094023 0.79363953554761024201 -0.73382136476873294217 -0.15168390233039322212 -0.20384987638247195618;0.88715035409966902513 -0.41199716746461717554 -1.0849564874279356008 -0.73140151304912948138 0.36181062242837958021 -0.37073054262658783342 1.3602031068190665319 0.49529546408305230587 0.15852156557872199016;0.020022921835015097813 -0.78214684822571878264 -0.51075203667386515072 -0.22072272559991587548 0.9799488438487062858 -0.24470113956846611947 -1.3251899088289276207 -0.12132363958154882 -0.066380936675868362773;0.42382938159851468729 0.82855756749414954943 -0.23192052943907209839 0.14840251059583653426 1.2577666362663018074 -0.67061645951057191617 -0.52931450412421376939 0.91569210464429962038 -0.17616016480213755879];

% Layer 2
b2 = [-1.6593872476357554024;-1.4908229289371861537;-0.86237096364274556937;0.45316142645165791158;0.25905193488611283348;0.33648401504146557839;0.66007620324117821653;0.83133422688465652417;1.2189055432374500398;1.6615031449214276993];
LW2_1 = [0.34029052355222882964 0.098950065977441756249 -0.49951820812017244666 -0.39751408937670923427 -0.21317137674075442577 0.086233490709420254627 0.6049837137648989005 -0.30702069584641200617 0.41568885344157219253 -0.54829017447496530835 -0.039336085736717520123 -0.62492822986728302492 -0.21104242803522016425 -0.17467081796241429315 0.35148414446811460099 0.03524509348208923476 -0.35421385706986763253 -0.29056217236001258275 -0.35159693698902572123 -0.19972519107849107112;0.27018043495538213161 -0.13336828752383814156 -0.57107606441078695436 0.29895834039040769525 0.69870834275684312598 0.29830388549784281338 -0.31289877146578010114 0.39388908196214789115 -0.014778206156137297864 -0.032850932282663773687 -0.089302202619755327584 -0.043116262300516676464 0.19000446054972014442 0.028433806368586205665 -0.026481817148093285408 0.40560234344815221386 -0.044856201804233684916 0.45936584285049736343 0.13037626038648408855 -0.22775382148684922279;0.044207515671152920744 0.20430417375717405126 -0.062387425767572876611 -0.47374278439318789902 0.056386931626219924385 -0.19233290546546297217 0.58285928285318200359 -0.39956798032300366863 -0.011515194260062588949 -0.50863630493417932854 -0.20718231325549035793 0.55086120646186242933 0.65308890883822390272 -0.11004811659649434141 0.60183859037694331651 -0.53069758252265697429 0.12035789415227671206 -0.04483115431372474563 0.23060675130126195853 0.13708612468218517311;-0.30894080266381762634 0.15580124116666638212 -0.37675365055860560171 -0.45822453874395491225 0.29014605879629529195 0.31980801274653963828 -0.19059322439534451266 0.059252998730087783064 -0.54318426177416267997 -0.092693823850026779709 -0.14459716242298675803 0.18422000289174814136 -0.3518184172895440498 0.085528702184956659216 -0.23574504212448374463 -0.45731158715566971873 0.27911135444158591268 0.44277711342367470637 -0.61204748572287903663 0.6667072416517280109;-0.22879139734877046441 -0.72762632193492848831 -0.21967734473509914483 -0.083235515505357987598 0.64497269721209637972 -0.15656828263721331296 0.2961716541885980325 -0.26083268975947832002 0.43827093739746170176 0.28718929412936933243 -0.55225761033718667736 0.34082249213530807497 0.11041060903358722312 -0.49564982973969284874 -0.23719647119279341219 0.19796998005847685209 -0.017703521123226966666 0.17155467960385312187 0.65170062878185974764 -0.53208177637492515277;0.47490733192283463016 0.30664772118863042882 -0.1758791414905210293 -0.037438458988850641107 -0.52010212599092431329 -0.5765269631828987551 -0.13412046902956062389 0.39832263390311484219 -0.19335042140971625546 0.47865775235573854163 0.29747707947223511749 0.070998607161765897589 0.21450693722697825039 -0.0026413913901599545692 0.95949579217122971109 0.40519297180656205226 0.13866813532850180701 -0.18264175046159891735 -0.24657399407172039818 -0.16346147618681500235;0.085809186905515713595 -0.13039534050781939611 0.16799052220359220189 0.18139052219977663816 -0.15415749477014623059 -0.10837575114364754458 0.14268499057655309459 0.55748186281538314457 0.65666088408333278537 -0.18586967647536584147 -0.19450612480038154128 -0.39945110389561883091 -0.062932106884481531228 -0.25717831175030037016 -0.099362125232536749331 -0.0038760527620513279129 -0.34739099609184453943 -0.72755204544007190393 0.34116249103512702456 -0.41964339968559377647;0.1988471949962544727 -0.42771322219816665378 0.18381911791501043263 0.40580039590415728501 -0.31028623579272995858 0.50877596167020455731 0.51901272099566986284 -0.38900344492411131903 -0.23444814258314539135 0.52267016245295994104 -0.41673185106838112057 0.32216030007463425378 -0.37928883001526542129 -0.57836034885249887338 -0.0883230591857440267 -0.34166756991889207784 -0.16865321307590100397 -0.018628169021237477032 -0.29680526961621611637 -0.41988751596144940903;0.471657258656586309 0.28200526908207962373 0.29376501507598296037 -0.46113690700201986905 -0.39168340577281401949 -0.24834130102286247621 -0.46143151103409957292 -0.45471234506302471434 -0.39178325888919202091 0.28933020260200803531 0.018675614152002417701 -0.52649218418261989338 -0.58727236225194701102 0.17600647141131081641 -0.14481153655547782111 -0.46862588956242706706 -0.15552241211808442989 -0.42416596863646399695 0.054119038987018905362 -0.35142589636231358341;0.31652968002653641966 0.38718094924837725967 -0.17531574021348930725 -0.26425723132972273044 -0.25206656773499008795 0.2985822618807145723 0.57175446882205838151 -0.37664751903879339912 0.1920652297199027525 -0.15021526384763866924 -0.31598190107614471112 -0.15360451895522952981 0.39584169449260941942 0.43439207070726332249 0.44077559857573211932 -0.22967607586539670605 -0.59408324421635050339 -0.26620409703566583204 -0.3942643320882324165 0.27001749886269588163];

% Layer 3
b3 = [1.9573501262973573844;-1.6833562946386684267;1.4825768409491715261;-1.152369808749788449;-1.039149521515845942;0.78414074338882044923;-0.80835312067519093926;0.50446728866029366678;0.54475149040018111535;-0.15763296764922096749;0.044968425757936622555;0.24960391481710095252;-0.49021481271180905592;0.89677493251554285525;-1.0943968387182316793;-1.2927858277716244295;-1.504944881394473466;1.3993696668064843358;-1.679009738064172419;-1.8219083054684621636];
LW3_2 = [-0.48297795820471600692 -0.27850594104932269168 0.49465456913121019777 -0.83010531103842133405 -0.38600036630686090922 -0.28739123067497962527 -0.77925074222132861834 -0.76930015719974476074 0.18591182430172337181 0.63847036778614441044;0.44930641659670850219 0.38803649366723169667 -0.57007159473690616203 -0.55687154255886794907 -0.83693763111205310423 -0.021192139380373543889 1.0400674657525710298 -0.44773311839507273779 0.57874219609691601729 -0.51171360959628564569;-0.34869298291832534487 -0.67532006326956472986 0.14022811307828239591 0.0019256083961297426003 -0.089156241497695867815 0.49774716122519824246 -0.22342718489122231906 1.0240792387667503327 -0.94005750235455254327 -0.7890893522188106024;0.9916589908784899654 -0.84292583476144922194 -0.14892302164137005693 0.11564428894188780172 -0.55746643814951013507 -0.81272353312933520719 -0.44877497424841916729 0.66937324631450012546 -0.73245490911535737766 0.46921004047910930268;0.93927023344677562644 -0.56587058877496854148 -0.75978440671483393754 0.28189652982952917437 0.51424388021400313509 0.089987885424134300694 -0.46848987688294174703 0.43325879581900467175 -0.84277511108207669999 -0.12644523577742627918;-0.49727061096245667171 0.61734097773307083923 -0.56200054233451446351 0.79473251643557385471 0.50356386463199398484 -0.40310064967238884437 -0.78223585286079577727 -0.99644930926266572779 0.44256143537397857335 -0.63540532059993004577;0.47935054079280309258 0.97108550954918593234 0.66805775239813725008 0.15387770148927593095 0.011477929875390738626 0.97843672765488443055 -0.33662960321415391629 0.20618327287754409372 0.88119010841752098973 -0.2851399589294992265;-0.30467490658269558157 0.43345111554937165721 0.38021945928466893694 -0.76452701179771587192 0.84811262385920138662 0.83802603354625437859 1.0821868538935275339 0.014699101195022903216 -0.15061562997296454314 0.15857053524251402132;-1.1186062993695742307 -0.60877743564925090869 0.61442676504067017529 -0.20328976784723326587 0.7454597235169089231 0.70176616455881424272 -0.55265978144606797695 0.42677128519803381179 1.0155731456770664689 0.56131736742277560381;0.8851550601351184655 1.0026254370775768976 0.11749085065668879446 0.66614819664659086218 -0.44660955398679341721 -0.38585515995764546604 -0.47202277704393202917 -0.18860324195973812711 0.37942278916762178786 -0.54958263033467158465;0.25163669184049286542 -0.15940811898530976576 -0.27924487859946089952 0.1925097098848470023 0.13484273580115671565 0.26590061155364108636 0.97317297584992878967 1.0866359575034587603 -0.23018142766547700084 -0.85605933249103605132;0.062301943724343063213 0.96816384548863676507 -0.20969167710839944907 -0.89238833743373568996 -0.80370780453029722068 -0.69377196388879891487 -0.20210242411107703919 0.5938997422447002128 -0.53249172186892479441 0.45677421592606420875;-0.43766517132019117087 0.48730844133724765532 -0.86375929674573614925 0.68867482805459134809 -0.69032047696745435506 0.050802920177584004469 -0.57633502156345817191 0.012490608656993397452 -0.92122076785688000733 -0.67939283733775446272;0.27099911131165954625 0.33122361037087744151 0.032203933888528393781 -0.24157977755157555855 0.97680935301331084375 0.45863961411565074 0.95520155103972037569 -0.2579044309365328691 1.0495972709483905039 0.49332610895502038151;-0.5242782831335615068 -0.39812107446247491094 0.99579400740127532732 -0.59400493438109625011 0.22848058076892327484 -0.75594601555578111451 0.11651844356804363922 -1.0984198343864872705 0.10359109475413683099 0.75089118883837280283;-0.63617097033306124754 -0.033220735555592073585 -0.21622579266218680538 -0.27696433221140837055 -0.59266955227042095178 -0.98282344589595938 -1.101591723461024408 -0.12651604773084346167 0.27930744691048453587 -0.3938694265358252955;-0.60502218285982489743 0.13408489556245148377 -0.15096057931534004326 0.81477524478371321504 0.76034038124112057755 0.05303757424277026622 -0.13377407433531027237 0.55626080577423164808 0.61902810673210251213 0.056305933483338135859;0.70993599080912039856 -0.85209026459652936758 -0.50519273790588770101 0.03172429902525432388 -0.96631889887972555186 0.80157217434017147273 0.30425206298881996014 0.41169111388237977778 0.2310194168505096679 0.56511834390440340847;-0.41525663038303722852 -1.0309294889255391503 0.28924946704858306434 0.50871806091096205549 -0.18389508379747940281 0.046624565728640710027 -0.94309026119266214927 -0.96732370440890602659 -0.072280594835332917514 -0.48180613014563544727;-0.016221766175053331516 -0.60028369679056414743 1.0906798497689493832 0.6207151334744276383 -0.56946750999196638077 0.66928634050557656021 -0.033045108576176970838 -0.11629593427869906741 0.17555945384997501124 0.86170356172460893518];

% Layer 4
b4 = [-0.12086162173968112432;0.66737744275679666828];
LW4_3 = [0.27513084952391769766 -0.66028417516767756723 0.40869602985730596467 -0.30166718891734434216 -0.39372624617337792507 0.47868326280682893525 1.1092383778063750199 -0.22309038899711289283 -1.1792951522658461361 0.14936598091704736402 -0.10503289550102508365 0.82305769493340930065 -0.58398319576986179591 -0.12051433258904105383 0.17314752394375049205 0.36963002321817767237 0.13778721599631088557 -0.54964616743627636719 -0.40881571525610799211 -0.77256739274914276727;-0.18942602744550121607 0.22615705407136485472 0.40018196747822809556 -0.57774844240066935974 0.56203263576298101434 0.58855145007090592379 0.30379895098520404151 0.00011203740037496121018 -0.17234705417533274785 -0.26981862099621067852 0.7825138562200202319 -0.097374718931845002934 -0.61347852284340120832 -0.53950773080404124116 0.95270751022147903697 -0.85215186718105317976 0.043584297948316197413 0.092518150567147100505 1.2569182712607283037 -0.074744050700088451866];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.0000000000001;1.00183681199409];
y1_step1.xoffset = [-0.999999999999798;-0.996333111396797];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
