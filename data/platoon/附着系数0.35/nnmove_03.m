function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 19:22:26.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.66753377599542;-0.793896915782542;-0.849546541832425;-0.772196103199087;-0.935602688969272;-0.796541238519968;-0.976641177656369;-0.7138864470187;-1];
x1_step2.gain = [1.20888760184305;1.18459563821743;1.09063344261714;1.17445179286727;1.03326990161654;1.11325025950846;1.07203499704488;1.47164000920612;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.1799336732000442751;1.8220280985282255592;1.6452899949240060717;-1.451553835551921301;1.1051958914110511234;-0.95351315261322378003;-0.42944819616174401133;-0.53428595818821755792;0.21088343112511356847;0.71743047602285070496;-0.19372976908686745379;0.22708772116206421554;0.42503556373659440171;-0.82379219747482013148;0.66225994047282421562;1.1593174425051189225;1.2893479151882794032;1.668411103914588578;-1.6284770507913142179;-1.9978352341748686349];
IW1_1 = [0.86658595470830723784 0.98251517069370863933 -0.44831376328060468239 0.10587648713932186484 0.16021050662442584689 0.10429143213137623269 -0.23121700144826792811 0.20896881481243742562 1.0980992659052162264;-1.0344665044692016309 0.6123878140662949443 0.376371265237201158 -0.6930141630718072987 0.0437025079024648197 0.24526189736124995311 -0.33845279497360997167 1.0559636463732966494 -0.84697389345743379074;-0.53733750524080370337 0.48809717923150935937 -0.77875766325530459966 -0.50761678824886802275 0.95957969431277811978 -0.50661583165645696081 -0.67724030889112718512 0.91327820478161370055 -0.13397229745809974277;0.38494835501242730125 -0.97487798466045050283 -0.78270615092523210254 0.75959284002373772537 -0.79889440900589780981 0.2089701351111892258 -0.52938106535710249823 0.38051812347558683358 0.48124736746477625449;-0.78928832165696005685 -0.38751833191002826862 -1.3413365826271244075 -0.94210141418192783203 -0.34240304907818813751 0.083547904012971255239 0.34884456820568277013 -0.20193582174744018065 0.48922264533077847171;0.69687054431780393049 -0.35906609946636808273 0.96795222037981121233 0.15491897500986842595 0.49222651264193795217 0.15525366215658731317 -0.74892646894572001415 -1.0699277849058097534 -0.73742479410726813338;0.98261275731223252095 0.20263204270192833323 -0.17901400111802301396 0.50699653757372531437 -0.12818291172949256018 -1.0079052736752254216 -1.3713039387989767182 -0.1759352412321376069 0.70188832048621641047;0.79704222275839742284 -0.81490858085997208704 -0.50512864894250764092 -0.46286953591096335892 0.43206453821550355743 1.0534288765970061252 0.28495645545821829403 -0.16211661484149134105 -0.36049033544192338185;-0.67577998672432038063 -0.90277079577451313508 0.85007742386210238816 0.08082601239587181019 -0.61733665517154501234 -0.30004757947490046099 0.084005735180410781582 -0.62342408163892559791 -0.7699860917964810314;-0.69689106743602735605 0.32635124188143527224 1.1858460641339776398 0.27660818140608001148 -1.1734870788223530358 -0.82836145783552739275 -0.46943059245895651932 0.13876372085657120992 -0.13564287041483988339;-1.0387101749375926563 0.21184937628636180129 -1.0746940812693681622 -0.4327195498435532639 -1.0238440106549644426 0.40905777314348301665 0.02031578791181915325 -0.57737387556370445285 0.0025433487063159301855;0.59385249353810865003 -0.32113533043585440474 0.47321828100810575668 0.70676177895469216583 -0.74651101822633236793 -1.0329818370204548739 -0.071062135083882482789 0.81374480663605686104 -0.72605232436342570512;0.49621870263336947948 0.92391326517617189396 0.19825978175307534812 1.0473004309653572985 0.38549023591935160926 0.94252089439534481041 -0.39523840507477847606 0.19958812508616732839 0.83364756426451391835;-0.82840686397686003062 -0.91934624414108923052 0.31534115729232692349 -0.16593509015003540807 -0.56400458095211003506 -0.78742284910536874953 0.013346198917954936111 0.69847201978951589663 0.61577319861247936661;1.0378529292763214453 -0.14381114328295818705 -0.55050228359779307397 0.2084560147399721064 -0.40079644983938411684 -0.68349243368213774552 0.96412971510617340165 -1.0368734063782305554 0.4838806666839795545;0.56741621615082415975 -0.16153628925173679765 -0.69725848281797819794 -0.87917419627631021584 1.0383897924157221571 -0.65170462260958372802 0.61328577648738302752 0.18582747895908013902 -0.54355491648777654046;0.54627156456748116042 0.7049735134496465383 -0.19157484479418651624 -0.76785967617168704447 0.83428898608465751341 -0.76652862970206847582 1.0300641583032639215 0.17041529085504078522 0.49143445096889099011;0.91959323972407913672 -0.62011201477311905794 0.075773491895188144207 0.95328431406195168751 0.73977699717376965705 -0.38522896500881237403 -0.27728391921350370453 0.10486235906386513761 0.58320484868013688917;-0.63774976789937098953 -1.0834897095378157594 -0.70583113166032607211 -0.86629759431509378853 -0.20950948968793012273 0.13077640233939011316 0.64639315525195673029 0.85361728994728836017 0.33666799445179113048;-0.64279138263994906044 0.085855817143813975556 -0.89214101851415894551 -0.29523019833507724297 -0.12883840091530632255 1.109673442209040406 -0.67148277718683824222 0.62584489631576323276 -0.51863220826964884225];

% Layer 2
b2 = [1.669097045636055876;1.3186795704008620334;-0.90440466727484958298;-0.41072749270217295825;0.094404450580553453398;0.33333034186033128066;0.48541445150682493992;-0.91009003950633293734;1.2046614043371668412;1.6666253783683466771];
LW2_1 = [-0.51485237509587655769 0.50850542231443507379 0.066979658225921223647 0.072279666924017105245 -0.03057334660385084904 0.3830899497226665229 -0.030103880791467134415 0.23464505165728674618 -0.46104124903042664751 -0.36128145882405304778 0.62737185378464843666 0.71659335129250845142 0.14537194669256775503 -0.28572710698155884268 0.13271295203719160605 0.0055167756429016969605 -0.31199373818150594184 0.28469155862238981758 -0.25209472222722034696 0.35381848891216716169;-0.37439146906777320822 -0.11195518861192675641 0.40497048380386341249 -0.28201655493243910078 0.44995203400967148655 0.43869908906890248135 0.22218227986187991108 0.41718357805507383373 0.52058392978652001659 -0.45179896342758824046 -0.53828396000383260667 0.095032129867666362277 0.39105694951029201789 -0.11848376671277749406 -0.25566814455820152663 -0.13263368478023931929 -0.29772851536490707591 0.57202081234441415347 -0.25820195230005610343 -0.16224416404163732874;0.1658994155783985458 -0.2637753956531926347 -0.050703514194489165967 0.52610573174740493663 -0.13524740946706326206 0.31008935916660756993 -0.70028588239774058888 0.33529861753039547079 0.48436352699754114948 0.27935624345180815054 0.47829827919302464467 0.03086936357185299587 -0.34401494078314942549 -0.60712608826226266423 -0.24675513882395352927 0.43457505129467788318 0.52137398585757421809 -0.2343485221146310582 0.20963754995101283041 0.33353024723044122357;-0.2936441817640965124 0.2508055490402717469 -0.29516553585239130308 -0.34910610821192916697 0.36139009705421454299 0.20483460252658650114 0.59948673148177200609 0.656699011530480381 0.043873219973912767899 -0.92152623595516269805 -0.65230530684407117548 0.34640320284152770203 -0.17641645535994412985 0.23111909368856989322 0.22028940282868855749 -0.20741033343494857943 0.4193042831398818282 -0.23602762005036140303 -0.26248500415087250293 0.06563866306198917755;0.076084192793110350106 0.26033192399564875075 0.55174229631770477233 -0.33058487693777743877 -0.34516088939696454307 -0.65401146373700635994 -0.36965838597701394797 -0.20929571463466020709 -0.68115646290481146607 0.27104546385611738568 -0.10381601636714178627 0.49413279941659260519 -0.21023632326514318791 0.40726709359483492801 -0.21640629355658316801 0.35759308839845949102 0.32863826005047364065 -0.17888561204410172167 -0.17517525616728407689 -0.36591128795632238413;0.23513529748903530536 -0.25537763303203497856 0.18752435900857997164 -0.057588047314376847319 -0.53677756072476012772 0.065692803386605963523 0.20907955098315045284 -0.35835898872608529242 0.54783823784775642629 0.40419071816774665429 0.26284849302713997332 -0.35004817907147262046 0.29915055632792669771 0.06997847019952047054 -0.41144855790189210909 -0.050233396917567174622 -0.4876711736273474096 0.715713828868552282 0.041729557126842842241 0.32922665889266550243;0.52069645853635315724 0.36346983599545679144 0.13712420268015856895 -0.091661840004853292752 0.40022943649148540191 -0.78252920216064270065 0.35071379961127852054 0.22515408142842113781 0.13343405663340823786 -0.37384817264666447834 0.27736035493854460654 0.046544131505944275062 -0.27708308525283709134 -0.084083588343153867206 0.30448452327614844437 -0.49379391384809562249 0.166183240188203879 -0.4756405952455245445 -0.33130044898469795944 -0.31421085702503487314;-0.13090919100498371597 -0.39457963019017622264 -0.88356844785789223629 -0.3516971669392375266 0.35572420064651011362 0.064882717551735608064 0.71109670691260284947 -0.099221309401937740624 -0.021011358151028627916 0.28134321810682011433 0.3644127855670839522 0.39970016125540763774 -0.38172405705850653845 -0.16075113820074932169 -0.12270354055039961461 -0.10145339199271585784 0.47244782216686043164 -0.51872674126849604992 -0.35679465678445060339 -0.20605260729444721535;0.0055929262068185568724 0.18033631609701744614 0.35935438641154721084 -0.17188439707108785215 0.22838806759047169948 -0.62289707354905055059 0.099118779453564634374 -0.44903098149025294505 0.16554903325177788842 0.69363866525678496977 0.58190025260270372698 -0.31029726956752934353 0.29455878905699567349 0.38599996195958519163 1.0235712036016504367 0.23106752628879298483 -0.0086734456983350027848 -0.45341968870158372296 0.45024105512376405569 -0.44179352938987043187;0.31163383546299622262 -0.34418308834136218666 -0.044804602109281305156 -0.33132301620476262149 0.34636335275900964614 0.0063533874184528091322 -0.23440016205617447698 0.35074060688356983873 0.36061167939051702591 0.37881141533432716173 0.55430414019286666782 -0.27722525005907300288 0.37916725889746777378 -0.10283606983208523622 -0.42332434003009450363 -0.45915171028828738464 0.033448744506012005606 0.11791993839225101137 0.37561264938048877227 0.38234492106408968226];

% Layer 3
b3 = [1.9305050614034566792;1.6929547699189451127;-1.4556511925221919945;1.2981383702653352952;1.031461411747776058;0.97771110844335473722;0.77699919277416018559;0.32279512356710499121;-0.23277434202688376819;-0.082453521773858909349;0.016755928870979222567;0.34375073705947689628;0.48998567429430095466;0.62970837555653713657;-0.90872755337435207057;1.2532226761525642189;-0.98252358944505580052;1.7307386199802481386;-1.6779102249556199222;1.8727012925605655003];
LW3_2 = [-0.74979096703548520075 0.81413474740473190661 -0.60793211358284426904 -0.33349771579903492169 -0.80812348929105159989 0.072594981947746634043 0.21542602110608627397 0.42430052359854442123 0.18241973535681899055 -0.80278886276967131863;-0.12076538524498039995 1.0147848606284346484 -0.25103936819497124633 0.70795783729515882055 0.62068330307097563381 -0.3096271500051246961 0.38811623210330764566 -0.85508277664449172661 0.76585676178568118377 -0.12697827167703526485;0.5241338018535782739 -0.2742063240079276043 0.32280531044274929364 -1.0477961449208181843 -1.2056151832209189845 0.15002177786159395789 -0.83411006930157471917 0.12315980004769280787 0.060075344156296346665 0.0076285691088177273733;-0.88525983450363554539 -0.55056165697532211123 0.47545979285499462286 -0.90634317912141226792 -0.57104209633141445046 0.52517972817173286249 -0.39968188076518162966 -0.67360978613599231668 -0.69297381842656169404 -0.30540837029633627342;-0.31352030654680201893 0.62796012501547604501 -0.23303431997806570153 0.55415510023881642265 0.72145981270051873224 0.73097052057412059689 0.83414143724264877555 0.58569806865745310809 0.094029334885725818216 -0.64320860566843374162;-0.57758219792493858957 0.71737052915591670299 -0.1815951593988691104 -0.72048351161994739211 -0.48036503976984895603 -0.28456685560021477421 0.61049665564179655952 0.88013894453985141997 -0.61648570438641114855 -0.33427282522020668187;-0.42531212605526858006 -0.019822982445746636926 -0.86931630727370368117 0.87628753067969966661 0.56359659312654541985 0.64244424865569571548 0.73852269183674257302 0.059934707063145860328 0.33327902967374473109 0.66482045560393021599;-0.87712917162395287463 -0.55585288216012496143 0.61480278180462855087 0.14775919835749024012 0.82648687512001683952 -0.52587872692245707373 -0.46461213207474100217 -0.55072096817205340447 -0.76965025208514226129 -0.60170810731683110895;0.14884422949945830261 0.56887080747321294716 -0.60832295092728361219 0.92301608105742438681 -0.039741682731394570305 0.94220631993723735764 -0.10204441473554271003 0.047513610501858906388 -0.73573491878583130443 0.81881216224314301577;0.66117200458327129997 -0.17906756467065201854 0.40716773692470847879 -0.54081821544534502966 0.7799877659433774868 -0.98376345221650018935 -0.36695207473589591674 0.55026938278911075031 -0.0023463946141780607502 -0.83716207445892143468;-0.6826361482768622535 0.99652706363256471356 -0.33293207613660397159 0.35180827524383362359 0.43124745197798641794 -0.79242157700117543673 -0.66249483129384922897 0.57025674831959938249 0.18093168312946472653 0.36075804528865240695;0.60014505249284688659 0.31361815854785662916 0.63519623503999034231 -0.95897866743047954774 0.36769029376961898103 0.62260157777383429156 -0.52790354217620438781 0.71448499214439376015 0.38279126715295136441 1.1128766796904121517;0.95751623643020300491 0.31058207237030688308 0.26006101029932299218 -0.41161830388295417293 -1.0296779755817455637 0.068125150156929423217 0.58485213440727168432 0.10304855124594670956 -1.0518767821510697225 -0.50579335455653340325;0.59275198421412167438 0.53020753289310074141 -0.44718000281460146272 0.3796101077456508488 0.70943020650708910058 0.9158689115942991732 -0.55605706967071522051 0.65399161415848661161 -0.52979188172067259721 0.30297280941994081394;-0.3112280986686320472 -0.85513101962895476937 -0.78699044874203138988 -0.60526490446890779396 0.0015057319321608113837 0.78934556961771895622 -0.60089491971859310127 0.52541058988538069663 -0.55609917761922922352 0.41684891170215976341;0.77677290194621140262 -0.71858230772095199601 -0.79310518073065527922 -0.20445839879097946201 -0.37118949161155373462 -0.20772318997172672939 -0.010071805184504765279 -0.47909273991225526101 -0.44262050595004670539 -0.92725507927138572928;-0.57008171440451593792 0.52236516423956125266 0.6093072296019425016 -1.3367502905450445727 0.088339487646651948527 -0.32539360430300762195 0.6768473193550836875 0.65512124415916139775 0.85899198314033198276 -0.11489758304600650174;0.9474546977140900772 -1.0612974342995811217 0.48035974957549532061 -0.30203064188049139061 0.11585962498686247502 0.065392730949435512455 0.090336666898785458746 0.28966621292355754225 -0.57058357504938095328 -0.48555419308102415465;-0.67489055467289071899 0.20099604081304198178 0.60777760390196111651 -0.41548856941716599822 0.22474029620192409462 0.96589745411942629083 0.11860764419250362234 -0.52110965437000356104 1.0236268389094527187 0.40509891216984134088;0.77998369149669066758 0.27880253041710478801 -0.4903842059044488666 -0.83588152580998309471 0.68616203825173005537 -0.46171904797581991842 0.10737999627416236481 0.33231245618752003335 -0.93633720077661197756 -0.3957722111299973311];

% Layer 4
b4 = [0.67606172103072348367;-0.22351786518034219564];
LW4_3 = [-0.45578807253260422705 0.25958745880891881397 -0.43108863544149139679 0.85669639649529394365 -0.64591816578731142684 0.69143689874517577643 -0.098638757210765121153 -0.63824030830819999949 0.13738702595702806386 -0.24005053886799798679 0.36820313848706609505 -0.10519267302838143652 -0.80761131407752251299 0.26659215312426637334 0.049336589487446715074 0.3726981978905398174 0.81644715159742298205 0.6090555058659513632 0.48160542870803207949 -0.82311484111466026725;-0.54145373536783703017 0.39536277262834756963 1.0344420848034658889 0.5338911339319277749 0.35444073528128017259 0.45593082608754575968 -0.40645354051956023023 0.94968717713163319782 0.080605173207278724146 0.173645423297117657 -0.70925732703606547691 1.0336408809008190701 -0.26832934711314360143 0.64813462309327274369 0.052061546086085125351 0.54221387447251967462 -0.71952988527643979566 0.71466412557759628754 -0.45600806353179251795 0.63698313119677785199];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.00000003711452];
y1_step1.xoffset = [-1;-0.999999949873532];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
