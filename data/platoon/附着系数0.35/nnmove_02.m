function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jan-2025 19:22:25.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 6 7 8 9 10];
x1_step2.xoffset = [-0.453622957213531;-0.793896915782542;-0.713744249097281;-0.772196103199087;-0.935602688969272;-0.53001608894094;-0.950028273013931;-0.7138864470187;-1];
x1_step2.gain = [1.38840419380454;1.32927477229026;1.177860186148;1.30052904938947;1.32419826634571;1.50381381657537;1.25817062483759;2.08394166127792;1.11304752732771];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.878186985484118221;-1.9112335426926096993;1.4114246902334472988;-1.3476763546448393694;1.2266060819365853796;-0.98660698198333574016;-0.6578096880619270781;-0.2556388136441615222;0.46797610497694724918;-0.15159742518116914312;-0.19972519596312529599;0.25361001530153809425;0.4173289713166214443;-0.62865811738289412158;-1.0848388096182601803;-1.0432753271436210341;1.2373887908937577507;1.5938364063665386716;1.6353187000984132915;2.339888499297919644];
IW1_1 = [1.0482149542075538395 0.79140978171066556079 0.74701239309643208131 0.38029758987061529352 0.34461314374015555861 0.89241518812831321927 0.70961178461452900645 -0.44962986758804396326 -0.45442038317233285349;0.52142499868199509994 -0.60525332079515314909 -0.55751776907813366257 -0.47921703101423146487 0.3746306863661681974 -0.29338995860603189758 0.33073044293153935902 -1.4827932118506823578 0.81818667991992954924;-0.77791260713419108086 0.031921264927247589016 0.79746284303314152186 0.45264816122252399255 -0.092164017691283767197 -0.95329962746168384058 -0.79510130877228313295 -0.6143308848094459762 -0.20565742899053227055;0.342876828200849193 0.56938534746450208957 0.40749226505558133749 0.1580071179261335057 -0.15080362725656989986 0.72503998883984011048 -0.052157192459246076721 1.2477336326267927102 -0.77845013067217472269;0.24524732564289608572 0.7249830863800391656 -1.1933283757644297385 -0.44161956051676670709 0.95132476257478748582 -0.61179225910995249649 0.12459815197659265817 0.94797187675731564571 -0.075978743237556656265;0.97441988710168070398 -0.13616729797292426163 0.64111595927545839135 -0.24422188162662514244 1.0367897244190698025 0.58200986149221378696 -0.5562049058180270622 -0.23139620614611236538 0.5308486106436455243;1.2053723959903899221 -0.78073193208141933308 0.5677300786011514333 -0.42621107816465675366 1.0870221752605411236 -0.17311681929849981332 -0.41706122730935868415 -0.5435503466571021125 0.18861373225027303069;0.14630004516718675411 -1.1401929909642087857 -0.37440291957532473299 0.45308952307059163767 0.36069058348838078931 -0.48085909735668197484 -0.32992115645716701966 0.64857421028628259307 -1.1098362818360636428;0.028314504709804871885 -0.67322665381411694874 -1.023586076218247598 0.025628241489499201111 -0.512466751348508609 -1.0315142399709575916 0.19353020473558021908 -1.0243389400731519601 0.26584472253903029815;-0.013753382104695056204 -1.1140765334094513417 0.8216251596242000188 -0.25111187626758174618 -0.38574255476228253015 -0.72739628054607063934 0.020896790872032063036 -0.5859823031408445404 -0.8577573829908256009;0.17279211254086471183 -0.24406656135372817307 0.45367295296530729676 0.5881085380949852004 -0.68156680063739905062 -1.0763778626448090581 0.26755413569692082509 0.92348221730141699659 -1.044413428230470009;-1.0862586612999125535 -0.58566453604532109356 0.50791316784223816683 0.51008060167704849519 0.55076326639190953394 -0.27411495970729454763 0.19437448961026707051 -0.57167746429215204884 0.68091110570701041116;-0.29966743505908527423 0.90593448312197155659 -0.45142573937779778559 -0.4537023553253554109 -0.60921135694719530385 0.52912142755335400679 -1.0275827856658077408 0.87244603781152652022 -0.12355130446192263971;-0.46259780833526126242 1.0052420065818816752 -0.52090186736258325961 0.47242054752622625324 -0.6713294437110647328 -0.72383855793085072339 -1.0575866951085892698 0.042288115872917642069 0.031260618007021817588;-0.16401582267990064135 -0.68791899991109195511 -0.17149504380552718641 -0.18353670644219496899 0.89307677400592844208 0.038721271427398409881 0.68530984833915808974 1.2543012965494868549 -0.038795744487335005746;-0.32287431874168148749 0.50150240997666462039 -0.67152949967763209127 0.76199317696641688524 0.59338762217850626879 0.96057131589987887477 -0.91918289125855245913 -0.63228940090464824664 -0.50811609170302052263;0.65088070629461225458 0.482254540768486617 0.87110937713306213492 0.48128924795731553576 -0.44432662388502769391 -0.72259851374794836776 1.1844134698995083532 0.41206313933257293636 0.82806993227953284986;0.19175424373552490964 0.32240842791706947335 -0.11940810774216926993 1.3060526149411213481 0.88520109871594665485 -0.26251100108090674734 0.40686954224493304677 1.010262442192285226 0.57402159359856519405;-0.098743356897083203738 -1.0065102496363143025 0.35061988908770569395 -1.0133623896366728001 -1.0048415066630507209 -0.3057168296238169658 -0.57344973169907287325 -0.63093458471978747237 -0.55310000757619270928;0.73510906623927074754 -0.43225558611648645657 0.68085852529622703511 0.61171461971352891762 -0.29697722610855292746 0.55410383832224097134 0.30453373500560210196 0.8829826101211244449 0.041734466824705246379];

% Layer 2
b2 = [-1.4538386758136336852;1.159943771083738584;-0.91953594606948541035;-0.61955658109664335509;0.078599434934231660055;-0.070102400359540739672;-0.44361201935558336462;0.97063950694092315796;1.2425019278588427252;-1.5542532295837196976];
LW2_1 = [-0.087900357788775265733 -0.27596522439604487253 0.29873880073102959676 -0.4695949164087645511 0.8113946195209157386 0.069408750070247882125 0.3228104614644107806 -0.53698498025756835617 -0.2040128459356092272 0.80862948386085609087 -0.65958778550134411489 -0.27023111722123727141 0.21711924556713740886 -0.39938530740647965045 0.10822431917775676702 0.2512375828535615141 -0.32422755490302512804 -0.0089606333165329205004 -0.27144098372896252602 0.071883816850303455803;0.022880558199768495642 -0.19661930774606317662 -0.13396548624968226959 -0.013675225121010901874 0.40738076119293281652 0.36790795025470884871 0.18905481928959386173 0.48401468678014658575 -0.42741582110473880229 -0.053301325981589223191 -0.047628272186888712114 -0.18137877001795782439 0.437276222703374573 0.016490471831835856742 0.18523594507049084834 0.35890860882251657271 -0.46825935085599923458 -0.42425626115847142605 -0.44645125973637028727 0.024584748754652448188;0.56979751369312203746 -0.93221490070157475571 -0.66823788471609413264 -0.51059456815154968812 -0.44817783222566448531 0.12664474624039540052 -0.35804419232322437505 0.080456787559023884571 -0.029584244027879465222 0.37352031174181921092 -0.50122825113758273652 0.014504676798978433094 -0.45226833810619110343 -0.55410207447340120712 -0.024935845775721651729 -0.35395607227629366509 -0.48818890911034257263 -0.21310904333858163295 -0.31219444231182813532 0.051819691959785564583;-0.075363316351316184116 0.67452363911684698472 0.13216445938227536216 0.41140366142372319924 -0.12755318079529609498 -0.53550158656056734419 -0.51490034647997529049 0.46870510806189907838 -0.50549291130281970297 -0.1774871811002218247 -0.43698634617563675286 -0.28872901872056533357 0.2626936034047433477 0.19566131387810195563 0.10468702413595792899 -0.1699867820130671614 0.7167037515876129028 -0.45483417362677885931 0.50392728379773765734 0.053660845888752688182;-0.39235215306101195454 0.62370207659695275915 -0.21215359093482302755 -0.36092144069657383643 0.3328854722006445721 0.29527677956590353547 0.58745542483305612791 0.19367470860171637215 -0.0033689820134190015533 -0.13215038097428721819 -0.38304590224534884602 -0.52944918373200344774 -0.58641305114451980351 -0.20015507620324496374 0.29175779352725678129 -0.076332472574410628607 -0.29858694609014907462 0.44657271617632743332 -0.22880712299066457982 0.070882889256457637384;-0.37835796027902751648 0.92732936218584416377 -0.25329747019012244236 0.011569986662070772324 0.38424579761967736502 0.17444467912195507631 0.16406882876764222745 -0.013927876350261011659 -0.15737962970726165901 -0.2530094967606642542 0.4696442072267043577 0.46986480197892327437 -0.23433205322950387273 -0.2639914443886305917 0.34061403820649033269 -0.028166405441697496548 0.66274136964158170127 0.14845960548261524781 0.92365362916996995857 0.47434210057153425311;-0.33489834835667608992 0.23691353250574931355 -0.012702641117855543659 -0.2521502436274042358 0.56147537764397803528 -0.47844452308322127365 0.13105216637314209827 -0.42518893294583220976 0.58727169064964201972 0.27781112235573512947 -0.35443762458805744275 -0.35724978266253104575 0.34200399933919289897 0.43273498018978318047 0.48404885159590005372 -0.17857753306174509178 0.28948985728022591513 0.39125861189085192615 -0.33331229170846082832 0.45477540954788947536;0.3246567234404275637 0.21260885077811900179 -0.123018477095116055 -0.45727445718831588595 -0.76684355509251200811 -0.013049946333689201039 0.26217619694600730051 0.15531959566888958735 -0.16071072355063792392 -0.36172662098851643409 -0.64667015271969474632 0.61829906800584111259 0.012099212046000760307 -0.18756974648532542815 0.32885732109772169984 0.22922576417752779654 -0.36669534499934386407 -0.88841763934246864576 -0.33241970540214521579 0.47255557994570218661;0.18716670044312974652 -0.43365730742659636121 -0.26834078988468368365 -0.15582661859229085533 0.36633190910482693603 -0.16788021719662768461 0.53014485983903891775 -0.3337284625190635734 0.60934808353441605178 0.26793381343447536524 -0.44278210508955795355 0.13541763885264448963 0.10925723282268680336 0.05264831210368795672 -0.5157661065973139225 0.015990437731662698884 -0.63344677119170889057 0.52957209479631173199 0.28455995244727161353 -0.033372086632653903682;-0.22026502745942314054 -0.091402303230202153195 -0.50097336167714134891 0.071437397491846910125 0.17992736660185867925 -0.25058441001923459357 -0.83300904378667739447 0.11142298894900332096 0.37067764547989850987 -0.12302184875639951556 0.27518442286676275677 0.44063935087910782729 -0.23028818449552360126 0.49530453289300957476 -0.020767480843459151102 -0.28961268874220924552 -0.24754960381958351912 -0.5283359639579985334 -0.34926578262576840617 0.33337742959791855091];

% Layer 3
b3 = [-1.9659066186108975494;1.7612534997058844066;1.4916891283740891794;-1.0988728847545341516;1.1436072356754483081;-0.8419573391172987531;-0.74791987914961755024;-0.44503560036003847467;-0.2506430151581522936;0.12655510992047833141;-0.12712867422469031897;0.36796703680090847577;-0.53184432428484373911;0.42065651537391995918;-0.71525566516761729385;1.0788138950303600705;1.2098588981276132692;1.5338825971161760275;-1.5593983927944725654;1.8814523901954685048];
LW3_2 = [0.94121018468881212371 -0.91036317771241814789 -0.10837898957025934865 0.29115804001324852024 0.68702712806337273843 0.47325620566770837394 0.44138844158761886272 1.0324410384273536856 -0.33756973471207607496 0.21422328286978034595;-0.71936408404785112669 0.31060877173492662529 0.73848683022306360613 0.59713625478823306736 -0.5416315931952528917 0.7639054443770197933 0.57018733612299410396 -0.46842127762007756964 0.420590449784368825 -0.69717340026028362665;-0.34679143429486453121 0.7048188507541188752 0.47706160682186182775 -0.818958936344563182 -0.042393714764362010194 0.42425152337091709409 0.72973723089641162609 0.71218311226159858318 0.68824481684396532355 -0.59726835120109500465;0.58688762739297606341 -0.46509269047220802573 -0.18699416184821368581 -0.41786673518205308397 -0.42337172254975458108 -0.094320727410190971507 1.0236085664127714256 -0.53573171346248926739 0.70199431299837145026 1.0570856087529703071;-0.69309466202616198949 -0.69492380965629241274 0.3827571664719682798 -0.488298405175324024 0.17320216582866734822 0.45132769138837375289 -0.26119523429752089516 0.062095646108368679483 -0.77052166590699744386 -0.98133048441874481949;0.78873707136727522204 0.92042291773414697253 -0.20659562198713921077 0.092470318751292732151 0.087343459946600143784 0.27991840145819935071 -0.69311476681992911786 0.69248571006141845796 -0.79131776762125549673 0.61839460561928183413;1.0141634121501326149 0.50158699587166200029 0.24647161164176703552 1.0986995151762153355 0.38482743671087904502 1.0406521469581893058 0.12452839719052297141 -0.39599803644171849282 -0.47857115511473358183 -0.30566644715072222027;0.48281219248882445427 -0.36171244147847514405 -0.48042072194254381579 -0.264806489141096002 -0.46310871514118717718 -0.58055135621308351368 -1.0937151864402683277 -1.2227736794868944159 -0.14541247140541374572 0.28123109879748375839;0.61648956349385419795 0.017363957227609558981 -0.28970320944915284311 0.49011335371291403495 0.42360014559320990912 0.81056872343534513981 1.1057176863918853904 -0.85368985203334601941 -0.69929656772541226584 0.49351622003255751769;-0.57428378662538670518 -0.30635921716812919424 0.71508828556721248937 0.69015119489365284178 -0.09844687529340942489 0.87545823327287708437 0.30889088309327999982 0.71656707821121423674 -0.14842033087810560521 0.89881580578976605356;-0.47358219573304854988 0.89533204970052904237 0.0028102895264131028813 0.69991655906817229482 -0.78682911876253347483 -0.61453233483210245591 0.52080247254351696995 -0.57971703669261476222 0.21572233556771791552 -1.1533881701676402809;0.95767050178402679528 -0.46278305703596100962 -0.84093319841428748607 1.1909341536491082625 -0.16767722575594254386 0.5437866651037959187 -0.24705623487121344817 0.44662712991466368972 -0.054408143949698589692 -0.26134717815410335451;-0.30605065402302605859 1.0527310783054446564 0.32356565075610171922 -0.50950629007993963882 -0.47160456161790820229 0.099345274511938655437 -0.030609223862142518474 1.0292353489186187865 -0.93321664511199475811 -0.016884342847992801079;0.59777282883091287236 -0.89155657272862454121 0.23432174976038872005 -0.11285050309625292708 -0.58082544993148466084 0.14043905653025132163 -0.52684677484264774705 -0.37515490446705124228 -0.45660674733082323717 1.174480119398478184;-0.21034324439986612498 -0.64271199079554119926 -0.32144691614246728717 0.50587694493215873415 0.86809710667070749679 -0.60548752196776001178 0.2209818839507536048 -1.5506834232802750861 0.23628048904826651211 -0.51902878466414614778;0.72708904043625699476 -1.2478190953224579385 0.5384012427010145263 -0.17064150129877153628 0.68755268013849923925 -0.73701737044487924955 0.52360462211360414564 -0.75102871286721617494 0.14771069319419136145 0.76142482872338368427;0.68328886360776130982 0.61000052752567734959 -0.49627836139154285489 0.031784319743270172953 -0.75620554979472931478 -0.85079388595654892313 0.55324545110447775897 -0.40515412187622007467 0.059720072008528586605 0.94135209650678919324;0.80892684239297596438 -0.18696359648533125708 0.61426472083638061772 -0.92936573462016225378 -0.859560334283745342 -0.35808574049922731186 -0.19086055431889240031 0.79827448117597288313 0.16428183577826246942 -0.26617377604511865963;-1.1464297782615466836 0.52845644020038473609 -0.58817265120187289806 -1.007539139952017937 0.87103238590982667855 -0.020095133310049043129 0.80737900848417221145 -0.043406978602775321552 -0.28572387096126217187 -0.30360006267718159245;0.45802142862634015463 0.20281885140429048442 -0.41949340671550289228 -0.5369255815005815613 -0.47004670867835190995 0.95417288434723246393 -0.1549391511311012104 -0.58041061722591869021 0.83308501172290194692 -0.81388052485189155139];

% Layer 4
b4 = [0.0066399064924033395635;0.036982883925760254296];
LW4_3 = [-0.042788586987298669884 0.76932532456907132268 -0.12764152949156537531 1.2118882165801154738 -0.023522119744809489444 -0.91556883207055561602 0.69365218907265213666 0.23918617697629118712 -0.043260954529869374841 0.59910216937040339236 -0.81403319453858813404 -0.21577960510039101427 -0.63563565834613988681 -0.40803567724417477702 -0.5951666049854531515 -0.42739884722202059475 0.28353128448344461221 -0.23005587366214150236 -0.75644720203398807534 -0.27182296955366674895;-0.820644022054603961 -0.96561322886554667999 -0.12710786401605489448 0.95696047528876726496 0.33547014311792955343 0.27898089581365959067 -0.48701979251948435135 0.87264015221908253217 -0.64720787846016314404 -0.024481778120798623755 -0.44000500908443801462 0.78510641405965031492 0.20984311622409426712 -0.30217168606382266427 0.33629224858323236713 -1.1995057406213194273 -0.45644025483362299367 0.69400451564335952082 0.71992301218107446203 0.34503069552374959761];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.00000000000364;1.00000003711452];
y1_step1.xoffset = [-1;-0.999999949873532];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
